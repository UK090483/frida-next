{"version":3,"sources":["webpack://_N_E/./node_modules/popmotion/dist/es/animations/utils/find-spring.js","webpack://_N_E/./node_modules/popmotion/dist/es/animations/generators/spring.js","webpack://_N_E/./node_modules/popmotion/dist/es/utils/mix-color.js","webpack://_N_E/./node_modules/popmotion/dist/es/utils/mix-complex.js","webpack://_N_E/./node_modules/popmotion/dist/es/utils/interpolate.js","webpack://_N_E/./node_modules/popmotion/dist/es/easing/utils.js","webpack://_N_E/./node_modules/popmotion/dist/es/easing/index.js","webpack://_N_E/./node_modules/popmotion/dist/es/animations/generators/keyframes.js","webpack://_N_E/./node_modules/popmotion/dist/es/animations/utils/detect-animation-from-options.js","webpack://_N_E/./node_modules/popmotion/dist/es/animations/generators/decay.js","webpack://_N_E/./node_modules/popmotion/dist/es/animations/utils/elapsed.js","webpack://_N_E/./node_modules/popmotion/dist/es/animations/index.js","webpack://_N_E/./node_modules/popmotion/dist/es/easing/cubic-bezier.js","webpack://_N_E/./node_modules/framer-motion/dist/es/animation/utils/easing.js","webpack://_N_E/./node_modules/framer-motion/dist/es/animation/utils/is-animatable.js","webpack://_N_E/./node_modules/framer-motion/dist/es/animation/utils/default-transitions.js","webpack://_N_E/./node_modules/framer-motion/dist/es/animation/utils/transitions.js","webpack://_N_E/./node_modules/popmotion/dist/es/animations/inertia.js","webpack://_N_E/./node_modules/framer-motion/dist/es/events/event-info.js","webpack://_N_E/./node_modules/framer-motion/dist/es/events/use-dom-event.js","webpack://_N_E/./node_modules/framer-motion/dist/es/events/use-pointer-event.js","webpack://_N_E/./node_modules/framer-motion/dist/es/events/utils.js","webpack://_N_E/./node_modules/framer-motion/dist/es/gestures/drag/utils/lock.js","webpack://_N_E/./node_modules/framer-motion/dist/es/gestures/utils/event-type.js","webpack://_N_E/./node_modules/framer-motion/dist/es/motion/features/animations.js","webpack://_N_E/./node_modules/framer-motion/dist/es/gestures/use-hover-gesture.js","webpack://_N_E/./node_modules/framer-motion/dist/es/gestures/utils/is-node-or-child.js","webpack://_N_E/./node_modules/framer-motion/dist/es/motion/features/gestures.js","webpack://_N_E/./node_modules/framer-motion/dist/es/gestures/use-tap-gesture.js","webpack://_N_E/./node_modules/framer-motion/dist/es/gestures/use-focus-gesture.js","webpack://_N_E/./node_modules/framer-motion/dist/es/motion/features/layout/utils.js","webpack://_N_E/./node_modules/framer-motion/dist/es/motion/utils/make-renderless-component.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/utils/state.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/html/utils/build-projection-transform.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/utils/lifecycles.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/utils/flat-tree.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/index.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/utils/motion-values.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/dom/projection/relative-set.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/utils/projection.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/dom/utils/unit-conversion.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/dom/utils/parse-dom-variant.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/html/visual-element.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/svg/visual-element.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/dom/create-visual-element.js","webpack://_N_E/./node_modules/framer-motion/dist/es/gestures/PanSession.js","webpack://_N_E/./node_modules/framer-motion/dist/es/gestures/drag/utils/constraints.js","webpack://_N_E/./node_modules/framer-motion/dist/es/gestures/drag/VisualElementDragControls.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/dom/projection/convert-to-relative.js","webpack://_N_E/./node_modules/framer-motion/dist/es/motion/features/drag.js","webpack://_N_E/./node_modules/framer-motion/dist/es/gestures/use-pan-gesture.js","webpack://_N_E/./node_modules/framer-motion/dist/es/gestures/drag/use-drag.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/dom/projection/default-scale-correctors.js","webpack://_N_E/./node_modules/framer-motion/dist/es/motion/features/layout/Animate.js","webpack://_N_E/./node_modules/framer-motion/dist/es/motion/features/layout/Measure.js","webpack://_N_E/./node_modules/framer-motion/dist/es/motion/features/layout/index.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/dom/motion.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/dom/projection/measure.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/dom/utils/css-variables-conversion.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/dom/value-types/animatable-none.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/dom/value-types/defaults.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/dom/value-types/dimensions.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/dom/value-types/type-auto.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/dom/value-types/test.js","webpack://_N_E/./node_modules/framer-motion/dist/es/utils/shallow-compare.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/utils/animation.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/utils/animation-state.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/utils/is-draggable.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/dom/value-types/find.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/utils/setters.js","webpack://_N_E/./node_modules/framer-motion/dist/es/utils/is-numerical-string.js","webpack://_N_E/./node_modules/framer-motion/dist/es/render/utils/types.js","webpack://_N_E/./node_modules/framer-motion/dist/es/utils/array.js","webpack://_N_E/./node_modules/framer-motion/dist/es/utils/each-axis.js","webpack://_N_E/./node_modules/framer-motion/dist/es/utils/geometry/delta-apply.js","webpack://_N_E/./node_modules/framer-motion/dist/es/utils/geometry/delta-calc.js","webpack://_N_E/./node_modules/framer-motion/dist/es/utils/subscription-manager.js","webpack://_N_E/./node_modules/framer-motion/dist/es/utils/time-conversion.js","webpack://_N_E/./node_modules/framer-motion/dist/es/value/index.js","webpack://_N_E/./node_modules/hey-listen/dist/hey-listen.es.js","webpack://_N_E/./node_modules/popmotion/dist/es/utils/clamp.js","webpack://_N_E/./node_modules/popmotion/dist/es/utils/is-point.js","webpack://_N_E/./node_modules/popmotion/dist/es/utils/is-point-3d.js","webpack://_N_E/./node_modules/popmotion/dist/es/utils/distance.js","webpack://_N_E/./node_modules/popmotion/dist/es/utils/inc.js","webpack://_N_E/./node_modules/popmotion/dist/es/utils/mix.js","webpack://_N_E/./node_modules/popmotion/dist/es/utils/pipe.js","webpack://_N_E/./node_modules/popmotion/dist/es/utils/progress.js","webpack://_N_E/./node_modules/popmotion/dist/es/utils/velocity-per-second.js","webpack://_N_E/./node_modules/style-value-types/dist/es/color/hex.js","webpack://_N_E/./node_modules/style-value-types/dist/es/color/hsla.js","webpack://_N_E/./node_modules/style-value-types/dist/es/color/index.js","webpack://_N_E/./node_modules/style-value-types/dist/es/color/rgba.js","webpack://_N_E/./node_modules/style-value-types/dist/es/color/utils.js","webpack://_N_E/./node_modules/style-value-types/dist/es/complex/filter.js","webpack://_N_E/./node_modules/style-value-types/dist/es/complex/index.js"],"names":["safeMin","findSpring","_a","envelope","derivative","_b","duration","_c","bounce","_d","velocity","_e","mass","maxDuration","dampingRatio","clamp","undampedFreq","exponentialDecay","delta","a","b","calcAngularFreq","c","Math","exp","d","e","pow","f","g","initialGuess","result","i","approximateRoot","isNaN","stiffness","damping","sqrt","durationKeys","physicsKeys","isSpringType","options","keys","some","key","undefined","spring","from","to","restSpeed","restDelta","state","done","value","springOptions","isResolvedFromDuration","derived","getSpringOptions","resolveSpring","zero","resolveVelocity","createSpring","initialVelocity","initialDelta","undampedAngularFreq","abs","angularFreq_1","t","sin","cos","dampedAngularFreq_1","freqForT","min","sinh","cosh","next","current","currentVelocity","isBelowVelocityThreshold","isBelowDisplacementThreshold","flipTarget","needsInterpolation","_t","mixLinearColor","v","fromExpo","toExpo","max","colorTypes","hex","rgba","hsla","getColorType","find","type","test","notAnimatable","color","mixColor","fromColorType","toColorType","transform","fromColor","parse","toColor","blended","mixFunc","mix","alpha","getMixer","origin","target","mixComplex","mixArray","output","numValues","length","blendValue","map","fromThis","mixObject","analyse","parsed","complex","numNumbers","numRGB","numHSL","hue","template","originStats","targetStats","pipe","mixNumber","p","createMixers","ease","customMixer","mixers","mixerFactory","Array","isArray","numMixers","mixer","easingFunction","push","interpolate","input","isClamp","inputLength","concat","reverse","interpolator","progress","fastInterpolate","lastInputIndex","mixerIndex","foundMixerIndex","progressInRange","slowInterpolate","power","reverseEasing","easing","mirrorEasing","createBackIn","linear","easeIn","easeOut","easeInOut","circIn","acos","circOut","circInOut","backIn","backOut","backInOut","anticipate","backEasing","createAnticipate","bounceOut","p2","bounceIn","defaultEasing","values","splice","keyframes","offset","times","o","convertOffsetToTimes","_value","defaultOffset","createInterpolator","types","decay","timeConstant","_f","modifyTarget","amplitude","ideal","loopElapsed","elapsed","delay","framesync","update","passTimestamp","start","stop","animate","driverControls","latest","interpolateFromNumber","autoplay","driver","_g","repeat","repeatMax","_h","repeatType","_j","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate","repeatCount","computedDuration","isComplete","isForwardPlayback","animator","config","Set","Object","has","detectAnimationFromOptions","call","animation","reverseElapsed","hasRepeatDelayElapsed","a1","a2","calcBezier","getSlope","kSampleStepSize","cubicBezier","mX1","mY1","mX2","mY2","sampleValues","Float32Array","getTForX","aX","intervalStart","currentSample","kSplineTableSize","guessForT","initialSlope","aGuessT","currentSlope","newtonRaphsonIterate","aA","aB","currentX","currentT","binarySubdivide","easingLookup","bounceInOut","easingDefinitionToFunction","definition","isAnimatable","startsWith","underDampedSpring","criticallyDampedSpring","linearTween","defaultTransitions","x","y","z","rotate","rotateX","rotateY","rotateZ","scaleX","scaleY","scale","opacity","backgroundColor","default","legacyRepeatWarning","convertTransitionToAnimationOptions","yoyo","flip","loop","transition","isEasingArray","getPopmotionAnimationOptions","hydrateKeyframes","when","delayChildren","staggerChildren","staggerDirection","isTransitionDefined","valueKey","transitionFactory","getDefaultTransition","getAnimation","valueTransition","getValueTransition","get","isTargetAnimatable","isZero","getZeroUnit","isOriginAnimatable","getVelocity","set","currentAnimation","bounceStiffness","bounceDamping","isOutOfBounds","boundaryNearest","startAnimation","startSpring","prev_1","current_1","boundary_1","heading_1","inertia","parseFloat","indexOf","potentialUnitType","delayTimer","controls","getDelayFromTransition","setTimeout","clearTimeout","defaultPagePoint","pageX","pageY","pointFromTouch","pointType","point","touches","changedTouches","pointFromMouse","extractEventInfo","event","getViewportPointFromEvent","wrapHandler","handler","shouldFilterPrimaryPointer","eventHandler","listener","isMouseEvent","MouseEvent","button","addDomEvent","eventName","addEventListener","removeEventListener","useDomEvent","ref","useEffect","element","mouseEventNames","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","pointerenter","pointerleave","touchEventNames","getPointerEventName","name","window","onpointerdown","ontouchstart","onmousedown","addPointerEvent","usePointerEvent","createLock","lock","globalHorizontalLock","globalVerticalLock","getGlobalLock","drag","openHorizontal_1","openVertical_1","isDragActive","openGestureLock","PointerEvent","pointerType","isTouchEvent","animations","visualElement","animationState","subscribe","exit","props","custom","isPresent","onExitComplete","presenceContext","useContext","setActive","then","createHoverEvent","isActive","callback","info","isHoverEventsEnabled","isNodeOrChild","parent","child","parentElement","gestureAnimations","tap","onTap","onTapStart","onTapCancel","whileTap","hasPressListeners","isPressing","useRef","cancelPointerEndListeners","removePointerEndListener","checkPointerEnd","onPointerUp","getInstance","onPointerCancel","focus","whileFocus","hover","onHoverStart","onHoverEnd","whileHover","tweenAxis","prev","calcRelativeOffsetAxis","calcRelativeOffset","checkIfParentHasChanged","prevId","getLayoutId","nextId","makeRenderlessComponent","hook","createLayoutState","isHydrated","layout","layoutCorrected","treeScale","deltaFinal","deltaTransform","zeroLayout","buildLayoutProjectionTransform","latestTransform","translate","identityProjection","buildLayoutProjectionTransformOrigin","names","FlatTree","this","children","isDirty","prototype","add","remove","forEach","sort","treeType","build","getBaseTarget","makeTargetAnimatable","measureViewportBox","renderInstance","render","readValueFromInstance","resetTransform","restoreTransform","removeValueFromRenderState","sortNodePosition","scrapeMotionValuesFromProps","presenceId","blockInitialAnimation","visualState","instance","projectionParent","unsubscribeFromLeadVisualElement","crossfader","projectionTargetProgress","removeFromVariantTree","latestValues","renderState","lifecycles","managers","propSubscriptions","clearAllListeners","manager","clear","updatePropListeners","on","propListener","args","_i","arguments","notify","apply","createLifecycles","projection","isEnabled","isTargetLocked","targetFinal","leadProjection","leadLatestValues","layoutState","hasViewportBoxUpdated","Map","valueSubscriptions","prevMotionValues","baseTarget","isProjectionReady","triggerBuild","valuesToRender","crossfadedValues","getCrossfadeState","notifyUpdate","updateTreeLayoutProjection","layoutTree","fireUpdateLayoutProjection","initialMotionValues","isControllingVariants","isVariantNode","depth","path","variantChildren","isVisible","manuallyAnimateOnMount","Boolean","isMounted","mount","newInstance","pointTo","addVariantChild","unmount","updateLayoutProjection","stopLayoutAnimation","delete","closestVariantNode","getClosestVariantNode","other","scheduleUpdateLayoutProjection","layoutId","getStaticValue","setStaticValue","getLatestValues","setVisibility","visibility","scheduleRender","canMutate","suspendHoverEvents","addValue","hasValue","removeValue","removeOnChange","onChange","latestValue","removeOnRenderRequest","onRenderRequest","bindToMotionValue","getValue","defaultValue","forEachValue","readValue","setBaseTarget","syncRender","setProps","newProps","nextValue","prevValue","existingValue","hasAnimated","updateMotionValuesFromProps","getProps","getVariant","variants","getVariantContext","startAtParent","context_1","initial","context","numVariantProps","name_1","variantProps","prop","enableLayoutProjection","lockProjectionTarget","unlockProjectionTarget","getLayoutState","setCrossfader","newCrossfader","startLayoutAnimation","axis","isRelative","getProjectionAnimationProgress","relativeTarget","clearListeners","setProjectionTargetAxis","animateMotionValue","withTransform","viewportBox","notifySetAxisTarget","rebaseProjectionTarget","force","box","shouldRebase","isAnimating","notifyLayoutReady","getProjectionParent","relativeOffset","setCurrentViewportBox","notifyLayoutUpdate","prevViewportBox","prevTreeScaleX","prevTreeScaleY","prevDeltaTransform","treePath","transformOrigin","updateLayoutDeltas","notifyViewportBoxUpdate","fireResolveRelativeTargetBox","foundParent","ancestor","resolveRelativeTargetBox","relativeParent","shouldResetTransform","_layoutResetTransform","newLead","onSetAxisTarget","onLayoutAnimationComplete","presence","layoutSafeToRemove","BoundingBoxDimension","positionalKeys","isPositionalKey","setAndResetVelocity","isNumOrPxType","px","getPosFromMatrix","matrix","pos","split","getTranslateFromMatrix","pos2","pos3","_bbox","matrix3d","match","transformKeys","nonTranslationalTransformKeys","positionalValues","width","height","top","left","bottom","right","checkAndConvertChangedValueTypes","transitionEnd","targetPositionalKeys","filter","removedTransformValues","hasAttemptedToRemoveTransformValues","changedValueTypeKeys","toType","fromType","numKeyframes","removedTransforms","removeNonTranslationalTransform","convertedTarget","changedKeys","originBbox","elementComputedStyle","getComputedStyle","display","originComputedStyle","targetBbox","convertChangedValueTypes","unitConversion","hasPositionalKey","htmlConfig","domElement","defaultType","computedStyle","getPropertyValue","compareDocumentPosition","style","transformPagePoint","transformTemplate","mutableState","vars","transformValues","resolved","parseDomVariant","isProjectionTranform","htmlVisualElement","svgVisualElement","getAttribute","_element","createDomVisualElement","Component","enableHardwareAcceleration","PanSession","handlers","_this","startEvent","lastMoveEvent","lastMoveEventInfo","updatePoint","getPanInfo","history","isPanStarted","isDistancePastThreshold","distance","timestamp","onStart","onMove","handlePointerMove","transformPoint","buttons","handlePointerUp","end","onEnd","panInfo","initialInfo","onSessionStart","removeListeners","updateHandlers","subtractPoint","lastDevicePoint","startDevicePoint","timeDelta","timestampedPoint","lastPoint","time","Infinity","applyConstraints","elastic","calcRelativeAxisConstraints","calcViewportAxisConstraints","layoutAxis","constraintsAxis","resolveAxisElastic","dragElastic","minLabel","maxLabel","resolvePointElastic","label","lastPointerEvent","elementDragControls","WeakMap","VisualElementDragControls","isDragging","currentDirection","constraints","hasMutatedConstraints","cursorProgress","originPoint","openGlobalLock","panSession","originEvent","snapToCursor","stopMotion","updateLayoutMeasurements","isLayoutDrag","axisValue","getAxisMotionValue","dragPropagation","resolveDragConstraints","onDragStart","dragDirectionLock","lockThreshold","direction","getCurrentDirection","onDirectionLock","updateAxis","onDrag","isExternalDrag","dragConstraints","resolveRefConstraints","layoutBox","calcRelativeConstraints","resolveDragElastic","relativeConstraints","rebaseAxisConstraints","onMeasureDragConstraints","constraintsElement","constraintsBox","measuredConstraints","calcViewportConstraints","userConstraints","cancelDrag","animateDragEnd","onDragEnd","shouldDrag","length_1","center","updateVisualElementAxis","updateAxisMotionValue","axisLayout","axisLength","axisProgress","calcConstrainedMinPoint","dragMomentum","remainingProps","dragKey","toUpperCase","_dragX","_dragY","dragTransition","convertToRelativeProjection","relativeConstraints_1","momentumAnimations","startAxisValueAnimation","Promise","all","onDragTransitionEnd","currentValue","scalePoint","boxProgress","calcPositionFromProgress","stopPointerListener","dragListener","stopResizeListener","stopLayoutUpdateListener","onLayoutUpdate","prevDragCursor","pan","onPan","onPanStart","onPanEnd","onPanSessionStart","hasPanEvents","MotionConfigContext","groupDragControls","dragControls","pixelsToPercent","pixels","varToken","borderCorrectionDefinition","process","_layoutState","defaultScaleCorrectors","borderRadius","applyTo","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","boxShadow","original","containsCSSVariables","includes","cssVariables","replace","shadow","xScale","yScale","averageScale","i_1","cssVariable","Animate","_super","frameTarget","currentAnimationTarget","stopAxisAnimation","isAnimatingTree","originBox","targetBox","visibilityAction","shouldStackAnimate","prevParent","safeToRemove","prevParentViewportBox","parentLayout","isProvidedCorrectDataForRelativeSharedLayout","boxHasMoved","hasMoved","targetLength","animateAxis","notifyLayoutAnimationComplete","componentDidMount","unsubLayoutReady","componentWillUnmount","axisIsEqual","layoutProgress","frame","unsubscribeProgress","layoutTransition","defaultLayoutTransition","isZeroBox","zeroAxis","Measure","syncLayout","framerSyncLayout","register","onUnmount","getSnapshotBeforeUpdate","syncUpdate","componentDidUpdate","flush","layoutAnimations","measureLayout","SharedLayoutContext","layoutAnimation","featureBundle","motion","getBoundingBox","getBoundingClientRect","isCSSVariable","cssVariableRegex","getVariableValue","exec","parseCSSVariable","token","fallback","trim","resolveCSSVariables","HTMLElement","getAnimatableNone","defaultValueType","defaultValueTypes","outlineColor","fill","stroke","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","WebkitFilter","getDefaultValueType","dimensionValueTypes","vw","vh","findDimensionValueType","testValueType","shallowCompare","prevLength","animateVariant","variant","transitionOverride","animateTarget","resolve","getChildAnimations","size","forwardDelay","maxStaggerDuration","generateStaggerDuration","sortByTreeOrder","notifyAnimationComplete","animateChildren","first","last","animationTypeState","getState","valueTarget","shouldBlockAnimation","protectedKeys","needsAnimating","shouldBlock","hasOwnProperty","variantPriorityOrder","reversePriorityOrder","numAnimationTypes","animateList","notifyAnimationStart","resolvedDefinition","animateVisualElement","createAnimationState","createTypeState","createState","allAnimatedKeys","isInitialRender","buildResolvedTypeValues","acc","animateChanges","changedActiveType","removedKeys","encounteredKeys","removedVariantIndex","_loop_1","typeState","propIsVariant","activeDelta","isInherited","prevProp","shouldAnimateType","variantsHaveChanged","definitionList","resolvedValues","reduce","prevResolvedValues","allKeys","markToAnimate","fallbackAnimation_1","fallbackTarget","shouldAnimate","isAnimated","setAnimateFunction","makeAnimator","isDraggable","valueTypes","findValueType","setMotionValue","setTarget","checkTargetForNewValues","newValueKeys","numNewValues","targetValue","getOriginFromTransition","getOrigin","AnimationType","addUniqueItem","arr","item","removeItem","index","eachAxis","resetAxis","originAxis","resetBox","applyPointDelta","boxScale","applyAxisDelta","applyBoxDelta","applyAxisTransforms","final","transforms","scaleKey","originKey","axisOrigin","xKeys","yKeys","applyBoxTransforms","finalBox","removePointDelta","removeAxisTransforms","removeAxisDelta","removeBoxTransforms","applyTreeDeltas","treeLength","node","isNear","maxDistance","calcLength","calcOrigin","source","sourceLength","updateAxisDelta","updateBoxDelta","defaultOrigin","originX","originY","calcRelativeAxis","relative","calcRelativeBox","parentProjection","SubscriptionManager","subscriptions","numSubscriptions","getSize","secondsToMilliseconds","seconds","MotionValue","init","lastUpdated","updateSubscribers","velocityUpdateSubscribers","renderSubscribers","canTrackVelocity","updateAndNotify","scheduleVelocityCheck","velocityCheck","subscription","attach","passiveEffect","getPrevious","stopAnimation","clearAnimation","destroy","motionValue","warning","invariant","isPoint","isPoint3D","distance1D","xDelta","yDelta","zDelta","isNum","combineFunctions","transformers","toFromDifference","velocityPerSecond","frameDuration","r","substr","red","parseInt","green","blue","saturation","lightness","alpha$1","round","clampRgbUnit","rgbUnit","isColorString","testProp","splitColor","aName","bName","cName","maxDefaults","applyDefaultFilter","slice","number","unit","functionRegex","functions","join","colorToken","numberToken","numColors","colors","numbers","tokenised","createTransformer","convertNumbersToZero","transformer"],"mappings":"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","file":"static/chunks/37-b129c5d54bfcd5f40780.js","sourcesContent":["import { warning } from 'hey-listen';\nimport { clamp } from '../../utils/clamp.js';\n\nvar safeMin = 0.001;\nvar minDuration = 0.01;\nvar maxDuration = 10.0;\nvar minDamping = 0.05;\nvar maxDamping = 1;\nfunction findSpring(_a) {\n    var _b = _a.duration, duration = _b === void 0 ? 800 : _b, _c = _a.bounce, bounce = _c === void 0 ? 0.25 : _c, _d = _a.velocity, velocity = _d === void 0 ? 0 : _d, _e = _a.mass, mass = _e === void 0 ? 1 : _e;\n    var envelope;\n    var derivative;\n    warning(duration <= maxDuration * 1000, \"Spring duration must be 10 seconds or less\");\n    var dampingRatio = 1 - bounce;\n    dampingRatio = clamp(minDamping, maxDamping, dampingRatio);\n    duration = clamp(minDuration, maxDuration, duration / 1000);\n    if (dampingRatio < 1) {\n        envelope = function (undampedFreq) {\n            var exponentialDecay = undampedFreq * dampingRatio;\n            var delta = exponentialDecay * duration;\n            var a = exponentialDecay - velocity;\n            var b = calcAngularFreq(undampedFreq, dampingRatio);\n            var c = Math.exp(-delta);\n            return safeMin - (a / b) * c;\n        };\n        derivative = function (undampedFreq) {\n            var exponentialDecay = undampedFreq * dampingRatio;\n            var delta = exponentialDecay * duration;\n            var d = delta * velocity + velocity;\n            var e = Math.pow(dampingRatio, 2) * Math.pow(undampedFreq, 2) * duration;\n            var f = Math.exp(-delta);\n            var g = calcAngularFreq(Math.pow(undampedFreq, 2), dampingRatio);\n            var factor = -envelope(undampedFreq) + safeMin > 0 ? -1 : 1;\n            return (factor * ((d - e) * f)) / g;\n        };\n    }\n    else {\n        envelope = function (undampedFreq) {\n            var a = Math.exp(-undampedFreq * duration);\n            var b = (undampedFreq - velocity) * duration + 1;\n            return -safeMin + a * b;\n        };\n        derivative = function (undampedFreq) {\n            var a = Math.exp(-undampedFreq * duration);\n            var b = (velocity - undampedFreq) * (duration * duration);\n            return a * b;\n        };\n    }\n    var initialGuess = 5 / duration;\n    var undampedFreq = approximateRoot(envelope, derivative, initialGuess);\n    if (isNaN(undampedFreq)) {\n        return {\n            stiffness: 100,\n            damping: 10,\n        };\n    }\n    else {\n        var stiffness = Math.pow(undampedFreq, 2) * mass;\n        return {\n            stiffness: stiffness,\n            damping: dampingRatio * 2 * Math.sqrt(mass * stiffness),\n        };\n    }\n}\nvar rootIterations = 12;\nfunction approximateRoot(envelope, derivative, initialGuess) {\n    var result = initialGuess;\n    for (var i = 1; i < rootIterations; i++) {\n        result = result - envelope(result) / derivative(result);\n    }\n    return result;\n}\nfunction calcAngularFreq(undampedFreq, dampingRatio) {\n    return undampedFreq * Math.sqrt(1 - dampingRatio * dampingRatio);\n}\n\nexport { calcAngularFreq, findSpring, maxDamping, maxDuration, minDamping, minDuration };\n","import { __rest, __assign } from 'tslib';\nimport { findSpring, calcAngularFreq } from '../utils/find-spring.js';\n\nvar durationKeys = [\"duration\", \"bounce\"];\nvar physicsKeys = [\"stiffness\", \"damping\", \"mass\"];\nfunction isSpringType(options, keys) {\n    return keys.some(function (key) { return options[key] !== undefined; });\n}\nfunction getSpringOptions(options) {\n    var springOptions = __assign({ velocity: 0.0, stiffness: 100, damping: 10, mass: 1.0, isResolvedFromDuration: false }, options);\n    if (!isSpringType(options, physicsKeys) &&\n        isSpringType(options, durationKeys)) {\n        var derived = findSpring(options);\n        springOptions = __assign(__assign(__assign({}, springOptions), derived), { velocity: 0.0, mass: 1.0 });\n        springOptions.isResolvedFromDuration = true;\n    }\n    return springOptions;\n}\nfunction spring(_a) {\n    var _b = _a.from, from = _b === void 0 ? 0.0 : _b, _c = _a.to, to = _c === void 0 ? 1.0 : _c, _d = _a.restSpeed, restSpeed = _d === void 0 ? 2 : _d, restDelta = _a.restDelta, options = __rest(_a, [\"from\", \"to\", \"restSpeed\", \"restDelta\"]);\n    var state = { done: false, value: from };\n    var _e = getSpringOptions(options), stiffness = _e.stiffness, damping = _e.damping, mass = _e.mass, velocity = _e.velocity, isResolvedFromDuration = _e.isResolvedFromDuration;\n    var resolveSpring = zero;\n    var resolveVelocity = zero;\n    function createSpring() {\n        var initialVelocity = velocity ? -(velocity / 1000) : 0.0;\n        var initialDelta = to - from;\n        var dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n        var undampedAngularFreq = Math.sqrt(stiffness / mass) / 1000;\n        restDelta !== null && restDelta !== void 0 ? restDelta : (restDelta = Math.abs(to - from) <= 1 ? 0.01 : 0.4);\n        if (dampingRatio < 1) {\n            var angularFreq_1 = calcAngularFreq(undampedAngularFreq, dampingRatio);\n            resolveSpring = function (t) {\n                var envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n                return (to -\n                    envelope *\n                        (((initialVelocity +\n                            dampingRatio * undampedAngularFreq * initialDelta) /\n                            angularFreq_1) *\n                            Math.sin(angularFreq_1 * t) +\n                            initialDelta * Math.cos(angularFreq_1 * t)));\n            };\n            resolveVelocity = function (t) {\n                var envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n                return (dampingRatio *\n                    undampedAngularFreq *\n                    envelope *\n                    ((Math.sin(angularFreq_1 * t) *\n                        (initialVelocity +\n                            dampingRatio *\n                                undampedAngularFreq *\n                                initialDelta)) /\n                        angularFreq_1 +\n                        initialDelta * Math.cos(angularFreq_1 * t)) -\n                    envelope *\n                        (Math.cos(angularFreq_1 * t) *\n                            (initialVelocity +\n                                dampingRatio *\n                                    undampedAngularFreq *\n                                    initialDelta) -\n                            angularFreq_1 *\n                                initialDelta *\n                                Math.sin(angularFreq_1 * t)));\n            };\n        }\n        else if (dampingRatio === 1) {\n            resolveSpring = function (t) {\n                return to -\n                    Math.exp(-undampedAngularFreq * t) *\n                        (initialDelta +\n                            (initialVelocity + undampedAngularFreq * initialDelta) *\n                                t);\n            };\n        }\n        else {\n            var dampedAngularFreq_1 = undampedAngularFreq * Math.sqrt(dampingRatio * dampingRatio - 1);\n            resolveSpring = function (t) {\n                var envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n                var freqForT = Math.min(dampedAngularFreq_1 * t, 300);\n                return (to -\n                    (envelope *\n                        ((initialVelocity +\n                            dampingRatio * undampedAngularFreq * initialDelta) *\n                            Math.sinh(freqForT) +\n                            dampedAngularFreq_1 *\n                                initialDelta *\n                                Math.cosh(freqForT))) /\n                        dampedAngularFreq_1);\n            };\n        }\n    }\n    createSpring();\n    return {\n        next: function (t) {\n            var current = resolveSpring(t);\n            if (!isResolvedFromDuration) {\n                var currentVelocity = resolveVelocity(t) * 1000;\n                var isBelowVelocityThreshold = Math.abs(currentVelocity) <= restSpeed;\n                var isBelowDisplacementThreshold = Math.abs(to - current) <= restDelta;\n                state.done =\n                    isBelowVelocityThreshold && isBelowDisplacementThreshold;\n            }\n            else {\n                state.done = t >= options.duration;\n            }\n            state.value = state.done ? to : current;\n            return state;\n        },\n        flipTarget: function () {\n            var _a;\n            velocity = -velocity;\n            _a = [to, from], from = _a[0], to = _a[1];\n            createSpring();\n        },\n    };\n}\nspring.needsInterpolation = function (a, b) {\n    return typeof a === \"string\" || typeof b === \"string\";\n};\nvar zero = function (_t) { return 0; };\n\nexport { spring };\n","import { __assign } from 'tslib';\nimport { mix } from './mix.js';\nimport { hex, rgba, hsla } from 'style-value-types';\nimport { invariant } from 'hey-listen';\n\nvar mixLinearColor = function (from, to, v) {\n    var fromExpo = from * from;\n    var toExpo = to * to;\n    return Math.sqrt(Math.max(0, v * (toExpo - fromExpo) + fromExpo));\n};\nvar colorTypes = [hex, rgba, hsla];\nvar getColorType = function (v) {\n    return colorTypes.find(function (type) { return type.test(v); });\n};\nvar notAnimatable = function (color) {\n    return \"'\" + color + \"' is not an animatable color. Use the equivalent color code instead.\";\n};\nvar mixColor = function (from, to) {\n    var fromColorType = getColorType(from);\n    var toColorType = getColorType(to);\n    invariant(!!fromColorType, notAnimatable(from));\n    invariant(!!toColorType, notAnimatable(to));\n    invariant(fromColorType.transform === toColorType.transform, \"Both colors must be hex/RGBA, OR both must be HSLA.\");\n    var fromColor = fromColorType.parse(from);\n    var toColor = toColorType.parse(to);\n    var blended = __assign({}, fromColor);\n    var mixFunc = fromColorType === hsla ? mix : mixLinearColor;\n    return function (v) {\n        for (var key in blended) {\n            if (key !== \"alpha\") {\n                blended[key] = mixFunc(fromColor[key], toColor[key], v);\n            }\n        }\n        blended.alpha = mix(fromColor.alpha, toColor.alpha, v);\n        return fromColorType.transform(blended);\n    };\n};\n\nexport { mixColor, mixLinearColor };\n","import { __spreadArray, __assign } from 'tslib';\nimport { complex, color } from 'style-value-types';\nimport { mix } from './mix.js';\nimport { mixColor } from './mix-color.js';\nimport { isNum } from './inc.js';\nimport { pipe } from './pipe.js';\nimport { invariant } from 'hey-listen';\n\nfunction getMixer(origin, target) {\n    if (isNum(origin)) {\n        return function (v) { return mix(origin, target, v); };\n    }\n    else if (color.test(origin)) {\n        return mixColor(origin, target);\n    }\n    else {\n        return mixComplex(origin, target);\n    }\n}\nvar mixArray = function (from, to) {\n    var output = __spreadArray([], from);\n    var numValues = output.length;\n    var blendValue = from.map(function (fromThis, i) { return getMixer(fromThis, to[i]); });\n    return function (v) {\n        for (var i = 0; i < numValues; i++) {\n            output[i] = blendValue[i](v);\n        }\n        return output;\n    };\n};\nvar mixObject = function (origin, target) {\n    var output = __assign(__assign({}, origin), target);\n    var blendValue = {};\n    for (var key in output) {\n        if (origin[key] !== undefined && target[key] !== undefined) {\n            blendValue[key] = getMixer(origin[key], target[key]);\n        }\n    }\n    return function (v) {\n        for (var key in blendValue) {\n            output[key] = blendValue[key](v);\n        }\n        return output;\n    };\n};\nfunction analyse(value) {\n    var parsed = complex.parse(value);\n    var numValues = parsed.length;\n    var numNumbers = 0;\n    var numRGB = 0;\n    var numHSL = 0;\n    for (var i = 0; i < numValues; i++) {\n        if (numNumbers || typeof parsed[i] === \"number\") {\n            numNumbers++;\n        }\n        else {\n            if (parsed[i].hue !== undefined) {\n                numHSL++;\n            }\n            else {\n                numRGB++;\n            }\n        }\n    }\n    return { parsed: parsed, numNumbers: numNumbers, numRGB: numRGB, numHSL: numHSL };\n}\nvar mixComplex = function (origin, target) {\n    var template = complex.createTransformer(target);\n    var originStats = analyse(origin);\n    var targetStats = analyse(target);\n    invariant(originStats.numHSL === targetStats.numHSL &&\n        originStats.numRGB === targetStats.numRGB &&\n        originStats.numNumbers >= targetStats.numNumbers, \"Complex values '\" + origin + \"' and '\" + target + \"' too different to mix. Ensure all colors are of the same type.\");\n    return pipe(mixArray(originStats.parsed, targetStats.parsed), template);\n};\n\nexport { mixArray, mixComplex, mixObject };\n","import { progress } from './progress.js';\nimport { mix } from './mix.js';\nimport { mixColor } from './mix-color.js';\nimport { mixComplex, mixArray, mixObject } from './mix-complex.js';\nimport { color } from 'style-value-types';\nimport { clamp } from './clamp.js';\nimport { pipe } from './pipe.js';\nimport { invariant } from 'hey-listen';\n\nvar mixNumber = function (from, to) { return function (p) { return mix(from, to, p); }; };\nfunction detectMixerFactory(v) {\n    if (typeof v === 'number') {\n        return mixNumber;\n    }\n    else if (typeof v === 'string') {\n        if (color.test(v)) {\n            return mixColor;\n        }\n        else {\n            return mixComplex;\n        }\n    }\n    else if (Array.isArray(v)) {\n        return mixArray;\n    }\n    else if (typeof v === 'object') {\n        return mixObject;\n    }\n}\nfunction createMixers(output, ease, customMixer) {\n    var mixers = [];\n    var mixerFactory = customMixer || detectMixerFactory(output[0]);\n    var numMixers = output.length - 1;\n    for (var i = 0; i < numMixers; i++) {\n        var mixer = mixerFactory(output[i], output[i + 1]);\n        if (ease) {\n            var easingFunction = Array.isArray(ease) ? ease[i] : ease;\n            mixer = pipe(easingFunction, mixer);\n        }\n        mixers.push(mixer);\n    }\n    return mixers;\n}\nfunction fastInterpolate(_a, _b) {\n    var from = _a[0], to = _a[1];\n    var mixer = _b[0];\n    return function (v) { return mixer(progress(from, to, v)); };\n}\nfunction slowInterpolate(input, mixers) {\n    var inputLength = input.length;\n    var lastInputIndex = inputLength - 1;\n    return function (v) {\n        var mixerIndex = 0;\n        var foundMixerIndex = false;\n        if (v <= input[0]) {\n            foundMixerIndex = true;\n        }\n        else if (v >= input[lastInputIndex]) {\n            mixerIndex = lastInputIndex - 1;\n            foundMixerIndex = true;\n        }\n        if (!foundMixerIndex) {\n            var i = 1;\n            for (; i < inputLength; i++) {\n                if (input[i] > v || i === lastInputIndex) {\n                    break;\n                }\n            }\n            mixerIndex = i - 1;\n        }\n        var progressInRange = progress(input[mixerIndex], input[mixerIndex + 1], v);\n        return mixers[mixerIndex](progressInRange);\n    };\n}\nfunction interpolate(input, output, _a) {\n    var _b = _a === void 0 ? {} : _a, _c = _b.clamp, isClamp = _c === void 0 ? true : _c, ease = _b.ease, mixer = _b.mixer;\n    var inputLength = input.length;\n    invariant(inputLength === output.length, 'Both input and output ranges must be the same length');\n    invariant(!ease || !Array.isArray(ease) || ease.length === inputLength - 1, 'Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values.');\n    if (input[0] > input[inputLength - 1]) {\n        input = [].concat(input);\n        output = [].concat(output);\n        input.reverse();\n        output.reverse();\n    }\n    var mixers = createMixers(output, ease, mixer);\n    var interpolator = inputLength === 2\n        ? fastInterpolate(input, mixers)\n        : slowInterpolate(input, mixers);\n    return isClamp\n        ? function (v) { return interpolator(clamp(input[0], input[inputLength - 1], v)); }\n        : interpolator;\n}\n\nexport { interpolate };\n","var reverseEasing = function (easing) { return function (p) { return 1 - easing(1 - p); }; };\nvar mirrorEasing = function (easing) { return function (p) {\n    return p <= 0.5 ? easing(2 * p) / 2 : (2 - easing(2 * (1 - p))) / 2;\n}; };\nvar createExpoIn = function (power) { return function (p) { return Math.pow(p, power); }; };\nvar createBackIn = function (power) { return function (p) {\n    return p * p * ((power + 1) * p - power);\n}; };\nvar createAnticipate = function (power) {\n    var backEasing = createBackIn(power);\n    return function (p) {\n        return (p *= 2) < 1\n            ? 0.5 * backEasing(p)\n            : 0.5 * (2 - Math.pow(2, -10 * (p - 1)));\n    };\n};\n\nexport { createAnticipate, createBackIn, createExpoIn, mirrorEasing, reverseEasing };\n","import { createExpoIn, reverseEasing, mirrorEasing, createBackIn, createAnticipate } from './utils.js';\n\nvar DEFAULT_OVERSHOOT_STRENGTH = 1.525;\nvar BOUNCE_FIRST_THRESHOLD = 4.0 / 11.0;\nvar BOUNCE_SECOND_THRESHOLD = 8.0 / 11.0;\nvar BOUNCE_THIRD_THRESHOLD = 9.0 / 10.0;\nvar linear = function (p) { return p; };\nvar easeIn = createExpoIn(2);\nvar easeOut = reverseEasing(easeIn);\nvar easeInOut = mirrorEasing(easeIn);\nvar circIn = function (p) { return 1 - Math.sin(Math.acos(p)); };\nvar circOut = reverseEasing(circIn);\nvar circInOut = mirrorEasing(circOut);\nvar backIn = createBackIn(DEFAULT_OVERSHOOT_STRENGTH);\nvar backOut = reverseEasing(backIn);\nvar backInOut = mirrorEasing(backIn);\nvar anticipate = createAnticipate(DEFAULT_OVERSHOOT_STRENGTH);\nvar ca = 4356.0 / 361.0;\nvar cb = 35442.0 / 1805.0;\nvar cc = 16061.0 / 1805.0;\nvar bounceOut = function (p) {\n    if (p === 1 || p === 0)\n        return p;\n    var p2 = p * p;\n    return p < BOUNCE_FIRST_THRESHOLD\n        ? 7.5625 * p2\n        : p < BOUNCE_SECOND_THRESHOLD\n            ? 9.075 * p2 - 9.9 * p + 3.4\n            : p < BOUNCE_THIRD_THRESHOLD\n                ? ca * p2 - cb * p + cc\n                : 10.8 * p * p - 20.52 * p + 10.72;\n};\nvar bounceIn = reverseEasing(bounceOut);\nvar bounceInOut = function (p) {\n    return p < 0.5\n        ? 0.5 * (1.0 - bounceOut(1.0 - p * 2.0))\n        : 0.5 * bounceOut(p * 2.0 - 1.0) + 0.5;\n};\n\nexport { anticipate, backIn, backInOut, backOut, bounceIn, bounceInOut, bounceOut, circIn, circInOut, circOut, easeIn, easeInOut, easeOut, linear };\n","import { interpolate } from '../../utils/interpolate.js';\nimport { easeInOut } from '../../easing/index.js';\n\nfunction defaultEasing(values, easing) {\n    return values.map(function () { return easing || easeInOut; }).splice(0, values.length - 1);\n}\nfunction defaultOffset(values) {\n    var numValues = values.length;\n    return values.map(function (_value, i) {\n        return i !== 0 ? i / (numValues - 1) : 0;\n    });\n}\nfunction convertOffsetToTimes(offset, duration) {\n    return offset.map(function (o) { return o * duration; });\n}\nfunction keyframes(_a) {\n    var _b = _a.from, from = _b === void 0 ? 0 : _b, _c = _a.to, to = _c === void 0 ? 1 : _c, ease = _a.ease, offset = _a.offset, _d = _a.duration, duration = _d === void 0 ? 300 : _d;\n    var state = { done: false, value: from };\n    var values = Array.isArray(to) ? to : [from, to];\n    var times = convertOffsetToTimes(offset && offset.length === values.length\n        ? offset\n        : defaultOffset(values), duration);\n    function createInterpolator() {\n        return interpolate(times, values, {\n            ease: Array.isArray(ease) ? ease : defaultEasing(values, ease),\n        });\n    }\n    var interpolator = createInterpolator();\n    return {\n        next: function (t) {\n            state.value = interpolator(t);\n            state.done = t >= duration;\n            return state;\n        },\n        flipTarget: function () {\n            values.reverse();\n            interpolator = createInterpolator();\n        },\n    };\n}\n\nexport { convertOffsetToTimes, defaultEasing, defaultOffset, keyframes };\n","import { spring } from '../generators/spring.js';\nimport { keyframes } from '../generators/keyframes.js';\nimport { decay } from '../generators/decay.js';\n\nvar types = { keyframes: keyframes, spring: spring, decay: decay };\nfunction detectAnimationFromOptions(config) {\n    if (Array.isArray(config.to)) {\n        return keyframes;\n    }\n    else if (types[config.type]) {\n        return types[config.type];\n    }\n    var keys = new Set(Object.keys(config));\n    if (keys.has(\"ease\") ||\n        (keys.has(\"duration\") && !keys.has(\"dampingRatio\"))) {\n        return keyframes;\n    }\n    else if (keys.has(\"dampingRatio\") ||\n        keys.has(\"stiffness\") ||\n        keys.has(\"mass\") ||\n        keys.has(\"damping\") ||\n        keys.has(\"restSpeed\") ||\n        keys.has(\"restDelta\")) {\n        return spring;\n    }\n    return keyframes;\n}\n\nexport { detectAnimationFromOptions };\n","function decay(_a) {\n    var _b = _a.velocity, velocity = _b === void 0 ? 0 : _b, _c = _a.from, from = _c === void 0 ? 0 : _c, _d = _a.power, power = _d === void 0 ? 0.8 : _d, _e = _a.timeConstant, timeConstant = _e === void 0 ? 350 : _e, _f = _a.restDelta, restDelta = _f === void 0 ? 0.5 : _f, modifyTarget = _a.modifyTarget;\n    var state = { done: false, value: from };\n    var amplitude = power * velocity;\n    var ideal = from + amplitude;\n    var target = modifyTarget === undefined ? ideal : modifyTarget(ideal);\n    if (target !== ideal)\n        amplitude = target - from;\n    return {\n        next: function (t) {\n            var delta = -amplitude * Math.exp(-t / timeConstant);\n            state.done = !(delta > restDelta || delta < -restDelta);\n            state.value = state.done ? target : target + delta;\n            return state;\n        },\n        flipTarget: function () { },\n    };\n}\n\nexport { decay };\n","function loopElapsed(elapsed, duration, delay) {\n    if (delay === void 0) { delay = 0; }\n    return elapsed - duration - delay;\n}\nfunction reverseElapsed(elapsed, duration, delay, isForwardPlayback) {\n    if (delay === void 0) { delay = 0; }\n    if (isForwardPlayback === void 0) { isForwardPlayback = true; }\n    return isForwardPlayback\n        ? loopElapsed(duration + -elapsed, duration, delay)\n        : duration - (elapsed - duration) + delay;\n}\nfunction hasRepeatDelayElapsed(elapsed, duration, delay, isForwardPlayback) {\n    return isForwardPlayback ? elapsed >= duration + delay : elapsed <= -delay;\n}\n\nexport { hasRepeatDelayElapsed, loopElapsed, reverseElapsed };\n","import { __rest, __assign } from 'tslib';\nimport { detectAnimationFromOptions } from './utils/detect-animation-from-options.js';\nimport sync, { cancelSync } from 'framesync';\nimport { interpolate } from '../utils/interpolate.js';\nimport { hasRepeatDelayElapsed, reverseElapsed, loopElapsed } from './utils/elapsed.js';\n\nvar framesync = function (update) {\n    var passTimestamp = function (_a) {\n        var delta = _a.delta;\n        return update(delta);\n    };\n    return {\n        start: function () { return sync.update(passTimestamp, true); },\n        stop: function () { return cancelSync.update(passTimestamp); },\n    };\n};\nfunction animate(_a) {\n    var _b, _c;\n    var from = _a.from, _d = _a.autoplay, autoplay = _d === void 0 ? true : _d, _e = _a.driver, driver = _e === void 0 ? framesync : _e, _f = _a.elapsed, elapsed = _f === void 0 ? 0 : _f, _g = _a.repeat, repeatMax = _g === void 0 ? 0 : _g, _h = _a.repeatType, repeatType = _h === void 0 ? \"loop\" : _h, _j = _a.repeatDelay, repeatDelay = _j === void 0 ? 0 : _j, onPlay = _a.onPlay, onStop = _a.onStop, onComplete = _a.onComplete, onRepeat = _a.onRepeat, onUpdate = _a.onUpdate, options = __rest(_a, [\"from\", \"autoplay\", \"driver\", \"elapsed\", \"repeat\", \"repeatType\", \"repeatDelay\", \"onPlay\", \"onStop\", \"onComplete\", \"onRepeat\", \"onUpdate\"]);\n    var to = options.to;\n    var driverControls;\n    var repeatCount = 0;\n    var computedDuration = options.duration;\n    var latest;\n    var isComplete = false;\n    var isForwardPlayback = true;\n    var interpolateFromNumber;\n    var animator = detectAnimationFromOptions(options);\n    if ((_c = (_b = animator).needsInterpolation) === null || _c === void 0 ? void 0 : _c.call(_b, from, to)) {\n        interpolateFromNumber = interpolate([0, 100], [from, to], {\n            clamp: false,\n        });\n        from = 0;\n        to = 100;\n    }\n    var animation = animator(__assign(__assign({}, options), { from: from, to: to }));\n    function repeat() {\n        repeatCount++;\n        if (repeatType === \"reverse\") {\n            isForwardPlayback = repeatCount % 2 === 0;\n            elapsed = reverseElapsed(elapsed, computedDuration, repeatDelay, isForwardPlayback);\n        }\n        else {\n            elapsed = loopElapsed(elapsed, computedDuration, repeatDelay);\n            if (repeatType === \"mirror\")\n                animation.flipTarget();\n        }\n        isComplete = false;\n        onRepeat && onRepeat();\n    }\n    function complete() {\n        driverControls.stop();\n        onComplete && onComplete();\n    }\n    function update(delta) {\n        if (!isForwardPlayback)\n            delta = -delta;\n        elapsed += delta;\n        if (!isComplete) {\n            var state = animation.next(Math.max(0, elapsed));\n            latest = state.value;\n            if (interpolateFromNumber)\n                latest = interpolateFromNumber(latest);\n            isComplete = isForwardPlayback ? state.done : elapsed <= 0;\n        }\n        onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate(latest);\n        if (isComplete) {\n            if (repeatCount === 0)\n                computedDuration !== null && computedDuration !== void 0 ? computedDuration : (computedDuration = elapsed);\n            if (repeatCount < repeatMax) {\n                hasRepeatDelayElapsed(elapsed, computedDuration, repeatDelay, isForwardPlayback) && repeat();\n            }\n            else {\n                complete();\n            }\n        }\n    }\n    function play() {\n        onPlay === null || onPlay === void 0 ? void 0 : onPlay();\n        driverControls = driver(update);\n        driverControls.start();\n    }\n    autoplay && play();\n    return {\n        stop: function () {\n            onStop === null || onStop === void 0 ? void 0 : onStop();\n            driverControls.stop();\n        },\n    };\n}\n\nexport { animate };\n","import { linear } from './index.js';\n\nvar a = function (a1, a2) { return 1.0 - 3.0 * a2 + 3.0 * a1; };\nvar b = function (a1, a2) { return 3.0 * a2 - 6.0 * a1; };\nvar c = function (a1) { return 3.0 * a1; };\nvar calcBezier = function (t, a1, a2) {\n    return ((a(a1, a2) * t + b(a1, a2)) * t + c(a1)) * t;\n};\nvar getSlope = function (t, a1, a2) {\n    return 3.0 * a(a1, a2) * t * t + 2.0 * b(a1, a2) * t + c(a1);\n};\nvar subdivisionPrecision = 0.0000001;\nvar subdivisionMaxIterations = 10;\nfunction binarySubdivide(aX, aA, aB, mX1, mX2) {\n    var currentX;\n    var currentT;\n    var i = 0;\n    do {\n        currentT = aA + (aB - aA) / 2.0;\n        currentX = calcBezier(currentT, mX1, mX2) - aX;\n        if (currentX > 0.0) {\n            aB = currentT;\n        }\n        else {\n            aA = currentT;\n        }\n    } while (Math.abs(currentX) > subdivisionPrecision &&\n        ++i < subdivisionMaxIterations);\n    return currentT;\n}\nvar newtonIterations = 8;\nvar newtonMinSlope = 0.001;\nfunction newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n    for (var i = 0; i < newtonIterations; ++i) {\n        var currentSlope = getSlope(aGuessT, mX1, mX2);\n        if (currentSlope === 0.0) {\n            return aGuessT;\n        }\n        var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n        aGuessT -= currentX / currentSlope;\n    }\n    return aGuessT;\n}\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\nfunction cubicBezier(mX1, mY1, mX2, mY2) {\n    if (mX1 === mY1 && mX2 === mY2)\n        return linear;\n    var sampleValues = new Float32Array(kSplineTableSize);\n    for (var i = 0; i < kSplineTableSize; ++i) {\n        sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n    }\n    function getTForX(aX) {\n        var intervalStart = 0.0;\n        var currentSample = 1;\n        var lastSample = kSplineTableSize - 1;\n        for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n            intervalStart += kSampleStepSize;\n        }\n        --currentSample;\n        var dist = (aX - sampleValues[currentSample]) /\n            (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n        var guessForT = intervalStart + dist * kSampleStepSize;\n        var initialSlope = getSlope(guessForT, mX1, mX2);\n        if (initialSlope >= newtonMinSlope) {\n            return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n        }\n        else if (initialSlope === 0.0) {\n            return guessForT;\n        }\n        else {\n            return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n        }\n    }\n    return function (t) {\n        return t === 0 || t === 1 ? t : calcBezier(getTForX(t), mY1, mY2);\n    };\n}\n\nexport { cubicBezier };\n","import { __read } from 'tslib';\nimport { invariant } from 'hey-listen';\nimport { cubicBezier, linear, easeIn, easeInOut, easeOut, circIn, circInOut, circOut, backIn, backInOut, backOut, anticipate, bounceIn, bounceInOut, bounceOut } from 'popmotion';\n\nvar easingLookup = {\n    linear: linear,\n    easeIn: easeIn,\n    easeInOut: easeInOut,\n    easeOut: easeOut,\n    circIn: circIn,\n    circInOut: circInOut,\n    circOut: circOut,\n    backIn: backIn,\n    backInOut: backInOut,\n    backOut: backOut,\n    anticipate: anticipate,\n    bounceIn: bounceIn,\n    bounceInOut: bounceInOut,\n    bounceOut: bounceOut,\n};\nvar easingDefinitionToFunction = function (definition) {\n    if (Array.isArray(definition)) {\n        // If cubic bezier definition, create bezier curve\n        invariant(definition.length === 4, \"Cubic bezier arrays must contain four numerical values.\");\n        var _a = __read(definition, 4), x1 = _a[0], y1 = _a[1], x2 = _a[2], y2 = _a[3];\n        return cubicBezier(x1, y1, x2, y2);\n    }\n    else if (typeof definition === \"string\") {\n        // Else lookup from table\n        invariant(easingLookup[definition] !== undefined, \"Invalid easing type '\" + definition + \"'\");\n        return easingLookup[definition];\n    }\n    return definition;\n};\nvar isEasingArray = function (ease) {\n    return Array.isArray(ease) && typeof ease[0] !== \"number\";\n};\n\nexport { easingDefinitionToFunction, isEasingArray };\n","import { complex } from 'style-value-types';\n\n/**\n * Check if a value is animatable. Examples:\n *\n * : 100, \"100px\", \"#fff\"\n * : \"block\", \"url(2.jpg)\"\n * @param value\n *\n * @internal\n */\nvar isAnimatable = function (key, value) {\n    // If the list of keys tat might be non-animatable grows, replace with Set\n    if (key === \"zIndex\")\n        return false;\n    // If it's a number or a keyframes array, we can animate it. We might at some point\n    // need to do a deep isAnimatable check of keyframes, or let Popmotion handle this,\n    // but for now lets leave it like this for performance reasons\n    if (typeof value === \"number\" || Array.isArray(value))\n        return true;\n    if (typeof value === \"string\" && // It's animatable if we have a string\n        complex.test(value) && // And it contains numbers and/or colors\n        !value.startsWith(\"url(\") // Unless it starts with \"url(\"\n    ) {\n        return true;\n    }\n    return false;\n};\n\nexport { isAnimatable };\n","import { __assign } from 'tslib';\nimport { isKeyframesTarget } from './is-keyframes-target.js';\n\nvar underDampedSpring = function () { return ({\n    type: \"spring\",\n    stiffness: 500,\n    damping: 25,\n    restDelta: 0.5,\n    restSpeed: 10,\n}); };\nvar criticallyDampedSpring = function (to) { return ({\n    type: \"spring\",\n    stiffness: 550,\n    damping: to === 0 ? 2 * Math.sqrt(550) : 30,\n    restDelta: 0.01,\n    restSpeed: 10,\n}); };\nvar linearTween = function () { return ({\n    type: \"keyframes\",\n    ease: \"linear\",\n    duration: 0.3,\n}); };\nvar keyframes = function (values) { return ({\n    type: \"keyframes\",\n    duration: 0.8,\n    values: values,\n}); };\nvar defaultTransitions = {\n    x: underDampedSpring,\n    y: underDampedSpring,\n    z: underDampedSpring,\n    rotate: underDampedSpring,\n    rotateX: underDampedSpring,\n    rotateY: underDampedSpring,\n    rotateZ: underDampedSpring,\n    scaleX: criticallyDampedSpring,\n    scaleY: criticallyDampedSpring,\n    scale: criticallyDampedSpring,\n    opacity: linearTween,\n    backgroundColor: linearTween,\n    color: linearTween,\n    default: criticallyDampedSpring,\n};\nvar getDefaultTransition = function (valueKey, to) {\n    var transitionFactory;\n    if (isKeyframesTarget(to)) {\n        transitionFactory = keyframes;\n    }\n    else {\n        transitionFactory =\n            defaultTransitions[valueKey] || defaultTransitions.default;\n    }\n    return __assign({ to: to }, transitionFactory(to));\n};\n\nexport { criticallyDampedSpring, getDefaultTransition, linearTween, underDampedSpring };\n","import { __assign, __rest, __spreadArray, __read } from 'tslib';\nimport { inertia, animate } from 'popmotion';\nimport { secondsToMilliseconds } from '../../utils/time-conversion.js';\nimport { isEasingArray, easingDefinitionToFunction } from './easing.js';\nimport { isAnimatable } from './is-animatable.js';\nimport { getDefaultTransition } from './default-transitions.js';\nimport { warning } from 'hey-listen';\nimport { getAnimatableNone } from '../../render/dom/value-types/animatable-none.js';\n\n/**\n * Decide whether a transition is defined on a given Transition.\n * This filters out orchestration options and returns true\n * if any options are left.\n */\nfunction isTransitionDefined(_a) {\n    _a.when; _a.delay; _a.delayChildren; _a.staggerChildren; _a.staggerDirection; _a.repeat; _a.repeatType; _a.repeatDelay; _a.from; var transition = __rest(_a, [\"when\", \"delay\", \"delayChildren\", \"staggerChildren\", \"staggerDirection\", \"repeat\", \"repeatType\", \"repeatDelay\", \"from\"]);\n    return !!Object.keys(transition).length;\n}\nvar legacyRepeatWarning = false;\n/**\n * Convert Framer Motion's Transition type into Popmotion-compatible options.\n */\nfunction convertTransitionToAnimationOptions(_a) {\n    var ease = _a.ease, times = _a.times, yoyo = _a.yoyo, flip = _a.flip, loop = _a.loop, transition = __rest(_a, [\"ease\", \"times\", \"yoyo\", \"flip\", \"loop\"]);\n    var options = __assign({}, transition);\n    if (times)\n        options[\"offset\"] = times;\n    /**\n     * Convert any existing durations from seconds to milliseconds\n     */\n    if (transition.duration)\n        options[\"duration\"] = secondsToMilliseconds(transition.duration);\n    if (transition.repeatDelay)\n        options.repeatDelay = secondsToMilliseconds(transition.repeatDelay);\n    /**\n     * Map easing names to Popmotion's easing functions\n     */\n    if (ease) {\n        options[\"ease\"] = isEasingArray(ease)\n            ? ease.map(easingDefinitionToFunction)\n            : easingDefinitionToFunction(ease);\n    }\n    /**\n     * Support legacy transition API\n     */\n    if (transition.type === \"tween\")\n        options.type = \"keyframes\";\n    /**\n     * TODO: These options are officially removed from the API.\n     */\n    if (yoyo || loop || flip) {\n        warning(!legacyRepeatWarning, \"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options.\");\n        legacyRepeatWarning = true;\n        if (yoyo) {\n            options.repeatType = \"reverse\";\n        }\n        else if (loop) {\n            options.repeatType = \"loop\";\n        }\n        else if (flip) {\n            options.repeatType = \"mirror\";\n        }\n        options.repeat = loop || yoyo || flip || transition.repeat;\n    }\n    /**\n     * TODO: Popmotion 9 has the ability to automatically detect whether to use\n     * a keyframes or spring animation, but does so by detecting velocity and other spring options.\n     * It'd be good to introduce a similar thing here.\n     */\n    if (transition.type !== \"spring\")\n        options.type = \"keyframes\";\n    return options;\n}\n/**\n * Get the delay for a value by checking Transition with decreasing specificity.\n */\nfunction getDelayFromTransition(transition, key) {\n    var _a;\n    var valueTransition = getValueTransition(transition, key) || {};\n    return (_a = valueTransition.delay) !== null && _a !== void 0 ? _a : 0;\n}\nfunction hydrateKeyframes(options) {\n    if (Array.isArray(options.to) && options.to[0] === null) {\n        options.to = __spreadArray([], __read(options.to));\n        options.to[0] = options.from;\n    }\n    return options;\n}\nfunction getPopmotionAnimationOptions(transition, options, key) {\n    var _a;\n    if (Array.isArray(options.to)) {\n        (_a = transition.duration) !== null && _a !== void 0 ? _a : (transition.duration = 0.8);\n    }\n    hydrateKeyframes(options);\n    /**\n     * Get a default transition if none is determined to be defined.\n     */\n    if (!isTransitionDefined(transition)) {\n        transition = __assign(__assign({}, transition), getDefaultTransition(key, options.to));\n    }\n    return __assign(__assign({}, options), convertTransitionToAnimationOptions(transition));\n}\n/**\n *\n */\nfunction getAnimation(key, value, target, transition, onComplete) {\n    var _a;\n    var valueTransition = getValueTransition(transition, key);\n    var origin = (_a = valueTransition.from) !== null && _a !== void 0 ? _a : value.get();\n    var isTargetAnimatable = isAnimatable(key, target);\n    if (origin === \"none\" && isTargetAnimatable && typeof target === \"string\") {\n        /**\n         * If we're trying to animate from \"none\", try and get an animatable version\n         * of the target. This could be improved to work both ways.\n         */\n        origin = getAnimatableNone(key, target);\n    }\n    else if (isZero(origin) && typeof target === \"string\") {\n        origin = getZeroUnit(target);\n    }\n    else if (!Array.isArray(target) &&\n        isZero(target) &&\n        typeof origin === \"string\") {\n        target = getZeroUnit(origin);\n    }\n    var isOriginAnimatable = isAnimatable(key, origin);\n    warning(isOriginAnimatable === isTargetAnimatable, \"You are trying to animate \" + key + \" from \\\"\" + origin + \"\\\" to \\\"\" + target + \"\\\". \" + origin + \" is not an animatable value - to enable this animation set \" + origin + \" to a value animatable to \" + target + \" via the `style` property.\");\n    function start() {\n        var options = {\n            from: origin,\n            to: target,\n            velocity: value.getVelocity(),\n            onComplete: onComplete,\n            onUpdate: function (v) { return value.set(v); },\n        };\n        return valueTransition.type === \"inertia\" ||\n            valueTransition.type === \"decay\"\n            ? inertia(__assign(__assign({}, options), valueTransition))\n            : animate(__assign(__assign({}, getPopmotionAnimationOptions(valueTransition, options, key)), { onUpdate: function (v) {\n                    var _a;\n                    options.onUpdate(v);\n                    (_a = valueTransition.onUpdate) === null || _a === void 0 ? void 0 : _a.call(valueTransition, v);\n                }, onComplete: function () {\n                    var _a;\n                    options.onComplete();\n                    (_a = valueTransition.onComplete) === null || _a === void 0 ? void 0 : _a.call(valueTransition);\n                } }));\n    }\n    function set() {\n        var _a;\n        value.set(target);\n        onComplete();\n        (_a = valueTransition === null || valueTransition === void 0 ? void 0 : valueTransition.onComplete) === null || _a === void 0 ? void 0 : _a.call(valueTransition);\n        return { stop: function () { } };\n    }\n    return !isOriginAnimatable ||\n        !isTargetAnimatable ||\n        valueTransition.type === false\n        ? set\n        : start;\n}\nfunction isZero(value) {\n    return (value === 0 ||\n        (typeof value === \"string\" &&\n            parseFloat(value) === 0 &&\n            value.indexOf(\" \") === -1));\n}\nfunction getZeroUnit(potentialUnitType) {\n    return typeof potentialUnitType === \"number\"\n        ? 0\n        : getAnimatableNone(\"\", potentialUnitType);\n}\nfunction getValueTransition(transition, key) {\n    return transition[key] || transition[\"default\"] || transition;\n}\n/**\n * Start animation on a MotionValue. This function is an interface between\n * Framer Motion and Popmotion\n *\n * @internal\n */\nfunction startAnimation(key, value, target, transition) {\n    if (transition === void 0) { transition = {}; }\n    return value.start(function (onComplete) {\n        var delayTimer;\n        var controls;\n        var animation = getAnimation(key, value, target, transition, onComplete);\n        var delay = getDelayFromTransition(transition, key);\n        var start = function () { return (controls = animation()); };\n        if (delay) {\n            delayTimer = setTimeout(start, secondsToMilliseconds(delay));\n        }\n        else {\n            start();\n        }\n        return function () {\n            clearTimeout(delayTimer);\n            controls === null || controls === void 0 ? void 0 : controls.stop();\n        };\n    });\n}\n\nexport { convertTransitionToAnimationOptions, getDelayFromTransition, getPopmotionAnimationOptions, getValueTransition, getZeroUnit, hydrateKeyframes, isTransitionDefined, isZero, startAnimation };\n","import { __assign } from 'tslib';\nimport { animate } from './index.js';\nimport { velocityPerSecond } from '../utils/velocity-per-second.js';\nimport { getFrameData } from 'framesync';\n\nfunction inertia(_a) {\n    var _b = _a.from, from = _b === void 0 ? 0 : _b, _c = _a.velocity, velocity = _c === void 0 ? 0 : _c, min = _a.min, max = _a.max, _d = _a.power, power = _d === void 0 ? 0.8 : _d, _e = _a.timeConstant, timeConstant = _e === void 0 ? 750 : _e, _f = _a.bounceStiffness, bounceStiffness = _f === void 0 ? 500 : _f, _g = _a.bounceDamping, bounceDamping = _g === void 0 ? 10 : _g, _h = _a.restDelta, restDelta = _h === void 0 ? 1 : _h, modifyTarget = _a.modifyTarget, driver = _a.driver, onUpdate = _a.onUpdate, onComplete = _a.onComplete;\n    var currentAnimation;\n    function isOutOfBounds(v) {\n        return (min !== undefined && v < min) || (max !== undefined && v > max);\n    }\n    function boundaryNearest(v) {\n        if (min === undefined)\n            return max;\n        if (max === undefined)\n            return min;\n        return Math.abs(min - v) < Math.abs(max - v) ? min : max;\n    }\n    function startAnimation(options) {\n        currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop();\n        currentAnimation = animate(__assign(__assign({}, options), { driver: driver, onUpdate: function (v) {\n                var _a;\n                onUpdate === null || onUpdate === void 0 ? void 0 : onUpdate(v);\n                (_a = options.onUpdate) === null || _a === void 0 ? void 0 : _a.call(options, v);\n            }, onComplete: onComplete }));\n    }\n    function startSpring(options) {\n        startAnimation(__assign({ type: \"spring\", stiffness: bounceStiffness, damping: bounceDamping, restDelta: restDelta }, options));\n    }\n    if (isOutOfBounds(from)) {\n        startSpring({ from: from, velocity: velocity, to: boundaryNearest(from) });\n    }\n    else {\n        var target = power * velocity + from;\n        if (typeof modifyTarget !== \"undefined\")\n            target = modifyTarget(target);\n        var boundary_1 = boundaryNearest(target);\n        var heading_1 = boundary_1 === min ? -1 : 1;\n        var prev_1;\n        var current_1;\n        var checkBoundary = function (v) {\n            prev_1 = current_1;\n            current_1 = v;\n            velocity = velocityPerSecond(v - prev_1, getFrameData().delta);\n            if ((heading_1 === 1 && v > boundary_1) ||\n                (heading_1 === -1 && v < boundary_1)) {\n                startSpring({ from: v, to: boundary_1, velocity: velocity });\n            }\n        };\n        startAnimation({\n            type: \"decay\",\n            from: from,\n            velocity: velocity,\n            timeConstant: timeConstant,\n            power: power,\n            restDelta: restDelta,\n            modifyTarget: modifyTarget,\n            onUpdate: isOutOfBounds(target) ? checkBoundary : undefined,\n        });\n    }\n    return {\n        stop: function () { return currentAnimation === null || currentAnimation === void 0 ? void 0 : currentAnimation.stop(); },\n    };\n}\n\nexport { inertia };\n","import { isTouchEvent } from '../gestures/utils/event-type.js';\n\n/**\n * Filters out events not attached to the primary pointer (currently left mouse button)\n * @param eventHandler\n */\nfunction filterPrimaryPointer(eventHandler) {\n    return function (event) {\n        var isMouseEvent = event instanceof MouseEvent;\n        var isPrimaryPointer = !isMouseEvent ||\n            (isMouseEvent && event.button === 0);\n        if (isPrimaryPointer) {\n            eventHandler(event);\n        }\n    };\n}\nvar defaultPagePoint = { pageX: 0, pageY: 0 };\nfunction pointFromTouch(e, pointType) {\n    if (pointType === void 0) { pointType = \"page\"; }\n    var primaryTouch = e.touches[0] || e.changedTouches[0];\n    var point = primaryTouch || defaultPagePoint;\n    return {\n        x: point[pointType + \"X\"],\n        y: point[pointType + \"Y\"],\n    };\n}\nfunction pointFromMouse(point, pointType) {\n    if (pointType === void 0) { pointType = \"page\"; }\n    return {\n        x: point[pointType + \"X\"],\n        y: point[pointType + \"Y\"],\n    };\n}\nfunction extractEventInfo(event, pointType) {\n    if (pointType === void 0) { pointType = \"page\"; }\n    return {\n        point: isTouchEvent(event)\n            ? pointFromTouch(event, pointType)\n            : pointFromMouse(event, pointType),\n    };\n}\nfunction getViewportPointFromEvent(event) {\n    return extractEventInfo(event, \"client\");\n}\nvar wrapHandler = function (handler, shouldFilterPrimaryPointer) {\n    if (shouldFilterPrimaryPointer === void 0) { shouldFilterPrimaryPointer = false; }\n    var listener = function (event) {\n        return handler(event, extractEventInfo(event));\n    };\n    return shouldFilterPrimaryPointer\n        ? filterPrimaryPointer(listener)\n        : listener;\n};\n\nexport { extractEventInfo, getViewportPointFromEvent, wrapHandler };\n","import { useEffect } from 'react';\n\nfunction addDomEvent(target, eventName, handler, options) {\n    target.addEventListener(eventName, handler, options);\n    return function () { return target.removeEventListener(eventName, handler, options); };\n}\n/**\n * Attaches an event listener directly to the provided DOM element.\n *\n * Bypassing React's event system can be desirable, for instance when attaching non-passive\n * event handlers.\n *\n * ```jsx\n * const ref = useRef(null)\n *\n * useDomEvent(ref, 'wheel', onWheel, { passive: false })\n *\n * return <div ref={ref} />\n * ```\n *\n * @param ref - React.RefObject that's been provided to the element you want to bind the listener to.\n * @param eventName - Name of the event you want listen for.\n * @param handler - Function to fire when receiving the event.\n * @param options - Options to pass to `Event.addEventListener`.\n *\n * @public\n */\nfunction useDomEvent(ref, eventName, handler, options) {\n    useEffect(function () {\n        var element = ref.current;\n        if (handler && element) {\n            return addDomEvent(element, eventName, handler, options);\n        }\n    }, [ref, eventName, handler, options]);\n}\n\nexport { addDomEvent, useDomEvent };\n","import { useDomEvent, addDomEvent } from './use-dom-event.js';\nimport { wrapHandler } from './event-info.js';\nimport { supportsPointerEvents, supportsTouchEvents, supportsMouseEvents } from './utils.js';\n\nvar mouseEventNames = {\n    pointerdown: \"mousedown\",\n    pointermove: \"mousemove\",\n    pointerup: \"mouseup\",\n    pointercancel: \"mousecancel\",\n    pointerover: \"mouseover\",\n    pointerout: \"mouseout\",\n    pointerenter: \"mouseenter\",\n    pointerleave: \"mouseleave\",\n};\nvar touchEventNames = {\n    pointerdown: \"touchstart\",\n    pointermove: \"touchmove\",\n    pointerup: \"touchend\",\n    pointercancel: \"touchcancel\",\n};\nfunction getPointerEventName(name) {\n    if (supportsPointerEvents()) {\n        return name;\n    }\n    else if (supportsTouchEvents()) {\n        return touchEventNames[name];\n    }\n    else if (supportsMouseEvents()) {\n        return mouseEventNames[name];\n    }\n    return name;\n}\nfunction addPointerEvent(target, eventName, handler, options) {\n    return addDomEvent(target, getPointerEventName(eventName), wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\nfunction usePointerEvent(ref, eventName, handler, options) {\n    return useDomEvent(ref, getPointerEventName(eventName), handler && wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\n\nexport { addPointerEvent, usePointerEvent };\n","import { isBrowser } from '../utils/is-browser.js';\n\n// We check for event support via functions in case they've been mocked by a testing suite.\nvar supportsPointerEvents = function () {\n    return isBrowser && window.onpointerdown === null;\n};\nvar supportsTouchEvents = function () {\n    return isBrowser && window.ontouchstart === null;\n};\nvar supportsMouseEvents = function () {\n    return isBrowser && window.onmousedown === null;\n};\n\nexport { supportsMouseEvents, supportsPointerEvents, supportsTouchEvents };\n","function createLock(name) {\n    var lock = null;\n    return function () {\n        var openLock = function () {\n            lock = null;\n        };\n        if (lock === null) {\n            lock = name;\n            return openLock;\n        }\n        return false;\n    };\n}\nvar globalHorizontalLock = createLock(\"dragHorizontal\");\nvar globalVerticalLock = createLock(\"dragVertical\");\nfunction getGlobalLock(drag) {\n    var lock = false;\n    if (drag === \"y\") {\n        lock = globalVerticalLock();\n    }\n    else if (drag === \"x\") {\n        lock = globalHorizontalLock();\n    }\n    else {\n        var openHorizontal_1 = globalHorizontalLock();\n        var openVertical_1 = globalVerticalLock();\n        if (openHorizontal_1 && openVertical_1) {\n            lock = function () {\n                openHorizontal_1();\n                openVertical_1();\n            };\n        }\n        else {\n            // Release the locks because we don't use them\n            if (openHorizontal_1)\n                openHorizontal_1();\n            if (openVertical_1)\n                openVertical_1();\n        }\n    }\n    return lock;\n}\nfunction isDragActive() {\n    // Check the gesture lock - if we get it, it means no drag gesture is active\n    // and we can safely fire the tap gesture.\n    var openGestureLock = getGlobalLock(true);\n    if (!openGestureLock)\n        return true;\n    openGestureLock();\n    return false;\n}\n\nexport { createLock, getGlobalLock, isDragActive };\n","function isMouseEvent(event) {\n    // PointerEvent inherits from MouseEvent so we can't use a straight instanceof check.\n    if (typeof PointerEvent !== \"undefined\" && event instanceof PointerEvent) {\n        return !!(event.pointerType === \"mouse\");\n    }\n    return event instanceof MouseEvent;\n}\nfunction isTouchEvent(event) {\n    var hasTouches = !!event.touches;\n    return hasTouches;\n}\n\nexport { isMouseEvent, isTouchEvent };\n","import { __read } from 'tslib';\nimport { useEffect, useContext } from 'react';\nimport { isAnimationControls } from '../../animation/utils/is-animation-controls.js';\nimport { usePresence } from '../../components/AnimatePresence/use-presence.js';\nimport { PresenceContext } from '../../context/PresenceContext.js';\nimport { createAnimationState } from '../../render/utils/animation-state.js';\nimport { AnimationType } from '../../render/utils/types.js';\nimport { makeRenderlessComponent } from '../utils/make-renderless-component.js';\n\nvar animations = {\n    animation: makeRenderlessComponent(function (_a) {\n        var visualElement = _a.visualElement, animate = _a.animate;\n        /**\n         * We dynamically generate the AnimationState manager as it contains a reference\n         * to the underlying animation library. We only want to load that if we load this,\n         * so people can optionally code split it out using the `m` component.\n         */\n        visualElement.animationState || (visualElement.animationState = createAnimationState(visualElement));\n        /**\n         * Subscribe any provided AnimationControls to the component's VisualElement\n         */\n        if (isAnimationControls(animate)) {\n            useEffect(function () { return animate.subscribe(visualElement); }, [animate]);\n        }\n    }),\n    exit: makeRenderlessComponent(function (props) {\n        var custom = props.custom, visualElement = props.visualElement;\n        var _a = __read(usePresence(), 2), isPresent = _a[0], onExitComplete = _a[1];\n        var presenceContext = useContext(PresenceContext);\n        useEffect(function () {\n            var _a, _b;\n            var animation = (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Exit, !isPresent, { custom: (_b = presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.custom) !== null && _b !== void 0 ? _b : custom });\n            !isPresent && (animation === null || animation === void 0 ? void 0 : animation.then(onExitComplete));\n        }, [isPresent]);\n    }),\n};\n\nexport { animations };\n","import { isMouseEvent } from './utils/event-type.js';\nimport { AnimationType } from '../render/utils/types.js';\nimport { usePointerEvent } from '../events/use-pointer-event.js';\nimport { isDragActive } from './drag/utils/lock.js';\n\nfunction createHoverEvent(visualElement, isActive, callback) {\n    return function (event, info) {\n        var _a;\n        if (!isMouseEvent(event) ||\n            !visualElement.isHoverEventsEnabled ||\n            isDragActive()) {\n            return;\n        }\n        callback === null || callback === void 0 ? void 0 : callback(event, info);\n        (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Hover, isActive);\n    };\n}\nfunction useHoverGesture(_a) {\n    var onHoverStart = _a.onHoverStart, onHoverEnd = _a.onHoverEnd, whileHover = _a.whileHover, visualElement = _a.visualElement;\n    usePointerEvent(visualElement, \"pointerenter\", onHoverStart || whileHover\n        ? createHoverEvent(visualElement, true, onHoverStart)\n        : undefined);\n    usePointerEvent(visualElement, \"pointerleave\", onHoverEnd || whileHover\n        ? createHoverEvent(visualElement, false, onHoverEnd)\n        : undefined);\n}\n\nexport { useHoverGesture };\n","/**\n * Recursively traverse up the tree to check whether the provided child node\n * is the parent or a descendant of it.\n *\n * @param parent - Element to find\n * @param child - Element to test against parent\n */\nvar isNodeOrChild = function (parent, child) {\n    if (!child) {\n        return false;\n    }\n    else if (parent === child) {\n        return true;\n    }\n    else {\n        return isNodeOrChild(parent, child.parentElement);\n    }\n};\n\nexport { isNodeOrChild };\n","import { useFocusGesture } from '../../gestures/use-focus-gesture.js';\nimport { useHoverGesture } from '../../gestures/use-hover-gesture.js';\nimport { useTapGesture } from '../../gestures/use-tap-gesture.js';\nimport { makeRenderlessComponent } from '../utils/make-renderless-component.js';\n\nvar gestureAnimations = {\n    tap: makeRenderlessComponent(useTapGesture),\n    focus: makeRenderlessComponent(useFocusGesture),\n    hover: makeRenderlessComponent(useHoverGesture),\n};\n\nexport { gestureAnimations };\n","import { useRef } from 'react';\nimport { isNodeOrChild } from './utils/is-node-or-child.js';\nimport { usePointerEvent, addPointerEvent } from '../events/use-pointer-event.js';\nimport { useUnmountEffect } from '../utils/use-unmount-effect.js';\nimport { pipe } from 'popmotion';\nimport { AnimationType } from '../render/utils/types.js';\nimport { isDragActive } from './drag/utils/lock.js';\n\n/**\n * @param handlers -\n * @internal\n */\nfunction useTapGesture(_a) {\n    var onTap = _a.onTap, onTapStart = _a.onTapStart, onTapCancel = _a.onTapCancel, whileTap = _a.whileTap, visualElement = _a.visualElement;\n    var hasPressListeners = onTap || onTapStart || onTapCancel || whileTap;\n    var isPressing = useRef(false);\n    var cancelPointerEndListeners = useRef(null);\n    function removePointerEndListener() {\n        var _a;\n        (_a = cancelPointerEndListeners.current) === null || _a === void 0 ? void 0 : _a.call(cancelPointerEndListeners);\n        cancelPointerEndListeners.current = null;\n    }\n    function checkPointerEnd() {\n        var _a;\n        removePointerEndListener();\n        isPressing.current = false;\n        (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Tap, false);\n        return !isDragActive();\n    }\n    function onPointerUp(event, info) {\n        if (!checkPointerEnd())\n            return;\n        /**\n         * We only count this as a tap gesture if the event.target is the same\n         * as, or a child of, this component's element\n         */\n        !isNodeOrChild(visualElement.getInstance(), event.target)\n            ? onTapCancel === null || onTapCancel === void 0 ? void 0 : onTapCancel(event, info)\n            : onTap === null || onTap === void 0 ? void 0 : onTap(event, info);\n    }\n    function onPointerCancel(event, info) {\n        if (!checkPointerEnd())\n            return;\n        onTapCancel === null || onTapCancel === void 0 ? void 0 : onTapCancel(event, info);\n    }\n    function onPointerDown(event, info) {\n        var _a;\n        removePointerEndListener();\n        if (isPressing.current)\n            return;\n        isPressing.current = true;\n        cancelPointerEndListeners.current = pipe(addPointerEvent(window, \"pointerup\", onPointerUp), addPointerEvent(window, \"pointercancel\", onPointerCancel));\n        onTapStart === null || onTapStart === void 0 ? void 0 : onTapStart(event, info);\n        (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Tap, true);\n    }\n    usePointerEvent(visualElement, \"pointerdown\", hasPressListeners ? onPointerDown : undefined);\n    useUnmountEffect(removePointerEndListener);\n}\n\nexport { useTapGesture };\n","import { AnimationType } from '../render/utils/types.js';\nimport { useDomEvent } from '../events/use-dom-event.js';\n\n/**\n *\n * @param props\n * @param ref\n * @internal\n */\nfunction useFocusGesture(_a) {\n    var whileFocus = _a.whileFocus, visualElement = _a.visualElement;\n    var onFocus = function () {\n        var _a;\n        (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Focus, true);\n    };\n    var onBlur = function () {\n        var _a;\n        (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Focus, false);\n    };\n    useDomEvent(visualElement, \"focus\", whileFocus ? onFocus : undefined);\n    useDomEvent(visualElement, \"blur\", whileFocus ? onBlur : undefined);\n}\n\nexport { useFocusGesture };\n","import { mix } from 'popmotion';\n\nfunction tweenAxis(target, prev, next, p) {\n    target.min = mix(prev.min, next.min, p);\n    target.max = mix(prev.max, next.max, p);\n}\nfunction calcRelativeOffsetAxis(parent, child) {\n    return {\n        min: child.min - parent.min,\n        max: child.max - parent.min,\n    };\n}\nfunction calcRelativeOffset(parent, child) {\n    return {\n        x: calcRelativeOffsetAxis(parent.x, child.x),\n        y: calcRelativeOffsetAxis(parent.y, child.y),\n    };\n}\nfunction checkIfParentHasChanged(prev, next) {\n    var prevId = prev.getLayoutId();\n    var nextId = next.getLayoutId();\n    return prevId !== nextId || (nextId === undefined && prev !== next);\n}\n\nexport { calcRelativeOffset, calcRelativeOffsetAxis, checkIfParentHasChanged, tweenAxis };\n","var makeRenderlessComponent = function (hook) { return function (props) {\n    hook(props);\n    return null;\n}; };\n\nexport { makeRenderlessComponent };\n","import { axisBox, delta } from '../../utils/geometry/index.js';\n\nvar createProjectionState = function () { return ({\n    isEnabled: false,\n    isTargetLocked: false,\n    target: axisBox(),\n    targetFinal: axisBox(),\n}); };\nfunction createLayoutState() {\n    return {\n        isHydrated: false,\n        layout: axisBox(),\n        layoutCorrected: axisBox(),\n        treeScale: { x: 1, y: 1 },\n        delta: delta(),\n        deltaFinal: delta(),\n        deltaTransform: \"\",\n    };\n}\nvar zeroLayout = createLayoutState();\n\nexport { createLayoutState, createProjectionState, zeroLayout };\n","import { zeroLayout } from '../../utils/state.js';\n\n/**\n * Build a transform style that takes a calculated delta between the element's current\n * space on screen and projects it into the desired space.\n */\nfunction buildLayoutProjectionTransform(_a, treeScale, latestTransform) {\n    var x = _a.x, y = _a.y;\n    /**\n     * The translations we use to calculate are always relative to the viewport coordinate space.\n     * But when we apply scales, we also scale the coordinate space of an element and its children.\n     * For instance if we have a treeScale (the culmination of all parent scales) of 0.5 and we need\n     * to move an element 100 pixels, we actually need to move it 200 in within that scaled space.\n     */\n    var xTranslate = x.translate / treeScale.x;\n    var yTranslate = y.translate / treeScale.y;\n    var transform = \"translate3d(\" + xTranslate + \"px, \" + yTranslate + \"px, 0) \";\n    if (latestTransform) {\n        var rotate = latestTransform.rotate, rotateX = latestTransform.rotateX, rotateY = latestTransform.rotateY;\n        if (rotate)\n            transform += \"rotate(\" + rotate + \") \";\n        if (rotateX)\n            transform += \"rotateX(\" + rotateX + \") \";\n        if (rotateY)\n            transform += \"rotateY(\" + rotateY + \") \";\n    }\n    transform += \"scale(\" + x.scale + \", \" + y.scale + \")\";\n    return !latestTransform && transform === identityProjection ? \"\" : transform;\n}\n/**\n * Take the calculated delta origin and apply it as a transform string.\n */\nfunction buildLayoutProjectionTransformOrigin(_a) {\n    var deltaFinal = _a.deltaFinal;\n    return deltaFinal.x.origin * 100 + \"% \" + deltaFinal.y.origin * 100 + \"% 0\";\n}\nvar identityProjection = buildLayoutProjectionTransform(zeroLayout.delta, zeroLayout.treeScale, { x: 1, y: 1 });\n\nexport { buildLayoutProjectionTransform, buildLayoutProjectionTransformOrigin, identityProjection };\n","import { __spreadArray, __read } from 'tslib';\nimport { SubscriptionManager } from '../../utils/subscription-manager.js';\n\nvar names = [\n    \"LayoutMeasure\",\n    \"BeforeLayoutMeasure\",\n    \"LayoutUpdate\",\n    \"ViewportBoxUpdate\",\n    \"Update\",\n    \"Render\",\n    \"AnimationComplete\",\n    \"LayoutAnimationComplete\",\n    \"AnimationStart\",\n    \"SetAxisTarget\",\n    \"Unmount\",\n];\nfunction createLifecycles() {\n    var managers = names.map(function () { return new SubscriptionManager(); });\n    var propSubscriptions = {};\n    var lifecycles = {\n        clearAllListeners: function () { return managers.forEach(function (manager) { return manager.clear(); }); },\n        updatePropListeners: function (props) {\n            return names.forEach(function (name) {\n                var _a;\n                (_a = propSubscriptions[name]) === null || _a === void 0 ? void 0 : _a.call(propSubscriptions);\n                var on = \"on\" + name;\n                var propListener = props[on];\n                if (propListener) {\n                    propSubscriptions[name] = lifecycles[on](propListener);\n                }\n            });\n        },\n    };\n    managers.forEach(function (manager, i) {\n        lifecycles[\"on\" + names[i]] = function (handler) { return manager.add(handler); };\n        lifecycles[\"notify\" + names[i]] = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return manager.notify.apply(manager, __spreadArray([], __read(args)));\n        };\n    });\n    return lifecycles;\n}\n\nexport { createLifecycles };\n","import { addUniqueItem, removeItem } from '../../utils/array.js';\nimport { compareByDepth } from './compare-by-depth.js';\n\nvar FlatTree = /** @class */ (function () {\n    function FlatTree() {\n        this.children = [];\n        this.isDirty = false;\n    }\n    FlatTree.prototype.add = function (child) {\n        addUniqueItem(this.children, child);\n        this.isDirty = true;\n    };\n    FlatTree.prototype.remove = function (child) {\n        removeItem(this.children, child);\n        this.isDirty = true;\n    };\n    FlatTree.prototype.forEach = function (callback) {\n        this.isDirty && this.children.sort(compareByDepth);\n        this.isDirty = false;\n        this.children.forEach(callback);\n    };\n    return FlatTree;\n}());\n\nexport { FlatTree };\n","import { __assign, __spreadArray, __read } from 'tslib';\nimport sync, { cancelSync } from 'framesync';\nimport { pipe } from 'popmotion';\nimport { Presence } from '../components/AnimateSharedLayout/types.js';\nimport { eachAxis } from '../utils/each-axis.js';\nimport { axisBox } from '../utils/geometry/index.js';\nimport { removeBoxTransforms, applyBoxTransforms } from '../utils/geometry/delta-apply.js';\nimport { calcRelativeBox, updateBoxDelta } from '../utils/geometry/delta-calc.js';\nimport { motionValue } from '../value/index.js';\nimport { isMotionValue } from '../value/utils/is-motion-value.js';\nimport { buildLayoutProjectionTransform } from './html/utils/build-projection-transform.js';\nimport { variantPriorityOrder } from './utils/animation-state.js';\nimport { createLifecycles } from './utils/lifecycles.js';\nimport { updateMotionValuesFromProps } from './utils/motion-values.js';\nimport { updateLayoutDeltas } from './utils/projection.js';\nimport { createLayoutState, createProjectionState } from './utils/state.js';\nimport { FlatTree } from './utils/flat-tree.js';\nimport { checkIfControllingVariants, checkIfVariantNode, isVariantLabel } from './utils/variants.js';\nimport { setCurrentViewportBox } from './dom/projection/relative-set.js';\nimport { isDraggable } from './utils/is-draggable.js';\n\nvar visualElement = function (_a) {\n    var _b = _a.treeType, treeType = _b === void 0 ? \"\" : _b, build = _a.build, getBaseTarget = _a.getBaseTarget, makeTargetAnimatable = _a.makeTargetAnimatable, measureViewportBox = _a.measureViewportBox, renderInstance = _a.render, readValueFromInstance = _a.readValueFromInstance, resetTransform = _a.resetTransform, restoreTransform = _a.restoreTransform, removeValueFromRenderState = _a.removeValueFromRenderState, sortNodePosition = _a.sortNodePosition, scrapeMotionValuesFromProps = _a.scrapeMotionValuesFromProps;\n    return function (_a, options) {\n        var parent = _a.parent, props = _a.props, presenceId = _a.presenceId, blockInitialAnimation = _a.blockInitialAnimation, visualState = _a.visualState;\n        if (options === void 0) { options = {}; }\n        var latestValues = visualState.latestValues, renderState = visualState.renderState;\n        /**\n         * The instance of the render-specific node that will be hydrated by the\n         * exposed React ref. So for example, this visual element can host a\n         * HTMLElement, plain object, or Three.js object. The functions provided\n         * in VisualElementConfig allow us to interface with this instance.\n         */\n        var instance;\n        /**\n         * Manages the subscriptions for a visual element's lifecycle, for instance\n         * onRender and onViewportBoxUpdate.\n         */\n        var lifecycles = createLifecycles();\n        /**\n         *\n         */\n        var projection = createProjectionState();\n        /**\n         * A reference to the nearest projecting parent. This is either\n         * undefined if we haven't looked for the nearest projecting parent,\n         * false if there is no parent performing layout projection, or a reference\n         * to the projecting parent.\n         */\n        var projectionParent;\n        /**\n         * This is a reference to the visual state of the \"lead\" visual element.\n         * Usually, this will be this visual element. But if it shares a layoutId\n         * with other visual elements, only one of them will be designated lead by\n         * AnimateSharedLayout. All the other visual elements will take on the visual\n         * appearance of the lead while they crossfade to it.\n         */\n        var leadProjection = projection;\n        var leadLatestValues = latestValues;\n        var unsubscribeFromLeadVisualElement;\n        /**\n         * The latest layout measurements and calculated projections. This\n         * is seperate from the target projection data in visualState as\n         * many visual elements might point to the same piece of visualState as\n         * a target, whereas they might each have different layouts and thus\n         * projection calculations needed to project into the same viewport box.\n         */\n        var layoutState = createLayoutState();\n        /**\n         *\n         */\n        var crossfader;\n        /**\n         * Keep track of whether the viewport box has been updated since the\n         * last time the layout projection was re-calculated.\n         */\n        var hasViewportBoxUpdated = false;\n        /**\n         * A map of all motion values attached to this visual element. Motion\n         * values are source of truth for any given animated value. A motion\n         * value might be provided externally by the component via props.\n         */\n        var values = new Map();\n        /**\n         * A map of every subscription that binds the provided or generated\n         * motion values onChange listeners to this visual element.\n         */\n        var valueSubscriptions = new Map();\n        /**\n         * A reference to the previously-provided motion values as returned\n         * from scrapeMotionValuesFromProps. We use the keys in here to determine\n         * if any motion values need to be removed after props are updated.\n         */\n        var prevMotionValues = {};\n        /**\n         * x/y motion values that track the progress of initiated layout\n         * animations.\n         *\n         * TODO: Target for removal\n         */\n        var projectionTargetProgress;\n        /**\n         * When values are removed from all animation props we need to search\n         * for a fallback value to animate to. These values are tracked in baseTarget.\n         */\n        var baseTarget = __assign({}, latestValues);\n        // Internal methods ========================\n        /**\n         * On mount, this will be hydrated with a callback to disconnect\n         * this visual element from its parent on unmount.\n         */\n        var removeFromVariantTree;\n        /**\n         *\n         */\n        function render() {\n            if (!instance)\n                return;\n            if (element.isProjectionReady()) {\n                /**\n                 * Apply the latest user-set transforms to the targetBox to produce the targetBoxFinal.\n                 * This is the final box that we will then project into by calculating a transform delta and\n                 * applying it to the corrected box.\n                 */\n                applyBoxTransforms(leadProjection.targetFinal, leadProjection.target, leadLatestValues);\n                /**\n                 * Update the delta between the corrected box and the final target box, after\n                 * user-set transforms are applied to it. This will be used by the renderer to\n                 * create a transform style that will reproject the element from its actual layout\n                 * into the desired bounding box.\n                 */\n                updateBoxDelta(layoutState.deltaFinal, layoutState.layoutCorrected, leadProjection.targetFinal, latestValues);\n            }\n            triggerBuild();\n            renderInstance(instance, renderState);\n        }\n        function triggerBuild() {\n            var valuesToRender = latestValues;\n            if (crossfader && crossfader.isActive()) {\n                var crossfadedValues = crossfader.getCrossfadeState(element);\n                if (crossfadedValues)\n                    valuesToRender = crossfadedValues;\n            }\n            build(element, renderState, valuesToRender, leadProjection, layoutState, options, props);\n        }\n        function update() {\n            lifecycles.notifyUpdate(latestValues);\n        }\n        function updateLayoutProjection() {\n            var delta = layoutState.delta, treeScale = layoutState.treeScale;\n            var prevTreeScaleX = treeScale.x;\n            var prevTreeScaleY = treeScale.x;\n            var prevDeltaTransform = layoutState.deltaTransform;\n            updateLayoutDeltas(layoutState, leadProjection, element.path, latestValues);\n            hasViewportBoxUpdated &&\n                element.notifyViewportBoxUpdate(leadProjection.target, delta);\n            hasViewportBoxUpdated = false;\n            var deltaTransform = buildLayoutProjectionTransform(delta, treeScale);\n            if (deltaTransform !== prevDeltaTransform ||\n                // Also compare calculated treeScale, for values that rely on this only for scale correction\n                prevTreeScaleX !== treeScale.x ||\n                prevTreeScaleY !== treeScale.y) {\n                element.scheduleRender();\n            }\n            layoutState.deltaTransform = deltaTransform;\n        }\n        function updateTreeLayoutProjection() {\n            element.layoutTree.forEach(fireUpdateLayoutProjection);\n        }\n        /**\n         *\n         */\n        function bindToMotionValue(key, value) {\n            var removeOnChange = value.onChange(function (latestValue) {\n                latestValues[key] = latestValue;\n                props.onUpdate && sync.update(update, false, true);\n            });\n            var removeOnRenderRequest = value.onRenderRequest(element.scheduleRender);\n            valueSubscriptions.set(key, function () {\n                removeOnChange();\n                removeOnRenderRequest();\n            });\n        }\n        /**\n         * Any motion values that are provided to the element when created\n         * aren't yet bound to the element, as this would technically be impure.\n         * However, we iterate through the motion values and set them to the\n         * initial values for this component.\n         *\n         * TODO: This is impure and we should look at changing this to run on mount.\n         * Doing so will break some tests but this isn't neccessarily a breaking change,\n         * more a reflection of the test.\n         */\n        var initialMotionValues = scrapeMotionValuesFromProps(props);\n        for (var key in initialMotionValues) {\n            var value = initialMotionValues[key];\n            if (latestValues[key] !== undefined && isMotionValue(value)) {\n                value.set(latestValues[key], false);\n            }\n        }\n        /**\n         * Determine what role this visual element should take in the variant tree.\n         */\n        var isControllingVariants = checkIfControllingVariants(props);\n        var isVariantNode = checkIfVariantNode(props);\n        var element = __assign(__assign({ treeType: treeType, \n            /**\n             * This is a mirror of the internal instance prop, which keeps\n             * VisualElement type-compatible with React's RefObject.\n             */\n            current: null, \n            /**\n             * The depth of this visual element within the visual element tree.\n             */\n            depth: parent ? parent.depth + 1 : 0, parent: parent, children: new Set(), \n            /**\n             * An ancestor path back to the root visual element. This is used\n             * by layout projection to quickly recurse back up the tree.\n             */\n            path: parent ? __spreadArray(__spreadArray([], __read(parent.path)), [parent]) : [], layoutTree: parent ? parent.layoutTree : new FlatTree(), \n            /**\n             *\n             */\n            presenceId: presenceId,\n            projection: projection, \n            /**\n             * If this component is part of the variant tree, it should track\n             * any children that are also part of the tree. This is essentially\n             * a shadow tree to simplify logic around how to stagger over children.\n             */\n            variantChildren: isVariantNode ? new Set() : undefined, \n            /**\n             * Whether this instance is visible. This can be changed imperatively\n             * by AnimateSharedLayout, is analogous to CSS's visibility in that\n             * hidden elements should take up layout, and needs enacting by the configured\n             * render function.\n             */\n            isVisible: undefined, \n            /**\n             * Normally, if a component is controlled by a parent's variants, it can\n             * rely on that ancestor to trigger animations further down the tree.\n             * However, if a component is created after its parent is mounted, the parent\n             * won't trigger that mount animation so the child needs to.\n             *\n             * TODO: This might be better replaced with a method isParentMounted\n             */\n            manuallyAnimateOnMount: Boolean(parent === null || parent === void 0 ? void 0 : parent.isMounted()), \n            /**\n             * This can be set by AnimatePresence to force components that mount\n             * at the same time as it to mount as if they have initial={false} set.\n             */\n            blockInitialAnimation: blockInitialAnimation, \n            /**\n             * A boolean that can be used to determine whether to respect hover events.\n             * For layout measurements we often have to reposition the instance by\n             * removing its transform. This can trigger hover events, which is\n             * undesired.\n             */\n            isHoverEventsEnabled: true, \n            /**\n             * Determine whether this component has mounted yet. This is mostly used\n             * by variant children to determine whether they need to trigger their\n             * own animations on mount.\n             */\n            isMounted: function () { return Boolean(instance); }, mount: function (newInstance) {\n                instance = element.current = newInstance;\n                element.pointTo(element);\n                if (isVariantNode && parent && !isControllingVariants) {\n                    removeFromVariantTree = parent === null || parent === void 0 ? void 0 : parent.addVariantChild(element);\n                }\n                parent === null || parent === void 0 ? void 0 : parent.children.add(element);\n            },\n            /**\n             *\n             */\n            unmount: function () {\n                cancelSync.update(update);\n                cancelSync.render(render);\n                cancelSync.preRender(element.updateLayoutProjection);\n                valueSubscriptions.forEach(function (remove) { return remove(); });\n                element.stopLayoutAnimation();\n                element.layoutTree.remove(element);\n                removeFromVariantTree === null || removeFromVariantTree === void 0 ? void 0 : removeFromVariantTree();\n                parent === null || parent === void 0 ? void 0 : parent.children.delete(element);\n                unsubscribeFromLeadVisualElement === null || unsubscribeFromLeadVisualElement === void 0 ? void 0 : unsubscribeFromLeadVisualElement();\n                lifecycles.clearAllListeners();\n            },\n            /**\n             * Add a child visual element to our set of children.\n             */\n            addVariantChild: function (child) {\n                var _a;\n                var closestVariantNode = element.getClosestVariantNode();\n                if (closestVariantNode) {\n                    (_a = closestVariantNode.variantChildren) === null || _a === void 0 ? void 0 : _a.add(child);\n                    return function () { return closestVariantNode.variantChildren.delete(child); };\n                }\n            },\n            sortNodePosition: function (other) {\n                /**\n                 * If these nodes aren't even of the same type we can't compare their depth.\n                 */\n                if (!sortNodePosition || treeType !== other.treeType)\n                    return 0;\n                return sortNodePosition(element.getInstance(), other.getInstance());\n            }, \n            /**\n             * Returns the closest variant node in the tree starting from\n             * this visual element.\n             */\n            getClosestVariantNode: function () {\n                return isVariantNode ? element : parent === null || parent === void 0 ? void 0 : parent.getClosestVariantNode();\n            }, \n            /**\n             * A method that schedules an update to layout projections throughout\n             * the tree. We inherit from the parent so there's only ever one\n             * job scheduled on the next frame - that of the root visual element.\n             */\n            scheduleUpdateLayoutProjection: parent\n                ? parent.scheduleUpdateLayoutProjection\n                : function () {\n                    return sync.preRender(element.updateTreeLayoutProjection, false, true);\n                }, \n            /**\n             * Expose the latest layoutId prop.\n             */\n            getLayoutId: function () { return props.layoutId; }, \n            /**\n             * Returns the current instance.\n             */\n            getInstance: function () { return instance; }, \n            /**\n             * Get/set the latest static values.\n             */\n            getStaticValue: function (key) { return latestValues[key]; }, setStaticValue: function (key, value) { return (latestValues[key] = value); }, \n            /**\n             * Returns the latest motion value state. Currently only used to take\n             * a snapshot of the visual element - perhaps this can return the whole\n             * visual state\n             */\n            getLatestValues: function () { return latestValues; }, \n            /**\n             * Set the visiblity of the visual element. If it's changed, schedule\n             * a render to reflect these changes.\n             */\n            setVisibility: function (visibility) {\n                if (element.isVisible === visibility)\n                    return;\n                element.isVisible = visibility;\n                element.scheduleRender();\n            },\n            /**\n             * Make a target animatable by Popmotion. For instance, if we're\n             * trying to animate width from 100px to 100vw we need to measure 100vw\n             * in pixels to determine what we really need to animate to. This is also\n             * pluggable to support Framer's custom value types like Color,\n             * and CSS variables.\n             */\n            makeTargetAnimatable: function (target, canMutate) {\n                if (canMutate === void 0) { canMutate = true; }\n                return makeTargetAnimatable(element, target, props, canMutate);\n            },\n            /**\n             * Temporarily suspend hover events while we remove transforms in order to measure the layout.\n             *\n             * This seems like an odd bit of scheduling but what we're doing is saying after\n             * the next render, wait 10 milliseconds before reenabling hover events. Waiting until\n             * the next frame results in missed, valid hover events. But triggering on the postRender\n             * frame is too soon to avoid triggering events with layout measurements.\n             *\n             * Note: If we figure out a way of measuring layout while transforms remain applied, this can be removed.\n             */\n            suspendHoverEvents: function () {\n                element.isHoverEventsEnabled = false;\n                sync.postRender(function () {\n                    return setTimeout(function () { return (element.isHoverEventsEnabled = true); }, 10);\n                });\n            },\n            // Motion values ========================\n            /**\n             * Add a motion value and bind it to this visual element.\n             */\n            addValue: function (key, value) {\n                // Remove existing value if it exists\n                if (element.hasValue(key))\n                    element.removeValue(key);\n                values.set(key, value);\n                latestValues[key] = value.get();\n                bindToMotionValue(key, value);\n            },\n            /**\n             * Remove a motion value and unbind any active subscriptions.\n             */\n            removeValue: function (key) {\n                var _a;\n                values.delete(key);\n                (_a = valueSubscriptions.get(key)) === null || _a === void 0 ? void 0 : _a();\n                valueSubscriptions.delete(key);\n                delete latestValues[key];\n                removeValueFromRenderState(key, renderState);\n            }, \n            /**\n             * Check whether we have a motion value for this key\n             */\n            hasValue: function (key) { return values.has(key); }, \n            /**\n             * Get a motion value for this key. If called with a default\n             * value, we'll create one if none exists.\n             */\n            getValue: function (key, defaultValue) {\n                var value = values.get(key);\n                if (value === undefined && defaultValue !== undefined) {\n                    value = motionValue(defaultValue);\n                    element.addValue(key, value);\n                }\n                return value;\n            }, \n            /**\n             * Iterate over our motion values.\n             */\n            forEachValue: function (callback) { return values.forEach(callback); }, \n            /**\n             * If we're trying to animate to a previously unencountered value,\n             * we need to check for it in our state and as a last resort read it\n             * directly from the instance (which might have performance implications).\n             */\n            readValue: function (key) { var _a; return (_a = latestValues[key]) !== null && _a !== void 0 ? _a : readValueFromInstance(instance, key, options); }, \n            /**\n             * Set the base target to later animate back to. This is currently\n             * only hydrated on creation and when we first read a value.\n             */\n            setBaseTarget: function (key, value) {\n                baseTarget[key] = value;\n            },\n            /**\n             * Find the base target for a value thats been removed from all animation\n             * props.\n             */\n            getBaseTarget: function (key) {\n                if (getBaseTarget) {\n                    var target = getBaseTarget(props, key);\n                    if (target !== undefined && !isMotionValue(target))\n                        return target;\n                }\n                return baseTarget[key];\n            } }, lifecycles), { \n            /**\n             * Build the renderer state based on the latest visual state.\n             */\n            build: function () {\n                triggerBuild();\n                return renderState;\n            },\n            /**\n             * Schedule a render on the next animation frame.\n             */\n            scheduleRender: function () {\n                sync.render(render, false, true);\n            }, \n            /**\n             * Synchronously fire render. It's prefered that we batch renders but\n             * in many circumstances, like layout measurement, we need to run this\n             * synchronously. However in those instances other measures should be taken\n             * to batch reads/writes.\n             */\n            syncRender: render, \n            /**\n             * Update the provided props. Ensure any newly-added motion values are\n             * added to our map, old ones removed, and listeners updated.\n             */\n            setProps: function (newProps) {\n                props = newProps;\n                lifecycles.updatePropListeners(newProps);\n                prevMotionValues = updateMotionValuesFromProps(element, scrapeMotionValuesFromProps(props), prevMotionValues);\n            }, getProps: function () { return props; }, \n            // Variants ==============================\n            /**\n             * Returns the variant definition with a given name.\n             */\n            getVariant: function (name) { var _a; return (_a = props.variants) === null || _a === void 0 ? void 0 : _a[name]; }, \n            /**\n             * Returns the defined default transition on this component.\n             */\n            getDefaultTransition: function () { return props.transition; }, \n            /**\n             * Used by child variant nodes to get the closest ancestor variant props.\n             */\n            getVariantContext: function (startAtParent) {\n                if (startAtParent === void 0) { startAtParent = false; }\n                if (startAtParent)\n                    return parent === null || parent === void 0 ? void 0 : parent.getVariantContext();\n                if (!isControllingVariants) {\n                    var context_1 = (parent === null || parent === void 0 ? void 0 : parent.getVariantContext()) || {};\n                    if (props.initial !== undefined) {\n                        context_1.initial = props.initial;\n                    }\n                    return context_1;\n                }\n                var context = {};\n                for (var i = 0; i < numVariantProps; i++) {\n                    var name_1 = variantProps[i];\n                    var prop = props[name_1];\n                    if (isVariantLabel(prop) || prop === false) {\n                        context[name_1] = prop;\n                    }\n                }\n                return context;\n            },\n            // Layout projection ==============================\n            /**\n             * Enable layout projection for this visual element. Won't actually\n             * occur until we also have hydrated layout measurements.\n             */\n            enableLayoutProjection: function () {\n                projection.isEnabled = true;\n                element.layoutTree.add(element);\n            },\n            /**\n             * Lock the projection target, for instance when dragging, so\n             * nothing else can try and animate it.\n             */\n            lockProjectionTarget: function () {\n                projection.isTargetLocked = true;\n            },\n            unlockProjectionTarget: function () {\n                element.stopLayoutAnimation();\n                projection.isTargetLocked = false;\n            }, getLayoutState: function () { return layoutState; }, setCrossfader: function (newCrossfader) {\n                crossfader = newCrossfader;\n            }, isProjectionReady: function () { return projection.isEnabled && layoutState.isHydrated; }, \n            /**\n             * Start a layout animation on a given axis.\n             */\n            startLayoutAnimation: function (axis, transition, isRelative) {\n                if (isRelative === void 0) { isRelative = false; }\n                var progress = element.getProjectionAnimationProgress()[axis];\n                var _a = isRelative\n                    ? projection.relativeTarget[axis]\n                    : projection.target[axis], min = _a.min, max = _a.max;\n                var length = max - min;\n                progress.clearListeners();\n                progress.set(min);\n                progress.set(min); // Set twice to hard-reset velocity\n                progress.onChange(function (v) {\n                    element.setProjectionTargetAxis(axis, v, v + length, isRelative);\n                });\n                return element.animateMotionValue(axis, progress, 0, transition);\n            },\n            /**\n             * Stop layout animations.\n             */\n            stopLayoutAnimation: function () {\n                eachAxis(function (axis) {\n                    return element.getProjectionAnimationProgress()[axis].stop();\n                });\n            },\n            /**\n             * Measure the current viewport box with or without transforms.\n             * Only measures axis-aligned boxes, rotate and skew must be manually\n             * removed with a re-render to work.\n             */\n            measureViewportBox: function (withTransform) {\n                if (withTransform === void 0) { withTransform = true; }\n                var viewportBox = measureViewportBox(instance, options);\n                if (!withTransform)\n                    removeBoxTransforms(viewportBox, latestValues);\n                return viewportBox;\n            },\n            /**\n             * Get the motion values tracking the layout animations on each\n             * axis. Lazy init if not already created.\n             */\n            getProjectionAnimationProgress: function () {\n                projectionTargetProgress || (projectionTargetProgress = {\n                    x: motionValue(0),\n                    y: motionValue(0),\n                });\n                return projectionTargetProgress;\n            },\n            /**\n             * Update the projection of a single axis. Schedule an update to\n             * the tree layout projection.\n             */\n            setProjectionTargetAxis: function (axis, min, max, isRelative) {\n                if (isRelative === void 0) { isRelative = false; }\n                var target;\n                if (isRelative) {\n                    if (!projection.relativeTarget) {\n                        projection.relativeTarget = axisBox();\n                    }\n                    target = projection.relativeTarget[axis];\n                }\n                else {\n                    projection.relativeTarget = undefined;\n                    target = projection.target[axis];\n                }\n                target.min = min;\n                target.max = max;\n                // Flag that we want to fire the onViewportBoxUpdate event handler\n                hasViewportBoxUpdated = true;\n                lifecycles.notifySetAxisTarget();\n            },\n            /**\n             * Rebase the projection target on top of the provided viewport box\n             * or the measured layout. This ensures that non-animating elements\n             * don't fall out of sync differences in measurements vs projections\n             * after a page scroll or other relayout.\n             */\n            rebaseProjectionTarget: function (force, box) {\n                if (box === void 0) { box = layoutState.layout; }\n                var _a = element.getProjectionAnimationProgress(), x = _a.x, y = _a.y;\n                var shouldRebase = !projection.relativeTarget &&\n                    !projection.isTargetLocked &&\n                    !x.isAnimating() &&\n                    !y.isAnimating();\n                if (force || shouldRebase) {\n                    eachAxis(function (axis) {\n                        var _a = box[axis], min = _a.min, max = _a.max;\n                        element.setProjectionTargetAxis(axis, min, max);\n                    });\n                }\n            },\n            /**\n             * Notify the visual element that its layout is up-to-date.\n             * Currently Animate.tsx uses this to check whether a layout animation\n             * needs to be performed.\n             */\n            notifyLayoutReady: function (config) {\n                setCurrentViewportBox(element);\n                element.notifyLayoutUpdate(layoutState.layout, element.prevViewportBox || layoutState.layout, config);\n            }, \n            /**\n             * Temporarily reset the transform of the instance.\n             */\n            resetTransform: function () { return resetTransform(element, instance, props); }, restoreTransform: function () { return restoreTransform(instance, renderState); }, updateLayoutProjection: updateLayoutProjection,\n            updateTreeLayoutProjection: function () {\n                element.layoutTree.forEach(fireResolveRelativeTargetBox);\n                /**\n                 * Schedule the projection updates at the end of the current preRender\n                 * step. This will ensure that all layout trees will first resolve\n                 * relative projection boxes into viewport boxes, and *then*\n                 * update projections.\n                 */\n                sync.preRender(updateTreeLayoutProjection, false, true);\n            },\n            getProjectionParent: function () {\n                if (projectionParent === undefined) {\n                    var foundParent = false;\n                    // Search backwards through the tree path\n                    for (var i = element.path.length - 1; i >= 0; i--) {\n                        var ancestor = element.path[i];\n                        if (ancestor.projection.isEnabled) {\n                            foundParent = ancestor;\n                            break;\n                        }\n                    }\n                    projectionParent = foundParent;\n                }\n                return projectionParent;\n            },\n            resolveRelativeTargetBox: function () {\n                var relativeParent = element.getProjectionParent();\n                if (!projection.relativeTarget || !relativeParent)\n                    return;\n                calcRelativeBox(projection, relativeParent.projection);\n                if (isDraggable(relativeParent)) {\n                    var target = projection.target;\n                    applyBoxTransforms(target, target, relativeParent.getLatestValues());\n                }\n            },\n            shouldResetTransform: function () {\n                return Boolean(props._layoutResetTransform);\n            },\n            /**\n             *\n             */\n            pointTo: function (newLead) {\n                leadProjection = newLead.projection;\n                leadLatestValues = newLead.getLatestValues();\n                /**\n                 * Subscribe to lead component's layout animations\n                 */\n                unsubscribeFromLeadVisualElement === null || unsubscribeFromLeadVisualElement === void 0 ? void 0 : unsubscribeFromLeadVisualElement();\n                unsubscribeFromLeadVisualElement = pipe(newLead.onSetAxisTarget(element.scheduleUpdateLayoutProjection), newLead.onLayoutAnimationComplete(function () {\n                    var _a;\n                    if (element.isPresent) {\n                        element.presence = Presence.Present;\n                    }\n                    else {\n                        (_a = element.layoutSafeToRemove) === null || _a === void 0 ? void 0 : _a.call(element);\n                    }\n                }));\n            }, \n            // TODO: Clean this up\n            isPresent: true, presence: Presence.Entering });\n        return element;\n    };\n};\nfunction fireResolveRelativeTargetBox(child) {\n    child.resolveRelativeTargetBox();\n}\nfunction fireUpdateLayoutProjection(child) {\n    child.updateLayoutProjection();\n}\nvar variantProps = __spreadArray([\"initial\"], __read(variantPriorityOrder));\nvar numVariantProps = variantProps.length;\n\nexport { visualElement };\n","import { motionValue } from '../../value/index.js';\nimport { isMotionValue } from '../../value/utils/is-motion-value.js';\n\nfunction updateMotionValuesFromProps(element, next, prev) {\n    var _a;\n    for (var key in next) {\n        var nextValue = next[key];\n        var prevValue = prev[key];\n        if (isMotionValue(nextValue)) {\n            /**\n             * If this is a motion value found in props or style, we want to add it\n             * to our visual element's motion value map.\n             */\n            element.addValue(key, nextValue);\n        }\n        else if (isMotionValue(prevValue)) {\n            /**\n             * If we're swapping to a new motion value, create a new motion value\n             * from that\n             */\n            element.addValue(key, motionValue(nextValue));\n        }\n        else if (prevValue !== nextValue) {\n            /**\n             * If this is a flat value that has changed, update the motion value\n             * or create one if it doesn't exist. We only want to do this if we're\n             * not handling the value with our animation state.\n             */\n            if (element.hasValue(key)) {\n                var existingValue = element.getValue(key);\n                // TODO: Only update values that aren't being animated or even looked at\n                !existingValue.hasAnimated && existingValue.set(nextValue);\n            }\n            else {\n                element.addValue(key, motionValue((_a = element.getStaticValue(key)) !== null && _a !== void 0 ? _a : nextValue));\n            }\n        }\n    }\n    // Handle removed values\n    for (var key in prev) {\n        if (next[key] === undefined)\n            element.removeValue(key);\n    }\n    return next;\n}\n\nexport { updateMotionValuesFromProps };\n","import { calcRelativeOffset } from '../../../motion/features/layout/utils.js';\nimport { eachAxis } from '../../../utils/each-axis.js';\n\nfunction setCurrentViewportBox(visualElement) {\n    var projectionParent = visualElement.getProjectionParent();\n    if (!projectionParent) {\n        visualElement.rebaseProjectionTarget();\n        return;\n    }\n    var relativeOffset = calcRelativeOffset(projectionParent.getLayoutState().layout, visualElement.getLayoutState().layout);\n    eachAxis(function (axis) {\n        visualElement.setProjectionTargetAxis(axis, relativeOffset[axis].min, relativeOffset[axis].max, true);\n    });\n}\n\nexport { setCurrentViewportBox };\n","import { resetBox, applyTreeDeltas } from '../../utils/geometry/delta-apply.js';\nimport { updateBoxDelta } from '../../utils/geometry/delta-calc.js';\n\nfunction updateLayoutDeltas(_a, _b, treePath, transformOrigin) {\n    var delta = _a.delta, layout = _a.layout, layoutCorrected = _a.layoutCorrected, treeScale = _a.treeScale;\n    var target = _b.target;\n    /**\n     * Reset the corrected box with the latest values from box, as we're then going\n     * to perform mutative operations on it.\n     */\n    resetBox(layoutCorrected, layout);\n    /**\n     * Apply all the parent deltas to this box to produce the corrected box. This\n     * is the layout box, as it will appear on screen as a result of the transforms of its parents.\n     */\n    applyTreeDeltas(layoutCorrected, treeScale, treePath);\n    /**\n     * Update the delta between the corrected box and the target box before user-set transforms were applied.\n     * This will allow us to calculate the corrected borderRadius and boxShadow to compensate\n     * for our layout reprojection, but still allow them to be scaled correctly by the user.\n     * It might be that to simplify this we may want to accept that user-set scale is also corrected\n     * and we wouldn't have to keep and calc both deltas, OR we could support a user setting\n     * to allow people to choose whether these styles are corrected based on just the\n     * layout reprojection or the final bounding box.\n     */\n    updateBoxDelta(delta, layoutCorrected, target, transformOrigin);\n}\n\nexport { updateLayoutDeltas };\n","import { __assign, __read } from 'tslib';\nimport { number, px } from 'style-value-types';\nimport { isKeyframesTarget } from '../../../animation/utils/is-keyframes-target.js';\nimport { invariant } from 'hey-listen';\nimport { transformProps } from '../../html/utils/transform.js';\nimport { findDimensionValueType } from '../value-types/dimensions.js';\n\nvar positionalKeys = new Set([\n    \"width\",\n    \"height\",\n    \"top\",\n    \"left\",\n    \"right\",\n    \"bottom\",\n    \"x\",\n    \"y\",\n]);\nvar isPositionalKey = function (key) { return positionalKeys.has(key); };\nvar hasPositionalKey = function (target) {\n    return Object.keys(target).some(isPositionalKey);\n};\nvar setAndResetVelocity = function (value, to) {\n    // Looks odd but setting it twice doesn't render, it'll just\n    // set both prev and current to the latest value\n    value.set(to, false);\n    value.set(to);\n};\nvar isNumOrPxType = function (v) {\n    return v === number || v === px;\n};\nvar BoundingBoxDimension;\n(function (BoundingBoxDimension) {\n    BoundingBoxDimension[\"width\"] = \"width\";\n    BoundingBoxDimension[\"height\"] = \"height\";\n    BoundingBoxDimension[\"left\"] = \"left\";\n    BoundingBoxDimension[\"right\"] = \"right\";\n    BoundingBoxDimension[\"top\"] = \"top\";\n    BoundingBoxDimension[\"bottom\"] = \"bottom\";\n})(BoundingBoxDimension || (BoundingBoxDimension = {}));\nvar getPosFromMatrix = function (matrix, pos) {\n    return parseFloat(matrix.split(\", \")[pos]);\n};\nvar getTranslateFromMatrix = function (pos2, pos3) { return function (_bbox, _a) {\n    var transform = _a.transform;\n    if (transform === \"none\" || !transform)\n        return 0;\n    var matrix3d = transform.match(/^matrix3d\\((.+)\\)$/);\n    if (matrix3d) {\n        return getPosFromMatrix(matrix3d[1], pos3);\n    }\n    else {\n        var matrix = transform.match(/^matrix\\((.+)\\)$/);\n        if (matrix) {\n            return getPosFromMatrix(matrix[1], pos2);\n        }\n        else {\n            return 0;\n        }\n    }\n}; };\nvar transformKeys = new Set([\"x\", \"y\", \"z\"]);\nvar nonTranslationalTransformKeys = transformProps.filter(function (key) { return !transformKeys.has(key); });\nfunction removeNonTranslationalTransform(visualElement) {\n    var removedTransforms = [];\n    nonTranslationalTransformKeys.forEach(function (key) {\n        var value = visualElement.getValue(key);\n        if (value !== undefined) {\n            removedTransforms.push([key, value.get()]);\n            value.set(key.startsWith(\"scale\") ? 1 : 0);\n        }\n    });\n    // Apply changes to element before measurement\n    if (removedTransforms.length)\n        visualElement.syncRender();\n    return removedTransforms;\n}\nvar positionalValues = {\n    // Dimensions\n    width: function (_a) {\n        var x = _a.x;\n        return x.max - x.min;\n    },\n    height: function (_a) {\n        var y = _a.y;\n        return y.max - y.min;\n    },\n    top: function (_bbox, _a) {\n        var top = _a.top;\n        return parseFloat(top);\n    },\n    left: function (_bbox, _a) {\n        var left = _a.left;\n        return parseFloat(left);\n    },\n    bottom: function (_a, _b) {\n        var y = _a.y;\n        var top = _b.top;\n        return parseFloat(top) + (y.max - y.min);\n    },\n    right: function (_a, _b) {\n        var x = _a.x;\n        var left = _b.left;\n        return parseFloat(left) + (x.max - x.min);\n    },\n    // Transform\n    x: getTranslateFromMatrix(4, 13),\n    y: getTranslateFromMatrix(5, 14),\n};\nvar convertChangedValueTypes = function (target, visualElement, changedKeys) {\n    var originBbox = visualElement.measureViewportBox();\n    var element = visualElement.getInstance();\n    var elementComputedStyle = getComputedStyle(element);\n    var display = elementComputedStyle.display, top = elementComputedStyle.top, left = elementComputedStyle.left, bottom = elementComputedStyle.bottom, right = elementComputedStyle.right, transform = elementComputedStyle.transform;\n    var originComputedStyle = { top: top, left: left, bottom: bottom, right: right, transform: transform };\n    // If the element is currently set to display: \"none\", make it visible before\n    // measuring the target bounding box\n    if (display === \"none\") {\n        visualElement.setStaticValue(\"display\", target.display || \"block\");\n    }\n    // Apply the latest values (as set in checkAndConvertChangedValueTypes)\n    visualElement.syncRender();\n    var targetBbox = visualElement.measureViewportBox();\n    changedKeys.forEach(function (key) {\n        // Restore styles to their **calculated computed style**, not their actual\n        // originally set style. This allows us to animate between equivalent pixel units.\n        var value = visualElement.getValue(key);\n        setAndResetVelocity(value, positionalValues[key](originBbox, originComputedStyle));\n        target[key] = positionalValues[key](targetBbox, elementComputedStyle);\n    });\n    return target;\n};\nvar checkAndConvertChangedValueTypes = function (visualElement, target, origin, transitionEnd) {\n    if (origin === void 0) { origin = {}; }\n    if (transitionEnd === void 0) { transitionEnd = {}; }\n    target = __assign({}, target);\n    transitionEnd = __assign({}, transitionEnd);\n    var targetPositionalKeys = Object.keys(target).filter(isPositionalKey);\n    // We want to remove any transform values that could affect the element's bounding box before\n    // it's measured. We'll reapply these later.\n    var removedTransformValues = [];\n    var hasAttemptedToRemoveTransformValues = false;\n    var changedValueTypeKeys = [];\n    targetPositionalKeys.forEach(function (key) {\n        var value = visualElement.getValue(key);\n        if (!visualElement.hasValue(key))\n            return;\n        var from = origin[key];\n        var to = target[key];\n        var fromType = findDimensionValueType(from);\n        var toType;\n        // TODO: The current implementation of this basically throws an error\n        // if you try and do value conversion via keyframes. There's probably\n        // a way of doing this but the performance implications would need greater scrutiny,\n        // as it'd be doing multiple resize-remeasure operations.\n        if (isKeyframesTarget(to)) {\n            var numKeyframes = to.length;\n            for (var i = to[0] === null ? 1 : 0; i < numKeyframes; i++) {\n                if (!toType) {\n                    toType = findDimensionValueType(to[i]);\n                    invariant(toType === fromType ||\n                        (isNumOrPxType(fromType) && isNumOrPxType(toType)), \"Keyframes must be of the same dimension as the current value\");\n                }\n                else {\n                    invariant(findDimensionValueType(to[i]) === toType, \"All keyframes must be of the same type\");\n                }\n            }\n        }\n        else {\n            toType = findDimensionValueType(to);\n        }\n        if (fromType !== toType) {\n            // If they're both just number or px, convert them both to numbers rather than\n            // relying on resize/remeasure to convert (which is wasteful in this situation)\n            if (isNumOrPxType(fromType) && isNumOrPxType(toType)) {\n                var current = value.get();\n                if (typeof current === \"string\") {\n                    value.set(parseFloat(current));\n                }\n                if (typeof to === \"string\") {\n                    target[key] = parseFloat(to);\n                }\n                else if (Array.isArray(to) && toType === px) {\n                    target[key] = to.map(parseFloat);\n                }\n            }\n            else if ((fromType === null || fromType === void 0 ? void 0 : fromType.transform) &&\n                (toType === null || toType === void 0 ? void 0 : toType.transform) &&\n                (from === 0 || to === 0)) {\n                // If one or the other value is 0, it's safe to coerce it to the\n                // type of the other without measurement\n                if (from === 0) {\n                    value.set(toType.transform(from));\n                }\n                else {\n                    target[key] = fromType.transform(to);\n                }\n            }\n            else {\n                // If we're going to do value conversion via DOM measurements, we first\n                // need to remove non-positional transform values that could affect the bbox measurements.\n                if (!hasAttemptedToRemoveTransformValues) {\n                    removedTransformValues = removeNonTranslationalTransform(visualElement);\n                    hasAttemptedToRemoveTransformValues = true;\n                }\n                changedValueTypeKeys.push(key);\n                transitionEnd[key] =\n                    transitionEnd[key] !== undefined\n                        ? transitionEnd[key]\n                        : target[key];\n                setAndResetVelocity(value, to);\n            }\n        }\n    });\n    if (changedValueTypeKeys.length) {\n        var convertedTarget = convertChangedValueTypes(target, visualElement, changedValueTypeKeys);\n        // If we removed transform values, reapply them before the next render\n        if (removedTransformValues.length) {\n            removedTransformValues.forEach(function (_a) {\n                var _b = __read(_a, 2), key = _b[0], value = _b[1];\n                visualElement.getValue(key).set(value);\n            });\n        }\n        // Reapply original values\n        visualElement.syncRender();\n        return { target: convertedTarget, transitionEnd: transitionEnd };\n    }\n    else {\n        return { target: target, transitionEnd: transitionEnd };\n    }\n};\n/**\n * Convert value types for x/y/width/height/top/left/bottom/right\n *\n * Allows animation between `'auto'` -> `'100%'` or `0` -> `'calc(50% - 10vw)'`\n *\n * @internal\n */\nfunction unitConversion(visualElement, target, origin, transitionEnd) {\n    return hasPositionalKey(target)\n        ? checkAndConvertChangedValueTypes(visualElement, target, origin, transitionEnd)\n        : { target: target, transitionEnd: transitionEnd };\n}\n\nexport { BoundingBoxDimension, unitConversion };\n","import { resolveCSSVariables } from './css-variables-conversion.js';\nimport { unitConversion } from './unit-conversion.js';\n\n/**\n * Parse a DOM variant to make it animatable. This involves resolving CSS variables\n * and ensuring animations like \"20%\" => \"calc(50vw)\" are performed in pixels.\n */\nvar parseDomVariant = function (visualElement, target, origin, transitionEnd) {\n    var resolved = resolveCSSVariables(visualElement, target, transitionEnd);\n    target = resolved.target;\n    transitionEnd = resolved.transitionEnd;\n    return unitConversion(visualElement, target, origin, transitionEnd);\n};\n\nexport { parseDomVariant };\n","import { __rest, __assign } from 'tslib';\nimport { visualElement } from '../index.js';\nimport { getOrigin, checkTargetForNewValues } from '../utils/setters.js';\nimport { getBoundingBox } from '../dom/projection/measure.js';\nimport { buildHTMLStyles } from './utils/build-styles.js';\nimport { isCSSVariable } from '../dom/utils/is-css-variable.js';\nimport { parseDomVariant } from '../dom/utils/parse-dom-variant.js';\nimport { isTransformProp } from './utils/transform.js';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.js';\nimport { renderHTML } from './utils/render.js';\nimport { getDefaultValueType } from '../dom/value-types/defaults.js';\nimport { buildLayoutProjectionTransformOrigin, buildLayoutProjectionTransform } from './utils/build-projection-transform.js';\n\nfunction getComputedStyle(element) {\n    return window.getComputedStyle(element);\n}\nvar htmlConfig = {\n    treeType: \"dom\",\n    readValueFromInstance: function (domElement, key) {\n        if (isTransformProp(key)) {\n            var defaultType = getDefaultValueType(key);\n            return defaultType ? defaultType.default || 0 : 0;\n        }\n        else {\n            var computedStyle = getComputedStyle(domElement);\n            return ((isCSSVariable(key)\n                ? computedStyle.getPropertyValue(key)\n                : computedStyle[key]) || 0);\n        }\n    },\n    sortNodePosition: function (a, b) {\n        /**\n         * compareDocumentPosition returns a bitmask, by using the bitwise &\n         * we're returning true if 2 in that bitmask is set to true. 2 is set\n         * to true if b preceeds a.\n         */\n        return a.compareDocumentPosition(b) & 2 ? 1 : -1;\n    },\n    getBaseTarget: function (props, key) {\n        var _a;\n        return (_a = props.style) === null || _a === void 0 ? void 0 : _a[key];\n    },\n    measureViewportBox: function (element, _a) {\n        var transformPagePoint = _a.transformPagePoint;\n        return getBoundingBox(element, transformPagePoint);\n    },\n    /**\n     * Reset the transform on the current Element. This is called as part\n     * of a batched process across the entire layout tree. To remove this write\n     * cycle it'd be interesting to see if it's possible to \"undo\" all the current\n     * layout transforms up the tree in the same way this.getBoundingBoxWithoutTransforms\n     * works\n     */\n    resetTransform: function (element, domElement, props) {\n        /**\n         * When we reset the transform of an element, there's a fair possibility that\n         * the element will visually move from underneath the pointer, triggering attached\n         * pointerenter/leave events. We temporarily suspend these while measurement takes place.\n         */\n        element.suspendHoverEvents();\n        var transformTemplate = props.transformTemplate;\n        domElement.style.transform = transformTemplate\n            ? transformTemplate({}, \"\")\n            : \"none\";\n        // Ensure that whatever happens next, we restore our transform on the next frame\n        element.scheduleRender();\n    },\n    restoreTransform: function (instance, mutableState) {\n        instance.style.transform = mutableState.style.transform;\n    },\n    removeValueFromRenderState: function (key, _a) {\n        var vars = _a.vars, style = _a.style;\n        delete vars[key];\n        delete style[key];\n    },\n    /**\n     * Ensure that HTML and Framer-specific value types like `px`->`%` and `Color`\n     * can be animated by Motion.\n     */\n    makeTargetAnimatable: function (element, _a, _b, isMounted) {\n        var transformValues = _b.transformValues;\n        if (isMounted === void 0) { isMounted = true; }\n        var transition = _a.transition, transitionEnd = _a.transitionEnd, target = __rest(_a, [\"transition\", \"transitionEnd\"]);\n        var origin = getOrigin(target, transition || {}, element);\n        /**\n         * If Framer has provided a function to convert `Color` etc value types, convert them\n         */\n        if (transformValues) {\n            if (transitionEnd)\n                transitionEnd = transformValues(transitionEnd);\n            if (target)\n                target = transformValues(target);\n            if (origin)\n                origin = transformValues(origin);\n        }\n        if (isMounted) {\n            checkTargetForNewValues(element, target, origin);\n            var parsed = parseDomVariant(element, target, origin, transitionEnd);\n            transitionEnd = parsed.transitionEnd;\n            target = parsed.target;\n        }\n        return __assign({ transition: transition,\n            transitionEnd: transitionEnd }, target);\n    },\n    scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n    build: function (element, renderState, latestValues, projection, layoutState, options, props) {\n        if (element.isVisible !== undefined) {\n            renderState.style.visibility = element.isVisible\n                ? \"visible\"\n                : \"hidden\";\n        }\n        var isProjectionTranform = projection.isEnabled && layoutState.isHydrated;\n        buildHTMLStyles(renderState, latestValues, projection, layoutState, options, props.transformTemplate, isProjectionTranform ? buildLayoutProjectionTransform : undefined, isProjectionTranform\n            ? buildLayoutProjectionTransformOrigin\n            : undefined);\n    },\n    render: renderHTML,\n};\nvar htmlVisualElement = visualElement(htmlConfig);\n\nexport { getComputedStyle, htmlConfig, htmlVisualElement };\n","import { __assign } from 'tslib';\nimport { visualElement } from '../index.js';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.js';\nimport { htmlConfig } from '../html/visual-element.js';\nimport { buildSVGAttrs } from './utils/build-attrs.js';\nimport { camelToDash } from '../dom/utils/camel-to-dash.js';\nimport { camelCaseAttributes } from './utils/camel-case-attrs.js';\nimport { isTransformProp } from '../html/utils/transform.js';\nimport { renderSVG } from './utils/render.js';\nimport { getDefaultValueType } from '../dom/value-types/defaults.js';\nimport { buildLayoutProjectionTransformOrigin, buildLayoutProjectionTransform } from '../html/utils/build-projection-transform.js';\n\nvar svgVisualElement = visualElement(__assign(__assign({}, htmlConfig), { getBaseTarget: function (props, key) {\n        return props[key];\n    },\n    readValueFromInstance: function (domElement, key) {\n        var _a;\n        if (isTransformProp(key)) {\n            return ((_a = getDefaultValueType(key)) === null || _a === void 0 ? void 0 : _a.default) || 0;\n        }\n        key = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n        return domElement.getAttribute(key);\n    },\n    scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n    build: function (_element, renderState, latestValues, projection, layoutState, options, props) {\n        var isProjectionTranform = projection.isEnabled && layoutState.isHydrated;\n        buildSVGAttrs(renderState, latestValues, projection, layoutState, options, props.transformTemplate, isProjectionTranform ? buildLayoutProjectionTransform : undefined, isProjectionTranform\n            ? buildLayoutProjectionTransformOrigin\n            : undefined);\n    }, render: renderSVG }));\n\nexport { svgVisualElement };\n","import { htmlVisualElement } from '../html/visual-element.js';\nimport { svgVisualElement } from '../svg/visual-element.js';\nimport { isSVGComponent } from './utils/is-svg-component.js';\n\nvar createDomVisualElement = function (Component, options) {\n    return isSVGComponent(Component)\n        ? svgVisualElement(options, { enableHardwareAcceleration: false })\n        : htmlVisualElement(options, { enableHardwareAcceleration: true });\n};\n\nexport { createDomVisualElement };\n","import { __assign } from 'tslib';\nimport { isMouseEvent, isTouchEvent } from './utils/event-type.js';\nimport { extractEventInfo } from '../events/event-info.js';\nimport sync, { getFrameData, cancelSync } from 'framesync';\nimport { secondsToMilliseconds } from '../utils/time-conversion.js';\nimport { addPointerEvent } from '../events/use-pointer-event.js';\nimport { distance, pipe } from 'popmotion';\n\n/**\n * @internal\n */\nvar PanSession = /** @class */ (function () {\n    function PanSession(event, handlers, _a) {\n        var _this = this;\n        var _b = _a === void 0 ? {} : _a, transformPagePoint = _b.transformPagePoint;\n        /**\n         * @internal\n         */\n        this.startEvent = null;\n        /**\n         * @internal\n         */\n        this.lastMoveEvent = null;\n        /**\n         * @internal\n         */\n        this.lastMoveEventInfo = null;\n        /**\n         * @internal\n         */\n        this.handlers = {};\n        this.updatePoint = function () {\n            if (!(_this.lastMoveEvent && _this.lastMoveEventInfo))\n                return;\n            var info = getPanInfo(_this.lastMoveEventInfo, _this.history);\n            var isPanStarted = _this.startEvent !== null;\n            // Only start panning if the offset is larger than 3 pixels. If we make it\n            // any larger than this we'll want to reset the pointer history\n            // on the first update to avoid visual snapping to the cursoe.\n            var isDistancePastThreshold = distance(info.offset, { x: 0, y: 0 }) >= 3;\n            if (!isPanStarted && !isDistancePastThreshold)\n                return;\n            var point = info.point;\n            var timestamp = getFrameData().timestamp;\n            _this.history.push(__assign(__assign({}, point), { timestamp: timestamp }));\n            var _a = _this.handlers, onStart = _a.onStart, onMove = _a.onMove;\n            if (!isPanStarted) {\n                onStart && onStart(_this.lastMoveEvent, info);\n                _this.startEvent = _this.lastMoveEvent;\n            }\n            onMove && onMove(_this.lastMoveEvent, info);\n        };\n        this.handlePointerMove = function (event, info) {\n            _this.lastMoveEvent = event;\n            _this.lastMoveEventInfo = transformPoint(info, _this.transformPagePoint);\n            // Because Safari doesn't trigger mouseup events when it's above a `<select>`\n            if (isMouseEvent(event) && event.buttons === 0) {\n                _this.handlePointerUp(event, info);\n                return;\n            }\n            // Throttle mouse move event to once per frame\n            sync.update(_this.updatePoint, true);\n        };\n        this.handlePointerUp = function (event, info) {\n            _this.end();\n            var onEnd = _this.handlers.onEnd;\n            if (!onEnd || !_this.startEvent)\n                return;\n            var panInfo = getPanInfo(transformPoint(info, _this.transformPagePoint), _this.history);\n            onEnd && onEnd(event, panInfo);\n        };\n        // If we have more than one touch, don't start detecting this gesture\n        if (isTouchEvent(event) && event.touches.length > 1)\n            return;\n        this.handlers = handlers;\n        this.transformPagePoint = transformPagePoint;\n        var info = extractEventInfo(event);\n        var initialInfo = transformPoint(info, this.transformPagePoint);\n        var point = initialInfo.point;\n        var timestamp = getFrameData().timestamp;\n        this.history = [__assign(__assign({}, point), { timestamp: timestamp })];\n        var onSessionStart = handlers.onSessionStart;\n        onSessionStart &&\n            onSessionStart(event, getPanInfo(initialInfo, this.history));\n        this.removeListeners = pipe(addPointerEvent(window, \"pointermove\", this.handlePointerMove), addPointerEvent(window, \"pointerup\", this.handlePointerUp), addPointerEvent(window, \"pointercancel\", this.handlePointerUp));\n    }\n    PanSession.prototype.updateHandlers = function (handlers) {\n        this.handlers = handlers;\n    };\n    PanSession.prototype.end = function () {\n        this.removeListeners && this.removeListeners();\n        cancelSync.update(this.updatePoint);\n    };\n    return PanSession;\n}());\nfunction transformPoint(info, transformPagePoint) {\n    return transformPagePoint ? { point: transformPagePoint(info.point) } : info;\n}\nfunction subtractPoint(a, b) {\n    return { x: a.x - b.x, y: a.y - b.y };\n}\nfunction getPanInfo(_a, history) {\n    var point = _a.point;\n    return {\n        point: point,\n        delta: subtractPoint(point, lastDevicePoint(history)),\n        offset: subtractPoint(point, startDevicePoint(history)),\n        velocity: getVelocity(history, 0.1),\n    };\n}\nfunction startDevicePoint(history) {\n    return history[0];\n}\nfunction lastDevicePoint(history) {\n    return history[history.length - 1];\n}\nfunction getVelocity(history, timeDelta) {\n    if (history.length < 2) {\n        return { x: 0, y: 0 };\n    }\n    var i = history.length - 1;\n    var timestampedPoint = null;\n    var lastPoint = lastDevicePoint(history);\n    while (i >= 0) {\n        timestampedPoint = history[i];\n        if (lastPoint.timestamp - timestampedPoint.timestamp >\n            secondsToMilliseconds(timeDelta)) {\n            break;\n        }\n        i--;\n    }\n    if (!timestampedPoint) {\n        return { x: 0, y: 0 };\n    }\n    var time = (lastPoint.timestamp - timestampedPoint.timestamp) / 1000;\n    if (time === 0) {\n        return { x: 0, y: 0 };\n    }\n    var currentVelocity = {\n        x: (lastPoint.x - timestampedPoint.x) / time,\n        y: (lastPoint.y - timestampedPoint.y) / time,\n    };\n    if (currentVelocity.x === Infinity) {\n        currentVelocity.x = 0;\n    }\n    if (currentVelocity.y === Infinity) {\n        currentVelocity.y = 0;\n    }\n    return currentVelocity;\n}\n\nexport { PanSession };\n","import { __read } from 'tslib';\nimport { mix } from 'popmotion';\n\n/**\n * Apply constraints to a point. These constraints are both physical along an\n * axis, and an elastic factor that determines how much to constrain the point\n * by if it does lie outside the defined parameters.\n */\nfunction applyConstraints(point, _a, elastic) {\n    var min = _a.min, max = _a.max;\n    if (min !== undefined && point < min) {\n        // If we have a min point defined, and this is outside of that, constrain\n        point = elastic ? mix(min, point, elastic.min) : Math.max(point, min);\n    }\n    else if (max !== undefined && point > max) {\n        // If we have a max point defined, and this is outside of that, constrain\n        point = elastic ? mix(max, point, elastic.max) : Math.min(point, max);\n    }\n    return point;\n}\n/**\n * Calculates a min projection point based on a pointer, pointer progress\n * within the drag target, and constraints.\n *\n * For instance if an element was 100px width, we were dragging from 0.25\n * along this axis, the pointer is at 200px, and there were no constraints,\n * we would calculate a min projection point of 175px.\n */\nfunction calcConstrainedMinPoint(point, length, progress, constraints, elastic) {\n    // Calculate a min point for this axis and apply it to the current pointer\n    var min = point - length * progress;\n    return constraints ? applyConstraints(min, constraints, elastic) : min;\n}\n/**\n * Calculate constraints in terms of the viewport when defined relatively to the\n * measured axis. This is measured from the nearest edge, so a max constraint of 200\n * on an axis with a max value of 300 would return a constraint of 500 - axis length\n */\nfunction calcRelativeAxisConstraints(axis, min, max) {\n    return {\n        min: min !== undefined ? axis.min + min : undefined,\n        max: max !== undefined\n            ? axis.max + max - (axis.max - axis.min)\n            : undefined,\n    };\n}\n/**\n * Calculate constraints in terms of the viewport when\n * defined relatively to the measured bounding box.\n */\nfunction calcRelativeConstraints(layoutBox, _a) {\n    var top = _a.top, left = _a.left, bottom = _a.bottom, right = _a.right;\n    return {\n        x: calcRelativeAxisConstraints(layoutBox.x, left, right),\n        y: calcRelativeAxisConstraints(layoutBox.y, top, bottom),\n    };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative axis\n */\nfunction calcViewportAxisConstraints(layoutAxis, constraintsAxis) {\n    var _a;\n    var min = constraintsAxis.min - layoutAxis.min;\n    var max = constraintsAxis.max - layoutAxis.max;\n    // If the constraints axis is actually smaller than the layout axis then we can\n    // flip the constraints\n    if (constraintsAxis.max - constraintsAxis.min <\n        layoutAxis.max - layoutAxis.min) {\n        _a = __read([max, min], 2), min = _a[0], max = _a[1];\n    }\n    return {\n        min: layoutAxis.min + min,\n        max: layoutAxis.min + max,\n    };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative box\n */\nfunction calcViewportConstraints(layoutBox, constraintsBox) {\n    return {\n        x: calcViewportAxisConstraints(layoutBox.x, constraintsBox.x),\n        y: calcViewportAxisConstraints(layoutBox.y, constraintsBox.y),\n    };\n}\n/**\n * Calculate the an axis position based on two axes and a progress value.\n */\nfunction calcPositionFromProgress(axis, constraints, progress) {\n    var axisLength = axis.max - axis.min;\n    var min = mix(constraints.min, constraints.max - axisLength, progress);\n    return { min: min, max: min + axisLength };\n}\n/**\n * Rebase the calculated viewport constraints relative to the layout.min point.\n */\nfunction rebaseAxisConstraints(layout, constraints) {\n    var relativeConstraints = {};\n    if (constraints.min !== undefined) {\n        relativeConstraints.min = constraints.min - layout.min;\n    }\n    if (constraints.max !== undefined) {\n        relativeConstraints.max = constraints.max - layout.min;\n    }\n    return relativeConstraints;\n}\nvar defaultElastic = 0.35;\n/**\n * Accepts a dragElastic prop and returns resolved elastic values for each axis.\n */\nfunction resolveDragElastic(dragElastic) {\n    if (dragElastic === false) {\n        dragElastic = 0;\n    }\n    else if (dragElastic === true) {\n        dragElastic = defaultElastic;\n    }\n    return {\n        x: resolveAxisElastic(dragElastic, \"left\", \"right\"),\n        y: resolveAxisElastic(dragElastic, \"top\", \"bottom\"),\n    };\n}\nfunction resolveAxisElastic(dragElastic, minLabel, maxLabel) {\n    return {\n        min: resolvePointElastic(dragElastic, minLabel),\n        max: resolvePointElastic(dragElastic, maxLabel),\n    };\n}\nfunction resolvePointElastic(dragElastic, label) {\n    var _a;\n    return typeof dragElastic === \"number\"\n        ? dragElastic\n        : (_a = dragElastic[label]) !== null && _a !== void 0 ? _a : 0;\n}\n\nexport { applyConstraints, calcConstrainedMinPoint, calcPositionFromProgress, calcRelativeAxisConstraints, calcRelativeConstraints, calcViewportAxisConstraints, calcViewportConstraints, defaultElastic, rebaseAxisConstraints, resolveAxisElastic, resolveDragElastic, resolvePointElastic };\n","import { __rest, __assign } from 'tslib';\nimport { invariant } from 'hey-listen';\nimport { PanSession } from '../PanSession.js';\nimport { getGlobalLock } from './utils/lock.js';\nimport { isRefObject } from '../../utils/is-ref-object.js';\nimport { addPointerEvent } from '../../events/use-pointer-event.js';\nimport { addDomEvent } from '../../events/use-dom-event.js';\nimport { getViewportPointFromEvent } from '../../events/event-info.js';\nimport { axisBox, convertAxisBoxToBoundingBox, convertBoundingBoxToAxisBox } from '../../utils/geometry/index.js';\nimport { eachAxis } from '../../utils/each-axis.js';\nimport { calcRelativeConstraints, resolveDragElastic, rebaseAxisConstraints, calcViewportConstraints, applyConstraints, calcConstrainedMinPoint, calcPositionFromProgress, defaultElastic } from './utils/constraints.js';\nimport { getBoundingBox } from '../../render/dom/projection/measure.js';\nimport { calcOrigin } from '../../utils/geometry/delta-calc.js';\nimport { startAnimation } from '../../animation/utils/transitions.js';\nimport { AnimationType } from '../../render/utils/types.js';\nimport { updateTreeLayoutMeasurements } from '../../render/dom/projection/utils.js';\nimport { progress } from 'popmotion';\nimport { convertToRelativeProjection } from '../../render/dom/projection/convert-to-relative.js';\nimport { calcRelativeOffset } from '../../motion/features/layout/utils.js';\n\nvar elementDragControls = new WeakMap();\n/**\n *\n */\nvar lastPointerEvent;\nvar VisualElementDragControls = /** @class */ (function () {\n    function VisualElementDragControls(_a) {\n        var visualElement = _a.visualElement;\n        /**\n         * Track whether we're currently dragging.\n         *\n         * @internal\n         */\n        this.isDragging = false;\n        /**\n         * The current direction of drag, or `null` if both.\n         *\n         * @internal\n         */\n        this.currentDirection = null;\n        /**\n         * The permitted boundaries of travel, in pixels.\n         *\n         * @internal\n         */\n        this.constraints = false;\n        /**\n         * The per-axis resolved elastic values.\n         *\n         * @internal\n         */\n        this.elastic = axisBox();\n        /**\n         * A reference to the host component's latest props.\n         *\n         * @internal\n         */\n        this.props = {};\n        /**\n         * @internal\n         */\n        this.hasMutatedConstraints = false;\n        /**\n         * Track the initial position of the cursor relative to the dragging element\n         * when dragging starts as a value of 0-1 on each axis. We then use this to calculate\n         * an ideal bounding box for the VisualElement renderer to project into every frame.\n         *\n         * @internal\n         */\n        this.cursorProgress = {\n            x: 0.5,\n            y: 0.5,\n        };\n        // When updating _dragX, or _dragY instead of the VisualElement,\n        // persist their values between drag gestures.\n        this.originPoint = {};\n        // This is a reference to the global drag gesture lock, ensuring only one component\n        // can \"capture\" the drag of one or both axes.\n        // TODO: Look into moving this into pansession?\n        this.openGlobalLock = null;\n        /**\n         * @internal\n         */\n        this.panSession = null;\n        this.visualElement = visualElement;\n        this.visualElement.enableLayoutProjection();\n        elementDragControls.set(visualElement, this);\n    }\n    /**\n     * Instantiate a PanSession for the drag gesture\n     *\n     * @public\n     */\n    VisualElementDragControls.prototype.start = function (originEvent, _a) {\n        var _this = this;\n        var _b = _a === void 0 ? {} : _a, _c = _b.snapToCursor, snapToCursor = _c === void 0 ? false : _c, cursorProgress = _b.cursorProgress;\n        var onSessionStart = function (event) {\n            // Stop any animations on both axis values immediately. This allows the user to throw and catch\n            // the component.\n            _this.stopMotion();\n            /**\n             * Ensure that this element's layout measurements are updated.\n             * We'll need these to accurately project the element and figure out its constraints.\n             */\n            _this.updateLayoutMeasurements();\n            /**\n             * If this drag session has been manually triggered by the user, it might be from an event\n             * outside the draggable element. If snapToCursor is set to true, we need to measure the position\n             * of the element and snap it to the cursor.\n             */\n            snapToCursor && _this.snapToCursor(originEvent);\n            /**\n             * Apply a simple lock to the projection target. This ensures no animations\n             * can run on the projection box while this lock is active.\n             */\n            _this.isLayoutDrag() && _this.visualElement.lockProjectionTarget();\n            /**\n             * When dragging starts, we want to find where the cursor is relative to the bounding box\n             * of the element. Every frame, we calculate a new bounding box using this relative position\n             * and let the visualElement renderer figure out how to reproject the element into this bounding\n             * box.\n             *\n             * By doing it this way, rather than applying an x/y transform directly to the element,\n             * we can ensure the component always visually sticks to the cursor as we'd expect, even\n             * if the DOM element itself changes layout as a result of React updates the user might\n             * make based on the drag position.\n             */\n            var point = getViewportPointFromEvent(event).point;\n            eachAxis(function (axis) {\n                var _a = _this.visualElement.projection.target[axis], min = _a.min, max = _a.max;\n                _this.cursorProgress[axis] = cursorProgress\n                    ? cursorProgress[axis]\n                    : progress(min, max, point[axis]);\n                /**\n                 * If we have external drag MotionValues, record their origin point. On pointermove\n                 * we'll apply the pan gesture offset directly to this value.\n                 */\n                var axisValue = _this.getAxisMotionValue(axis);\n                if (axisValue) {\n                    _this.originPoint[axis] = axisValue.get();\n                }\n            });\n        };\n        var onStart = function (event, info) {\n            var _a, _b, _c;\n            // Attempt to grab the global drag gesture lock - maybe make this part of PanSession\n            var _d = _this.props, drag = _d.drag, dragPropagation = _d.dragPropagation;\n            if (drag && !dragPropagation) {\n                if (_this.openGlobalLock)\n                    _this.openGlobalLock();\n                _this.openGlobalLock = getGlobalLock(drag);\n                // If we don 't have the lock, don't start dragging\n                if (!_this.openGlobalLock)\n                    return;\n            }\n            /**\n             * Resolve the drag constraints. These are either set as top/right/bottom/left constraints\n             * relative to the element's layout, or a ref to another element. Both need converting to\n             * viewport coordinates.\n             */\n            _this.resolveDragConstraints();\n            // Set current drag status\n            _this.isDragging = true;\n            _this.currentDirection = null;\n            // Fire onDragStart event\n            (_b = (_a = _this.props).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, event, info);\n            (_c = _this.visualElement.animationState) === null || _c === void 0 ? void 0 : _c.setActive(AnimationType.Drag, true);\n        };\n        var onMove = function (event, info) {\n            var _a, _b, _c, _d;\n            var _e = _this.props, dragPropagation = _e.dragPropagation, dragDirectionLock = _e.dragDirectionLock;\n            // If we didn't successfully receive the gesture lock, early return.\n            if (!dragPropagation && !_this.openGlobalLock)\n                return;\n            var offset = info.offset;\n            // Attempt to detect drag direction if directionLock is true\n            if (dragDirectionLock && _this.currentDirection === null) {\n                _this.currentDirection = getCurrentDirection(offset);\n                // If we've successfully set a direction, notify listener\n                if (_this.currentDirection !== null) {\n                    (_b = (_a = _this.props).onDirectionLock) === null || _b === void 0 ? void 0 : _b.call(_a, _this.currentDirection);\n                }\n                return;\n            }\n            // Update each point with the latest position\n            _this.updateAxis(\"x\", event, offset);\n            _this.updateAxis(\"y\", event, offset);\n            // Fire onDrag event\n            (_d = (_c = _this.props).onDrag) === null || _d === void 0 ? void 0 : _d.call(_c, event, info);\n            // Update the last pointer event\n            lastPointerEvent = event;\n        };\n        var onEnd = function (event, info) { return _this.stop(event, info); };\n        var transformPagePoint = this.props.transformPagePoint;\n        this.panSession = new PanSession(originEvent, {\n            onSessionStart: onSessionStart,\n            onStart: onStart,\n            onMove: onMove,\n            onEnd: onEnd,\n        }, { transformPagePoint: transformPagePoint });\n    };\n    VisualElementDragControls.prototype.updateLayoutMeasurements = function () {\n        updateTreeLayoutMeasurements(this.visualElement, Boolean(this.getAxisMotionValue(\"x\") && !this.isExternalDrag()));\n    };\n    VisualElementDragControls.prototype.resolveDragConstraints = function () {\n        var _this = this;\n        var _a = this.props, dragConstraints = _a.dragConstraints, dragElastic = _a.dragElastic;\n        this.visualElement.updateLayoutProjection();\n        var layout = this.visualElement.getLayoutState().layoutCorrected;\n        if (dragConstraints) {\n            this.constraints = isRefObject(dragConstraints)\n                ? this.resolveRefConstraints(layout, dragConstraints)\n                : calcRelativeConstraints(layout, dragConstraints);\n        }\n        else {\n            this.constraints = false;\n        }\n        this.elastic = resolveDragElastic(dragElastic);\n        /**\n         * If we're outputting to external MotionValues, we want to rebase the measured constraints\n         * from viewport-relative to component-relative.\n         */\n        if (this.constraints && !this.hasMutatedConstraints) {\n            eachAxis(function (axis) {\n                if (_this.getAxisMotionValue(axis)) {\n                    _this.constraints[axis] = rebaseAxisConstraints(layout[axis], _this.constraints[axis]);\n                }\n            });\n        }\n    };\n    VisualElementDragControls.prototype.resolveRefConstraints = function (layoutBox, constraints) {\n        var _a = this.props, onMeasureDragConstraints = _a.onMeasureDragConstraints, transformPagePoint = _a.transformPagePoint;\n        var constraintsElement = constraints.current;\n        invariant(constraintsElement !== null, \"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.\");\n        this.constraintsBox = getBoundingBox(constraintsElement, transformPagePoint);\n        var measuredConstraints = calcViewportConstraints(layoutBox, this.constraintsBox);\n        /**\n         * If there's an onMeasureDragConstraints listener we call it and\n         * if different constraints are returned, set constraints to that\n         */\n        if (onMeasureDragConstraints) {\n            var userConstraints = onMeasureDragConstraints(convertAxisBoxToBoundingBox(measuredConstraints));\n            this.hasMutatedConstraints = !!userConstraints;\n            if (userConstraints) {\n                measuredConstraints = convertBoundingBoxToAxisBox(userConstraints);\n            }\n        }\n        return measuredConstraints;\n    };\n    VisualElementDragControls.prototype.cancelDrag = function () {\n        var _a;\n        this.isDragging = false;\n        this.panSession && this.panSession.end();\n        this.panSession = null;\n        if (!this.props.dragPropagation && this.openGlobalLock) {\n            this.openGlobalLock();\n            this.openGlobalLock = null;\n        }\n        (_a = this.visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Drag, false);\n    };\n    VisualElementDragControls.prototype.stop = function (event, info) {\n        var _a, _b, _c;\n        this.visualElement.unlockProjectionTarget();\n        (_a = this.panSession) === null || _a === void 0 ? void 0 : _a.end();\n        this.panSession = null;\n        var isDragging = this.isDragging;\n        this.cancelDrag();\n        if (!isDragging)\n            return;\n        var velocity = info.velocity;\n        this.animateDragEnd(velocity);\n        (_c = (_b = this.props).onDragEnd) === null || _c === void 0 ? void 0 : _c.call(_b, event, info);\n    };\n    VisualElementDragControls.prototype.snapToCursor = function (event) {\n        var _this = this;\n        eachAxis(function (axis) {\n            var drag = _this.props.drag;\n            // If we're not dragging this axis, do an early return.\n            if (!shouldDrag(axis, drag, _this.currentDirection))\n                return;\n            var axisValue = _this.getAxisMotionValue(axis);\n            if (axisValue) {\n                var point = getViewportPointFromEvent(event).point;\n                var box = _this.visualElement.getLayoutState().layout;\n                var length_1 = box[axis].max - box[axis].min;\n                var center = box[axis].min + length_1 / 2;\n                var offset = point[axis] - center;\n                _this.originPoint[axis] = point[axis];\n                axisValue.set(offset);\n            }\n            else {\n                _this.cursorProgress[axis] = 0.5;\n                _this.updateVisualElementAxis(axis, event);\n            }\n        });\n    };\n    /**\n     * Update the specified axis with the latest pointer information.\n     */\n    VisualElementDragControls.prototype.updateAxis = function (axis, event, offset) {\n        var drag = this.props.drag;\n        // If we're not dragging this axis, do an early return.\n        if (!shouldDrag(axis, drag, this.currentDirection))\n            return;\n        return this.getAxisMotionValue(axis)\n            ? this.updateAxisMotionValue(axis, offset)\n            : this.updateVisualElementAxis(axis, event);\n    };\n    VisualElementDragControls.prototype.updateAxisMotionValue = function (axis, offset) {\n        var axisValue = this.getAxisMotionValue(axis);\n        if (!offset || !axisValue)\n            return;\n        var nextValue = this.originPoint[axis] + offset[axis];\n        var update = this.constraints\n            ? applyConstraints(nextValue, this.constraints[axis], this.elastic[axis])\n            : nextValue;\n        axisValue.set(update);\n    };\n    VisualElementDragControls.prototype.updateVisualElementAxis = function (axis, event) {\n        var _a;\n        // Get the actual layout bounding box of the element\n        var axisLayout = this.visualElement.getLayoutState().layout[axis];\n        // Calculate its current length. In the future we might want to lerp this to animate\n        // between lengths if the layout changes as we change the DOM\n        var axisLength = axisLayout.max - axisLayout.min;\n        // Get the initial progress that the pointer sat on this axis on gesture start.\n        var axisProgress = this.cursorProgress[axis];\n        var point = getViewportPointFromEvent(event).point;\n        // Calculate a new min point based on the latest pointer position, constraints and elastic\n        var min = calcConstrainedMinPoint(point[axis], axisLength, axisProgress, (_a = this.constraints) === null || _a === void 0 ? void 0 : _a[axis], this.elastic[axis]);\n        // Update the axis viewport target with this new min and the length\n        this.visualElement.setProjectionTargetAxis(axis, min, min + axisLength);\n    };\n    VisualElementDragControls.prototype.setProps = function (_a) {\n        var _b = _a.drag, drag = _b === void 0 ? false : _b, _c = _a.dragDirectionLock, dragDirectionLock = _c === void 0 ? false : _c, _d = _a.dragPropagation, dragPropagation = _d === void 0 ? false : _d, _e = _a.dragConstraints, dragConstraints = _e === void 0 ? false : _e, _f = _a.dragElastic, dragElastic = _f === void 0 ? defaultElastic : _f, _g = _a.dragMomentum, dragMomentum = _g === void 0 ? true : _g, remainingProps = __rest(_a, [\"drag\", \"dragDirectionLock\", \"dragPropagation\", \"dragConstraints\", \"dragElastic\", \"dragMomentum\"]);\n        this.props = __assign({ drag: drag,\n            dragDirectionLock: dragDirectionLock,\n            dragPropagation: dragPropagation,\n            dragConstraints: dragConstraints,\n            dragElastic: dragElastic,\n            dragMomentum: dragMomentum }, remainingProps);\n    };\n    /**\n     * Drag works differently depending on which props are provided.\n     *\n     * - If _dragX and _dragY are provided, we output the gesture delta directly to those motion values.\n     * - If the component will perform layout animations, we output the gesture to the component's\n     *      visual bounding box\n     * - Otherwise, we apply the delta to the x/y motion values.\n     */\n    VisualElementDragControls.prototype.getAxisMotionValue = function (axis) {\n        var _a = this.props, layout = _a.layout, layoutId = _a.layoutId;\n        var dragKey = \"_drag\" + axis.toUpperCase();\n        if (this.props[dragKey]) {\n            return this.props[dragKey];\n        }\n        else if (!layout && layoutId === undefined) {\n            return this.visualElement.getValue(axis, 0);\n        }\n    };\n    VisualElementDragControls.prototype.isLayoutDrag = function () {\n        return !this.getAxisMotionValue(\"x\");\n    };\n    VisualElementDragControls.prototype.isExternalDrag = function () {\n        var _a = this.props, _dragX = _a._dragX, _dragY = _a._dragY;\n        return _dragX || _dragY;\n    };\n    VisualElementDragControls.prototype.animateDragEnd = function (velocity) {\n        var _this = this;\n        var _a = this.props, drag = _a.drag, dragMomentum = _a.dragMomentum, dragElastic = _a.dragElastic, dragTransition = _a.dragTransition;\n        /**\n         * Everything beyond the drag gesture should be performed with\n         * relative projection so children stay in sync with their parent element.\n         */\n        var isRelative = convertToRelativeProjection(this.visualElement, this.isLayoutDrag() && !this.isExternalDrag());\n        /**\n         * If we had previously resolved constraints relative to the viewport,\n         * we need to also convert those to a relative coordinate space for the animation\n         */\n        var constraints = this.constraints || {};\n        if (isRelative &&\n            Object.keys(constraints).length &&\n            this.isLayoutDrag()) {\n            var projectionParent = this.visualElement.getProjectionParent();\n            if (projectionParent) {\n                var relativeConstraints_1 = calcRelativeOffset(projectionParent.projection.targetFinal, constraints);\n                eachAxis(function (axis) {\n                    var _a = relativeConstraints_1[axis], min = _a.min, max = _a.max;\n                    constraints[axis] = {\n                        min: isNaN(min) ? undefined : min,\n                        max: isNaN(max) ? undefined : max,\n                    };\n                });\n            }\n        }\n        var momentumAnimations = eachAxis(function (axis) {\n            var _a;\n            if (!shouldDrag(axis, drag, _this.currentDirection)) {\n                return;\n            }\n            var transition = (_a = constraints === null || constraints === void 0 ? void 0 : constraints[axis]) !== null && _a !== void 0 ? _a : {};\n            /**\n             * Overdamp the boundary spring if `dragElastic` is disabled. There's still a frame\n             * of spring animations so we should look into adding a disable spring option to `inertia`.\n             * We could do something here where we affect the `bounceStiffness` and `bounceDamping`\n             * using the value of `dragElastic`.\n             */\n            var bounceStiffness = dragElastic ? 200 : 1000000;\n            var bounceDamping = dragElastic ? 40 : 10000000;\n            var inertia = __assign(__assign({ type: \"inertia\", velocity: dragMomentum ? velocity[axis] : 0, bounceStiffness: bounceStiffness,\n                bounceDamping: bounceDamping, timeConstant: 750, restDelta: 1, restSpeed: 10 }, dragTransition), transition);\n            // If we're not animating on an externally-provided `MotionValue` we can use the\n            // component's animation controls which will handle interactions with whileHover (etc),\n            // otherwise we just have to animate the `MotionValue` itself.\n            return _this.getAxisMotionValue(axis)\n                ? _this.startAxisValueAnimation(axis, inertia)\n                : _this.visualElement.startLayoutAnimation(axis, inertia, isRelative);\n        });\n        // Run all animations and then resolve the new drag constraints.\n        return Promise.all(momentumAnimations).then(function () {\n            var _a, _b;\n            (_b = (_a = _this.props).onDragTransitionEnd) === null || _b === void 0 ? void 0 : _b.call(_a);\n        });\n    };\n    VisualElementDragControls.prototype.stopMotion = function () {\n        var _this = this;\n        eachAxis(function (axis) {\n            var axisValue = _this.getAxisMotionValue(axis);\n            axisValue\n                ? axisValue.stop()\n                : _this.visualElement.stopLayoutAnimation();\n        });\n    };\n    VisualElementDragControls.prototype.startAxisValueAnimation = function (axis, transition) {\n        var axisValue = this.getAxisMotionValue(axis);\n        if (!axisValue)\n            return;\n        var currentValue = axisValue.get();\n        axisValue.set(currentValue);\n        axisValue.set(currentValue); // Set twice to hard-reset velocity\n        return startAnimation(axis, axisValue, 0, transition);\n    };\n    VisualElementDragControls.prototype.scalePoint = function () {\n        var _this = this;\n        var _a = this.props, drag = _a.drag, dragConstraints = _a.dragConstraints;\n        if (!isRefObject(dragConstraints) || !this.constraintsBox)\n            return;\n        // Stop any current animations as there can be some visual glitching if we resize mid animation\n        this.stopMotion();\n        // Record the relative progress of the targetBox relative to the constraintsBox\n        var boxProgress = { x: 0, y: 0 };\n        eachAxis(function (axis) {\n            boxProgress[axis] = calcOrigin(_this.visualElement.projection.target[axis], _this.constraintsBox[axis]);\n        });\n        /**\n         * For each axis, calculate the current progress of the layout axis within the constraints.\n         * Then, using the latest layout and constraints measurements, reposition the new layout axis\n         * proportionally within the constraints.\n         */\n        this.updateLayoutMeasurements();\n        this.resolveDragConstraints();\n        eachAxis(function (axis) {\n            if (!shouldDrag(axis, drag, null))\n                return;\n            // Calculate the position of the targetBox relative to the constraintsBox using the\n            // previously calculated progress\n            var _a = calcPositionFromProgress(_this.visualElement.projection.target[axis], _this.constraintsBox[axis], boxProgress[axis]), min = _a.min, max = _a.max;\n            _this.visualElement.setProjectionTargetAxis(axis, min, max);\n        });\n    };\n    VisualElementDragControls.prototype.mount = function (visualElement) {\n        var _this = this;\n        var element = visualElement.getInstance();\n        /**\n         * Attach a pointerdown event listener on this DOM element to initiate drag tracking.\n         */\n        var stopPointerListener = addPointerEvent(element, \"pointerdown\", function (event) {\n            var _a = _this.props, drag = _a.drag, _b = _a.dragListener, dragListener = _b === void 0 ? true : _b;\n            drag && dragListener && _this.start(event);\n        });\n        /**\n         * Attach a window resize listener to scale the draggable target within its defined\n         * constraints as the window resizes.\n         */\n        var stopResizeListener = addDomEvent(window, \"resize\", function () {\n            _this.scalePoint();\n        });\n        /**\n         * Ensure drag constraints are resolved correctly relative to the dragging element\n         * whenever its layout changes.\n         */\n        var stopLayoutUpdateListener = visualElement.onLayoutUpdate(function () {\n            if (_this.isDragging)\n                _this.resolveDragConstraints();\n        });\n        /**\n         * If the previous component with this same layoutId was dragging at the time\n         * it was unmounted, we want to continue the same gesture on this component.\n         */\n        var prevDragCursor = visualElement.prevDragCursor;\n        if (prevDragCursor) {\n            this.start(lastPointerEvent, { cursorProgress: prevDragCursor });\n        }\n        /**\n         * Return a function that will teardown the drag gesture\n         */\n        return function () {\n            stopPointerListener === null || stopPointerListener === void 0 ? void 0 : stopPointerListener();\n            stopResizeListener === null || stopResizeListener === void 0 ? void 0 : stopResizeListener();\n            stopLayoutUpdateListener === null || stopLayoutUpdateListener === void 0 ? void 0 : stopLayoutUpdateListener();\n            _this.cancelDrag();\n        };\n    };\n    return VisualElementDragControls;\n}());\nfunction shouldDrag(direction, drag, currentDirection) {\n    return ((drag === true || drag === direction) &&\n        (currentDirection === null || currentDirection === direction));\n}\n/**\n * Based on an x/y offset determine the current drag direction. If both axis' offsets are lower\n * than the provided threshold, return `null`.\n *\n * @param offset - The x/y offset from origin.\n * @param lockThreshold - (Optional) - the minimum absolute offset before we can determine a drag direction.\n */\nfunction getCurrentDirection(offset, lockThreshold) {\n    if (lockThreshold === void 0) { lockThreshold = 10; }\n    var direction = null;\n    if (Math.abs(offset.y) > lockThreshold) {\n        direction = \"y\";\n    }\n    else if (Math.abs(offset.x) > lockThreshold) {\n        direction = \"x\";\n    }\n    return direction;\n}\n\nexport { VisualElementDragControls, elementDragControls };\n","import { calcRelativeOffset } from '../../../motion/features/layout/utils.js';\nimport { eachAxis } from '../../../utils/each-axis.js';\nimport { removeBoxTransforms } from '../../../utils/geometry/delta-apply.js';\n\n/**\n * Returns a boolean stating whether or not we converted the projection\n * to relative projection.\n */\nfunction convertToRelativeProjection(visualElement, isLayoutDrag) {\n    if (isLayoutDrag === void 0) { isLayoutDrag = true; }\n    var projectionParent = visualElement.getProjectionParent();\n    if (!projectionParent)\n        return false;\n    var offset;\n    if (isLayoutDrag) {\n        offset = calcRelativeOffset(projectionParent.projection.target, visualElement.projection.target);\n        removeBoxTransforms(offset, projectionParent.getLatestValues());\n    }\n    else {\n        offset = calcRelativeOffset(projectionParent.getLayoutState().layout, visualElement.getLayoutState().layout);\n    }\n    eachAxis(function (axis) {\n        return visualElement.setProjectionTargetAxis(axis, offset[axis].min, offset[axis].max, true);\n    });\n    return true;\n}\n\nexport { convertToRelativeProjection };\n","import { useDrag } from '../../gestures/drag/use-drag.js';\nimport { usePanGesture } from '../../gestures/use-pan-gesture.js';\nimport { makeRenderlessComponent } from '../utils/make-renderless-component.js';\n\nvar drag = {\n    pan: makeRenderlessComponent(usePanGesture),\n    drag: makeRenderlessComponent(useDrag),\n};\n\nexport { drag };\n","import { useRef, useContext, useEffect } from 'react';\nimport { MotionConfigContext } from '../context/MotionConfigContext.js';\nimport { useUnmountEffect } from '../utils/use-unmount-effect.js';\nimport { usePointerEvent } from '../events/use-pointer-event.js';\nimport { PanSession } from './PanSession.js';\n\n/**\n *\n * @param handlers -\n * @param ref -\n *\n * @internalremarks\n * Currently this sets new pan gesture functions every render. The memo route has been explored\n * in the past but ultimately we're still creating new functions every render. An optimisation\n * to explore is creating the pan gestures and loading them into a `ref`.\n *\n * @internal\n */\nfunction usePanGesture(_a) {\n    var onPan = _a.onPan, onPanStart = _a.onPanStart, onPanEnd = _a.onPanEnd, onPanSessionStart = _a.onPanSessionStart, visualElement = _a.visualElement;\n    var hasPanEvents = onPan || onPanStart || onPanEnd || onPanSessionStart;\n    var panSession = useRef(null);\n    var transformPagePoint = useContext(MotionConfigContext).transformPagePoint;\n    var handlers = {\n        onSessionStart: onPanSessionStart,\n        onStart: onPanStart,\n        onMove: onPan,\n        onEnd: function (event, info) {\n            panSession.current = null;\n            onPanEnd && onPanEnd(event, info);\n        },\n    };\n    useEffect(function () {\n        if (panSession.current !== null) {\n            panSession.current.updateHandlers(handlers);\n        }\n    });\n    function onPointerDown(event) {\n        panSession.current = new PanSession(event, handlers, {\n            transformPagePoint: transformPagePoint,\n        });\n    }\n    usePointerEvent(visualElement, \"pointerdown\", hasPanEvents && onPointerDown);\n    useUnmountEffect(function () { return panSession.current && panSession.current.end(); });\n}\n\nexport { usePanGesture };\n","import { __assign } from 'tslib';\nimport { useContext, useEffect } from 'react';\nimport { MotionConfigContext } from '../../context/MotionConfigContext.js';\nimport { VisualElementDragControls } from './VisualElementDragControls.js';\nimport { useConstant } from '../../utils/use-constant.js';\n\n/**\n * A hook that allows an element to be dragged.\n *\n * @internal\n */\nfunction useDrag(props) {\n    var groupDragControls = props.dragControls, visualElement = props.visualElement;\n    var transformPagePoint = useContext(MotionConfigContext).transformPagePoint;\n    var dragControls = useConstant(function () {\n        return new VisualElementDragControls({\n            visualElement: visualElement,\n        });\n    });\n    dragControls.setProps(__assign(__assign({}, props), { transformPagePoint: transformPagePoint }));\n    // If we've been provided a DragControls for manual control over the drag gesture,\n    // subscribe this component to it on mount.\n    useEffect(function () { return groupDragControls && groupDragControls.subscribe(dragControls); }, [dragControls]);\n    // Mount the drag controls with the visualElement\n    useEffect(function () { return dragControls.mount(visualElement); }, []);\n}\n\nexport { useDrag };\n","import { __assign } from 'tslib';\nimport { complex, px } from 'style-value-types';\nimport { mix } from 'popmotion';\nimport { cssVariableRegex } from '../utils/css-variables-conversion.js';\n\nfunction pixelsToPercent(pixels, axis) {\n    return (pixels / (axis.max - axis.min)) * 100;\n}\n/**\n * We always correct borderRadius as a percentage rather than pixels to reduce paints.\n * For example, if you are projecting a box that is 100px wide with a 10px borderRadius\n * into a box that is 200px wide with a 20px borderRadius, that is actually a 10%\n * borderRadius in both states. If we animate between the two in pixels that will trigger\n * a paint each time. If we animate between the two in percentage we'll avoid a paint.\n */\nfunction correctBorderRadius(latest, _layoutState, _a) {\n    var target = _a.target;\n    /**\n     * If latest is a string, if it's a percentage we can return immediately as it's\n     * going to be stretched appropriately. Otherwise, if it's a pixel, convert it to a number.\n     */\n    if (typeof latest === \"string\") {\n        if (px.test(latest)) {\n            latest = parseFloat(latest);\n        }\n        else {\n            return latest;\n        }\n    }\n    /**\n     * If latest is a number, it's a pixel value. We use the current viewportBox to calculate that\n     * pixel value as a percentage of each axis\n     */\n    var x = pixelsToPercent(latest, target.x);\n    var y = pixelsToPercent(latest, target.y);\n    return x + \"% \" + y + \"%\";\n}\nvar varToken = \"_$css\";\nfunction correctBoxShadow(latest, _a) {\n    var delta = _a.delta, treeScale = _a.treeScale;\n    var original = latest;\n    /**\n     * We need to first strip and store CSS variables from the string.\n     */\n    var containsCSSVariables = latest.includes(\"var(\");\n    var cssVariables = [];\n    if (containsCSSVariables) {\n        latest = latest.replace(cssVariableRegex, function (match) {\n            cssVariables.push(match);\n            return varToken;\n        });\n    }\n    var shadow = complex.parse(latest);\n    // TODO: Doesn't support multiple shadows\n    if (shadow.length > 5)\n        return original;\n    var template = complex.createTransformer(latest);\n    var offset = typeof shadow[0] !== \"number\" ? 1 : 0;\n    // Calculate the overall context scale\n    var xScale = delta.x.scale * treeScale.x;\n    var yScale = delta.y.scale * treeScale.y;\n    shadow[0 + offset] /= xScale;\n    shadow[1 + offset] /= yScale;\n    /**\n     * Ideally we'd correct x and y scales individually, but because blur and\n     * spread apply to both we have to take a scale average and apply that instead.\n     * We could potentially improve the outcome of this by incorporating the ratio between\n     * the two scales.\n     */\n    var averageScale = mix(xScale, yScale, 0.5);\n    // Blur\n    if (typeof shadow[2 + offset] === \"number\")\n        shadow[2 + offset] /= averageScale;\n    // Spread\n    if (typeof shadow[3 + offset] === \"number\")\n        shadow[3 + offset] /= averageScale;\n    var output = template(shadow);\n    if (containsCSSVariables) {\n        var i_1 = 0;\n        output = output.replace(varToken, function () {\n            var cssVariable = cssVariables[i_1];\n            i_1++;\n            return cssVariable;\n        });\n    }\n    return output;\n}\nvar borderCorrectionDefinition = {\n    process: correctBorderRadius,\n};\nvar defaultScaleCorrectors = {\n    borderRadius: __assign(__assign({}, borderCorrectionDefinition), { applyTo: [\n            \"borderTopLeftRadius\",\n            \"borderTopRightRadius\",\n            \"borderBottomLeftRadius\",\n            \"borderBottomRightRadius\",\n        ] }),\n    borderTopLeftRadius: borderCorrectionDefinition,\n    borderTopRightRadius: borderCorrectionDefinition,\n    borderBottomLeftRadius: borderCorrectionDefinition,\n    borderBottomRightRadius: borderCorrectionDefinition,\n    boxShadow: {\n        process: correctBoxShadow,\n    },\n};\n\nexport { correctBorderRadius, correctBoxShadow, defaultScaleCorrectors, pixelsToPercent };\n","import { __extends, __rest, __assign, __read } from 'tslib';\nimport * as React from 'react';\nimport { eachAxis } from '../../../utils/each-axis.js';\nimport { startAnimation, getValueTransition } from '../../../animation/utils/transitions.js';\nimport { checkIfParentHasChanged, calcRelativeOffset, tweenAxis } from './utils.js';\nimport { VisibilityAction } from '../../../components/AnimateSharedLayout/types.js';\nimport { usePresence } from '../../../components/AnimatePresence/use-presence.js';\nimport { axisBox } from '../../../utils/geometry/index.js';\nimport { addScaleCorrection } from '../../../render/dom/projection/scale-correction.js';\nimport { defaultScaleCorrectors } from '../../../render/dom/projection/default-scale-correctors.js';\n\nvar progressTarget = 1000;\nvar Animate = /** @class */ (function (_super) {\n    __extends(Animate, _super);\n    function Animate() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * A mutable object that tracks the target viewport box\n         * for the current animation frame.\n         */\n        _this.frameTarget = axisBox();\n        /**\n         * The current animation target, we use this to check whether to start\n         * a new animation or continue the existing one.\n         */\n        _this.currentAnimationTarget = axisBox();\n        /**\n         * Track whether we're animating this axis.\n         */\n        _this.isAnimating = {\n            x: false,\n            y: false,\n        };\n        _this.stopAxisAnimation = {\n            x: undefined,\n            y: undefined,\n        };\n        _this.isAnimatingTree = false;\n        _this.animate = function (target, origin, _a) {\n            if (_a === void 0) { _a = {}; }\n            var originBox = _a.originBox, targetBox = _a.targetBox, visibilityAction = _a.visibilityAction, shouldStackAnimate = _a.shouldStackAnimate, onComplete = _a.onComplete, prevParent = _a.prevParent, config = __rest(_a, [\"originBox\", \"targetBox\", \"visibilityAction\", \"shouldStackAnimate\", \"onComplete\", \"prevParent\"]);\n            var _b = _this.props, visualElement = _b.visualElement, layout = _b.layout;\n            /**\n             * Early return if we've been instructed not to animate this render.\n             */\n            if (shouldStackAnimate === false) {\n                _this.isAnimatingTree = false;\n                return _this.safeToRemove();\n            }\n            /**\n             * Prioritise tree animations\n             */\n            if (_this.isAnimatingTree && shouldStackAnimate !== true) {\n                return;\n            }\n            else if (shouldStackAnimate) {\n                _this.isAnimatingTree = true;\n            }\n            /**\n             * Allow the measured origin (prev bounding box) and target (actual layout) to be\n             * overridden by the provided config.\n             */\n            origin = originBox || origin;\n            target = targetBox || target;\n            /**\n             * If this element has a projecting parent, there's an opportunity to animate\n             * it relatively to that parent rather than relatively to the viewport. This\n             * allows us to add orchestrated animations.\n             */\n            var isRelative = false;\n            var projectionParent = visualElement.getProjectionParent();\n            if (projectionParent) {\n                var prevParentViewportBox = projectionParent.prevViewportBox;\n                var parentLayout = projectionParent.getLayoutState().layout;\n                /**\n                 * If we're being provided a previous parent VisualElement by AnimateSharedLayout\n                 */\n                if (prevParent) {\n                    /**\n                     * If we've been provided an explicit target box it means we're animating back\n                     * to this previous parent. So we can make a relative box by comparing to the previous\n                     * parent's layout\n                     */\n                    if (targetBox) {\n                        parentLayout = prevParent.getLayoutState().layout;\n                    }\n                    /**\n                     * Likewise if we've been provided an explicit origin box it means we're\n                     * animating out from a different element. So we should figure out where that was\n                     * on screen relative to the new parent element.\n                     */\n                    if (originBox &&\n                        !checkIfParentHasChanged(prevParent, projectionParent) &&\n                        prevParent.prevViewportBox) {\n                        prevParentViewportBox = prevParent.prevViewportBox;\n                    }\n                }\n                if (prevParentViewportBox &&\n                    isProvidedCorrectDataForRelativeSharedLayout(prevParent, originBox, targetBox)) {\n                    isRelative = true;\n                    origin = calcRelativeOffset(prevParentViewportBox, origin);\n                    target = calcRelativeOffset(parentLayout, target);\n                }\n            }\n            var boxHasMoved = hasMoved(origin, target);\n            var animations = eachAxis(function (axis) {\n                var _a, _b;\n                /**\n                 * If layout is set to \"position\", we can resize the origin box based on the target\n                 * box and only animate its position.\n                 */\n                if (layout === \"position\") {\n                    var targetLength = target[axis].max - target[axis].min;\n                    origin[axis].max = origin[axis].min + targetLength;\n                }\n                if (visualElement.projection.isTargetLocked) {\n                    return;\n                }\n                else if (visibilityAction !== undefined) {\n                    visualElement.setVisibility(visibilityAction === VisibilityAction.Show);\n                }\n                else if (boxHasMoved) {\n                    // If the box has moved, animate between it's current visual state and its\n                    // final state\n                    return _this.animateAxis(axis, target[axis], origin[axis], __assign(__assign({}, config), { isRelative: isRelative }));\n                }\n                else {\n                    (_b = (_a = _this.stopAxisAnimation)[axis]) === null || _b === void 0 ? void 0 : _b.call(_a);\n                    // If the box has remained in the same place, immediately set the axis target\n                    // to the final desired state\n                    return visualElement.setProjectionTargetAxis(axis, target[axis].min, target[axis].max, isRelative);\n                }\n            });\n            // Force a render to ensure there's no flash of uncorrected bounding box.\n            visualElement.syncRender();\n            /**\n             * If this visualElement isn't present (ie it's been removed from the tree by the user but\n             * kept in by the tree by AnimatePresence) then call safeToRemove when all axis animations\n             * have successfully finished.\n             */\n            return Promise.all(animations).then(function () {\n                _this.isAnimatingTree = false;\n                onComplete && onComplete();\n                visualElement.notifyLayoutAnimationComplete();\n            });\n        };\n        return _this;\n    }\n    Animate.prototype.componentDidMount = function () {\n        var _this = this;\n        var visualElement = this.props.visualElement;\n        visualElement.animateMotionValue = startAnimation;\n        visualElement.enableLayoutProjection();\n        this.unsubLayoutReady = visualElement.onLayoutUpdate(this.animate);\n        visualElement.layoutSafeToRemove = function () { return _this.safeToRemove(); };\n        addScaleCorrection(defaultScaleCorrectors);\n    };\n    Animate.prototype.componentWillUnmount = function () {\n        var _this = this;\n        this.unsubLayoutReady();\n        eachAxis(function (axis) { var _a, _b; return (_b = (_a = _this.stopAxisAnimation)[axis]) === null || _b === void 0 ? void 0 : _b.call(_a); });\n    };\n    /**\n     * TODO: This manually performs animations on the visualElement's layout progress\n     * values. It'd be preferable to amend the startLayoutAxisAnimation\n     * API to accept more custom animations like this.\n     */\n    Animate.prototype.animateAxis = function (axis, target, origin, _a) {\n        var _this = this;\n        var _b, _c;\n        var _d = _a === void 0 ? {} : _a, transition = _d.transition, isRelative = _d.isRelative;\n        /**\n         * If we're not animating to a new target, don't run this animation\n         */\n        if (this.isAnimating[axis] &&\n            axisIsEqual(target, this.currentAnimationTarget[axis])) {\n            return;\n        }\n        (_c = (_b = this.stopAxisAnimation)[axis]) === null || _c === void 0 ? void 0 : _c.call(_b);\n        this.isAnimating[axis] = true;\n        var visualElement = this.props.visualElement;\n        var frameTarget = this.frameTarget[axis];\n        var layoutProgress = visualElement.getProjectionAnimationProgress()[axis];\n        /**\n         * Set layout progress back to 0. We set it twice to hard-reset any velocity that might\n         * be re-incoporated into a subsequent spring animation.\n         */\n        layoutProgress.clearListeners();\n        layoutProgress.set(0);\n        layoutProgress.set(0);\n        /**\n         * Create an animation function to run once per frame. This will tween the visual bounding box from\n         * origin to target using the latest progress value.\n         */\n        var frame = function () {\n            // Convert the latest layoutProgress, which is a value from 0-1000, into a 0-1 progress\n            var p = layoutProgress.get() / progressTarget;\n            // Tween the axis and update the visualElement with the latest values\n            tweenAxis(frameTarget, origin, target, p);\n            visualElement.setProjectionTargetAxis(axis, frameTarget.min, frameTarget.max, isRelative);\n        };\n        // Synchronously run a frame to ensure there's no flash of the uncorrected bounding box.\n        frame();\n        // Create a function to stop animation on this specific axis\n        var unsubscribeProgress = layoutProgress.onChange(frame);\n        this.stopAxisAnimation[axis] = function () {\n            _this.isAnimating[axis] = false;\n            layoutProgress.stop();\n            unsubscribeProgress();\n        };\n        this.currentAnimationTarget[axis] = target;\n        var layoutTransition = transition ||\n            visualElement.getDefaultTransition() ||\n            defaultLayoutTransition;\n        // Start the animation on this axis\n        var animation = startAnimation(axis === \"x\" ? \"layoutX\" : \"layoutY\", layoutProgress, progressTarget, layoutTransition && getValueTransition(layoutTransition, \"layout\")).then(this.stopAxisAnimation[axis]);\n        return animation;\n    };\n    Animate.prototype.safeToRemove = function () {\n        var _a, _b;\n        (_b = (_a = this.props).safeToRemove) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    Animate.prototype.render = function () {\n        return null;\n    };\n    return Animate;\n}(React.Component));\nfunction AnimateLayoutContextProvider(props) {\n    var _a = __read(usePresence(), 2), safeToRemove = _a[1];\n    return React.createElement(Animate, __assign({}, props, { safeToRemove: safeToRemove }));\n}\nfunction hasMoved(a, b) {\n    return (!isZeroBox(a) &&\n        !isZeroBox(b) &&\n        (!axisIsEqual(a.x, b.x) || !axisIsEqual(a.y, b.y)));\n}\nvar zeroAxis = { min: 0, max: 0 };\nfunction isZeroBox(a) {\n    return axisIsEqual(a.x, zeroAxis) && axisIsEqual(a.y, zeroAxis);\n}\nfunction axisIsEqual(a, b) {\n    return a.min === b.min && a.max === b.max;\n}\nvar defaultLayoutTransition = {\n    duration: 0.45,\n    ease: [0.4, 0, 0.1, 1],\n};\nfunction isProvidedCorrectDataForRelativeSharedLayout(prevParent, originBox, targetBox) {\n    return prevParent || (!prevParent && !(originBox || targetBox));\n}\n\nexport { AnimateLayoutContextProvider };\n","import { __extends, __assign } from 'tslib';\nimport React__default, { useContext } from 'react';\nimport { isSharedLayout, SharedLayoutContext, FramerTreeLayoutContext } from '../../../context/SharedLayoutContext.js';\nimport { snapshotViewportBox } from '../../../render/dom/projection/utils.js';\n\n/**\n * This component is responsible for scheduling the measuring of the motion component\n */\nvar Measure = /** @class */ (function (_super) {\n    __extends(Measure, _super);\n    function Measure() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * If this is a child of a SyncContext, register the VisualElement with it on mount.\n     */\n    Measure.prototype.componentDidMount = function () {\n        var _a = this.props, syncLayout = _a.syncLayout, framerSyncLayout = _a.framerSyncLayout, visualElement = _a.visualElement;\n        isSharedLayout(syncLayout) && syncLayout.register(visualElement);\n        isSharedLayout(framerSyncLayout) &&\n            framerSyncLayout.register(visualElement);\n        visualElement.onUnmount(function () {\n            if (isSharedLayout(syncLayout)) {\n                syncLayout.remove(visualElement);\n            }\n            if (isSharedLayout(framerSyncLayout)) {\n                framerSyncLayout.remove(visualElement);\n            }\n        });\n    };\n    /**\n     * If this is a child of a SyncContext, notify it that it needs to re-render. It will then\n     * handle the snapshotting.\n     *\n     * If it is stand-alone component, add it to the batcher.\n     */\n    Measure.prototype.getSnapshotBeforeUpdate = function () {\n        var _a = this.props, syncLayout = _a.syncLayout, visualElement = _a.visualElement;\n        if (isSharedLayout(syncLayout)) {\n            syncLayout.syncUpdate();\n        }\n        else {\n            snapshotViewportBox(visualElement);\n            syncLayout.add(visualElement);\n        }\n        return null;\n    };\n    Measure.prototype.componentDidUpdate = function () {\n        var syncLayout = this.props.syncLayout;\n        if (!isSharedLayout(syncLayout))\n            syncLayout.flush();\n    };\n    Measure.prototype.render = function () {\n        return null;\n    };\n    return Measure;\n}(React__default.Component));\nfunction MeasureContextProvider(props) {\n    var syncLayout = useContext(SharedLayoutContext);\n    var framerSyncLayout = useContext(FramerTreeLayoutContext);\n    return (React__default.createElement(Measure, __assign({}, props, { syncLayout: syncLayout, framerSyncLayout: framerSyncLayout })));\n}\n\nexport { MeasureContextProvider };\n","import { AnimateLayoutContextProvider } from './Animate.js';\nimport { MeasureContextProvider } from './Measure.js';\n\nvar layoutAnimations = {\n    measureLayout: MeasureContextProvider,\n    layoutAnimation: AnimateLayoutContextProvider,\n};\n\nexport { layoutAnimations };\n","import { __assign } from 'tslib';\nimport { createMotionComponent } from '../../motion/index.js';\nimport { createMotionProxy } from './motion-proxy.js';\nimport { createDomMotionConfig } from './utils/create-config.js';\nimport { gestureAnimations } from '../../motion/features/gestures.js';\nimport { animations } from '../../motion/features/animations.js';\nimport { drag } from '../../motion/features/drag.js';\nimport { layoutAnimations } from '../../motion/features/layout/index.js';\nimport { createDomVisualElement } from './create-visual-element.js';\n\nvar featureBundle = __assign(__assign(__assign(__assign({}, animations), gestureAnimations), drag), layoutAnimations);\n/**\n * HTML & SVG components, optimised for use with gestures and animation. These can be used as\n * drop-in replacements for any HTML & SVG component, all CSS & SVG properties are supported.\n *\n * @public\n */\nvar motion = /*@__PURE__*/ createMotionProxy(function (Component, config) {\n    return createDomMotionConfig(Component, config, featureBundle, createDomVisualElement);\n});\n/**\n * Create a DOM `motion` component with the provided string. This is primarily intended\n * as a full alternative to `motion` for consumers who have to support environments that don't\n * support `Proxy`.\n *\n * ```javascript\n * import { createDomMotionComponent } from \"framer-motion\"\n *\n * const motion = {\n *   div: createDomMotionComponent('div')\n * }\n * ```\n *\n * @public\n */\nfunction createDomMotionComponent(key) {\n    return createMotionComponent(createDomMotionConfig(key, { forwardMotionProps: false }, featureBundle, createDomVisualElement));\n}\n\nexport { createDomMotionComponent, motion };\n","import { convertBoundingBoxToAxisBox, transformBoundingBox } from '../../../utils/geometry/index.js';\n\n/**\n * Measure and return the element bounding box.\n *\n * We convert the box into an AxisBox2D to make it easier to work with each axis\n * individually and programmatically.\n *\n * This function optionally accepts a transformPagePoint function which allows us to compensate\n * for, for instance, measuring the element within a scaled plane like a Framer devivce preview component.\n */\nfunction getBoundingBox(element, transformPagePoint) {\n    var box = element.getBoundingClientRect();\n    return convertBoundingBoxToAxisBox(transformBoundingBox(box, transformPagePoint));\n}\n\nexport { getBoundingBox };\n","import { __rest, __assign, __read } from 'tslib';\nimport { invariant } from 'hey-listen';\n\nfunction isCSSVariable(value) {\n    return typeof value === \"string\" && value.startsWith(\"var(--\");\n}\n/**\n * Parse Framer's special CSS variable format into a CSS token and a fallback.\n *\n * ```\n * `var(--foo, #fff)` => [`--foo`, '#fff']\n * ```\n *\n * @param current\n */\nvar cssVariableRegex = /var\\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\\)/;\nfunction parseCSSVariable(current) {\n    var match = cssVariableRegex.exec(current);\n    if (!match)\n        return [,];\n    var _a = __read(match, 3), token = _a[1], fallback = _a[2];\n    return [token, fallback];\n}\nvar maxDepth = 4;\nfunction getVariableValue(current, element, depth) {\n    if (depth === void 0) { depth = 1; }\n    invariant(depth <= maxDepth, \"Max CSS variable fallback depth detected in property \\\"\" + current + \"\\\". This may indicate a circular fallback dependency.\");\n    var _a = __read(parseCSSVariable(current), 2), token = _a[0], fallback = _a[1];\n    // No CSS variable detected\n    if (!token)\n        return;\n    // Attempt to read this CSS variable off the element\n    var resolved = window.getComputedStyle(element).getPropertyValue(token);\n    if (resolved) {\n        return resolved.trim();\n    }\n    else if (isCSSVariable(fallback)) {\n        // The fallback might itself be a CSS variable, in which case we attempt to resolve it too.\n        return getVariableValue(fallback, element, depth + 1);\n    }\n    else {\n        return fallback;\n    }\n}\n/**\n * Resolve CSS variables from\n *\n * @internal\n */\nfunction resolveCSSVariables(visualElement, _a, transitionEnd) {\n    var _b;\n    var target = __rest(_a, []);\n    var element = visualElement.getInstance();\n    if (!(element instanceof HTMLElement))\n        return { target: target, transitionEnd: transitionEnd };\n    // If `transitionEnd` isn't `undefined`, clone it. We could clone `target` and `transitionEnd`\n    // only if they change but I think this reads clearer and this isn't a performance-critical path.\n    if (transitionEnd) {\n        transitionEnd = __assign({}, transitionEnd);\n    }\n    // Go through existing `MotionValue`s and ensure any existing CSS variables are resolved\n    visualElement.forEachValue(function (value) {\n        var current = value.get();\n        if (!isCSSVariable(current))\n            return;\n        var resolved = getVariableValue(current, element);\n        if (resolved)\n            value.set(resolved);\n    });\n    // Cycle through every target property and resolve CSS variables. Currently\n    // we only read single-var properties like `var(--foo)`, not `calc(var(--foo) + 20px)`\n    for (var key in target) {\n        var current = target[key];\n        if (!isCSSVariable(current))\n            continue;\n        var resolved = getVariableValue(current, element);\n        if (!resolved)\n            continue;\n        // Clone target if it hasn't already been\n        target[key] = resolved;\n        // If the user hasn't already set this key on `transitionEnd`, set it to the unresolved\n        // CSS variable. This will ensure that after the animation the component will reflect\n        // changes in the value of the CSS variable.\n        if (transitionEnd)\n            (_b = transitionEnd[key]) !== null && _b !== void 0 ? _b : (transitionEnd[key] = current);\n    }\n    return { target: target, transitionEnd: transitionEnd };\n}\n\nexport { cssVariableRegex, parseCSSVariable, resolveCSSVariables };\n","import { filter, complex } from 'style-value-types';\nimport { getDefaultValueType } from './defaults.js';\n\nfunction getAnimatableNone(key, value) {\n    var _a;\n    var defaultValueType = getDefaultValueType(key);\n    if (defaultValueType !== filter)\n        defaultValueType = complex;\n    // If value is not recognised as animatable, ie \"none\", create an animatable version origin based on the target\n    return (_a = defaultValueType.getAnimatableNone) === null || _a === void 0 ? void 0 : _a.call(defaultValueType, value);\n}\n\nexport { getAnimatableNone };\n","import { __assign } from 'tslib';\nimport { color, filter } from 'style-value-types';\nimport { numberValueTypes } from './number.js';\n\n/**\n * A map of default value types for common values\n */\nvar defaultValueTypes = __assign(__assign({}, numberValueTypes), { \n    // Color props\n    color: color, backgroundColor: color, outlineColor: color, fill: color, stroke: color, \n    // Border props\n    borderColor: color, borderTopColor: color, borderRightColor: color, borderBottomColor: color, borderLeftColor: color, filter: filter, WebkitFilter: filter });\n/**\n * Gets the default ValueType for the provided value key\n */\nvar getDefaultValueType = function (key) { return defaultValueTypes[key]; };\n\nexport { defaultValueTypes, getDefaultValueType };\n","import { number, px, percent, degrees, vw, vh } from 'style-value-types';\nimport { testValueType } from './test.js';\nimport { auto } from './type-auto.js';\n\n/**\n * A list of value types commonly used for dimensions\n */\nvar dimensionValueTypes = [number, px, percent, degrees, vw, vh, auto];\n/**\n * Tests a dimensional value against the list of dimension ValueTypes\n */\nvar findDimensionValueType = function (v) {\n    return dimensionValueTypes.find(testValueType(v));\n};\n\nexport { dimensionValueTypes, findDimensionValueType };\n","/**\n * ValueType for \"auto\"\n */\nvar auto = {\n    test: function (v) { return v === \"auto\"; },\n    parse: function (v) { return v; },\n};\n\nexport { auto };\n","/**\n * Tests a provided value against a ValueType\n */\nvar testValueType = function (v) { return function (type) { return type.test(v); }; };\n\nexport { testValueType };\n","function shallowCompare(next, prev) {\n    if (!Array.isArray(prev))\n        return false;\n    var prevLength = prev.length;\n    if (prevLength !== next.length)\n        return false;\n    for (var i = 0; i < prevLength; i++) {\n        if (prev[i] !== next[i])\n            return false;\n    }\n    return true;\n}\n\nexport { shallowCompare };\n","import { __read, __rest, __assign } from 'tslib';\nimport { startAnimation } from '../../animation/utils/transitions.js';\nimport { setTarget } from './setters.js';\nimport { resolveVariant } from './variants.js';\n\n/**\n * @internal\n */\nfunction animateVisualElement(visualElement, definition, options) {\n    if (options === void 0) { options = {}; }\n    visualElement.notifyAnimationStart();\n    var animation;\n    if (Array.isArray(definition)) {\n        var animations = definition.map(function (variant) {\n            return animateVariant(visualElement, variant, options);\n        });\n        animation = Promise.all(animations);\n    }\n    else if (typeof definition === \"string\") {\n        animation = animateVariant(visualElement, definition, options);\n    }\n    else {\n        var resolvedDefinition = typeof definition === \"function\"\n            ? resolveVariant(visualElement, definition, options.custom)\n            : definition;\n        animation = animateTarget(visualElement, resolvedDefinition, options);\n    }\n    return animation.then(function () {\n        return visualElement.notifyAnimationComplete(definition);\n    });\n}\nfunction animateVariant(visualElement, variant, options) {\n    var _a;\n    if (options === void 0) { options = {}; }\n    var resolved = resolveVariant(visualElement, variant, options.custom);\n    var _b = (resolved || {}).transition, transition = _b === void 0 ? visualElement.getDefaultTransition() || {} : _b;\n    if (options.transitionOverride) {\n        transition = options.transitionOverride;\n    }\n    /**\n     * If we have a variant, create a callback that runs it as an animation.\n     * Otherwise, we resolve a Promise immediately for a composable no-op.\n     */\n    var getAnimation = resolved\n        ? function () { return animateTarget(visualElement, resolved, options); }\n        : function () { return Promise.resolve(); };\n    /**\n     * If we have children, create a callback that runs all their animations.\n     * Otherwise, we resolve a Promise immediately for a composable no-op.\n     */\n    var getChildAnimations = ((_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.size)\n        ? function (forwardDelay) {\n            if (forwardDelay === void 0) { forwardDelay = 0; }\n            var _a = transition.delayChildren, delayChildren = _a === void 0 ? 0 : _a, staggerChildren = transition.staggerChildren, staggerDirection = transition.staggerDirection;\n            return animateChildren(visualElement, variant, delayChildren + forwardDelay, staggerChildren, staggerDirection, options);\n        }\n        : function () { return Promise.resolve(); };\n    /**\n     * If the transition explicitly defines a \"when\" option, we need to resolve either\n     * this animation or all children animations before playing the other.\n     */\n    var when = transition.when;\n    if (when) {\n        var _c = __read(when === \"beforeChildren\"\n            ? [getAnimation, getChildAnimations]\n            : [getChildAnimations, getAnimation], 2), first = _c[0], last = _c[1];\n        return first().then(last);\n    }\n    else {\n        return Promise.all([getAnimation(), getChildAnimations(options.delay)]);\n    }\n}\n/**\n * @internal\n */\nfunction animateTarget(visualElement, definition, _a) {\n    var _b;\n    var _c = _a === void 0 ? {} : _a, _d = _c.delay, delay = _d === void 0 ? 0 : _d, transitionOverride = _c.transitionOverride, type = _c.type;\n    var _e = visualElement.makeTargetAnimatable(definition), _f = _e.transition, transition = _f === void 0 ? visualElement.getDefaultTransition() : _f, transitionEnd = _e.transitionEnd, target = __rest(_e, [\"transition\", \"transitionEnd\"]);\n    if (transitionOverride)\n        transition = transitionOverride;\n    var animations = [];\n    var animationTypeState = type && ((_b = visualElement.animationState) === null || _b === void 0 ? void 0 : _b.getState()[type]);\n    for (var key in target) {\n        var value = visualElement.getValue(key);\n        var valueTarget = target[key];\n        if (!value ||\n            valueTarget === undefined ||\n            (animationTypeState &&\n                shouldBlockAnimation(animationTypeState, key))) {\n            continue;\n        }\n        var animation = startAnimation(key, value, valueTarget, __assign({ delay: delay }, transition));\n        animations.push(animation);\n    }\n    return Promise.all(animations).then(function () {\n        transitionEnd && setTarget(visualElement, transitionEnd);\n    });\n}\nfunction animateChildren(visualElement, variant, delayChildren, staggerChildren, staggerDirection, options) {\n    if (delayChildren === void 0) { delayChildren = 0; }\n    if (staggerChildren === void 0) { staggerChildren = 0; }\n    if (staggerDirection === void 0) { staggerDirection = 1; }\n    var animations = [];\n    var maxStaggerDuration = (visualElement.variantChildren.size - 1) * staggerChildren;\n    var generateStaggerDuration = staggerDirection === 1\n        ? function (i) {\n            if (i === void 0) { i = 0; }\n            return i * staggerChildren;\n        }\n        : function (i) {\n            if (i === void 0) { i = 0; }\n            return maxStaggerDuration - i * staggerChildren;\n        };\n    Array.from(visualElement.variantChildren)\n        .sort(sortByTreeOrder)\n        .forEach(function (child, i) {\n        animations.push(animateVariant(child, variant, __assign(__assign({}, options), { delay: delayChildren + generateStaggerDuration(i) })).then(function () { return child.notifyAnimationComplete(variant); }));\n    });\n    return Promise.all(animations);\n}\nfunction stopAnimation(visualElement) {\n    visualElement.forEachValue(function (value) { return value.stop(); });\n}\nfunction sortByTreeOrder(a, b) {\n    return a.sortNodePosition(b);\n}\n/**\n * Decide whether we should block this animation. Previously, we achieved this\n * just by checking whether the key was listed in protectedKeys, but this\n * posed problems if an animation was triggered by afterChildren and protectedKeys\n * had been set to true in the meantime.\n */\nfunction shouldBlockAnimation(_a, key) {\n    var protectedKeys = _a.protectedKeys, needsAnimating = _a.needsAnimating;\n    var shouldBlock = protectedKeys.hasOwnProperty(key) && needsAnimating[key] !== true;\n    needsAnimating[key] = false;\n    return shouldBlock;\n}\n\nexport { animateVisualElement, sortByTreeOrder, stopAnimation };\n","import { __spreadArray, __read, __assign, __rest } from 'tslib';\nimport { isAnimationControls } from '../../animation/utils/is-animation-controls.js';\nimport { isKeyframesTarget } from '../../animation/utils/is-keyframes-target.js';\nimport { shallowCompare } from '../../utils/shallow-compare.js';\nimport { animateVisualElement } from './animation.js';\nimport { AnimationType } from './types.js';\nimport { isVariantLabels, resolveVariant, isVariantLabel } from './variants.js';\n\nvar variantPriorityOrder = [\n    AnimationType.Animate,\n    AnimationType.Hover,\n    AnimationType.Tap,\n    AnimationType.Drag,\n    AnimationType.Focus,\n    AnimationType.Exit,\n];\nvar reversePriorityOrder = __spreadArray([], __read(variantPriorityOrder)).reverse();\nvar numAnimationTypes = variantPriorityOrder.length;\nfunction animateList(visualElement) {\n    return function (animations) {\n        return Promise.all(animations.map(function (_a) {\n            var animation = _a.animation, options = _a.options;\n            return animateVisualElement(visualElement, animation, options);\n        }));\n    };\n}\nfunction createAnimationState(visualElement) {\n    var animate = animateList(visualElement);\n    var state = createState();\n    var allAnimatedKeys = {};\n    var isInitialRender = true;\n    /**\n     * This function will be used to reduce the animation definitions for\n     * each active animation type into an object of resolved values for it.\n     */\n    var buildResolvedTypeValues = function (acc, definition) {\n        var resolved = resolveVariant(visualElement, definition);\n        if (resolved) {\n            resolved.transition; var transitionEnd = resolved.transitionEnd, target = __rest(resolved, [\"transition\", \"transitionEnd\"]);\n            acc = __assign(__assign(__assign({}, acc), target), transitionEnd);\n        }\n        return acc;\n    };\n    function isAnimated(key) {\n        return allAnimatedKeys[key] !== undefined;\n    }\n    /**\n     * This just allows us to inject mocked animation functions\n     * @internal\n     */\n    function setAnimateFunction(makeAnimator) {\n        animate = makeAnimator(visualElement);\n    }\n    /**\n     * When we receive new props, we need to:\n     * 1. Create a list of protected keys for each type. This is a directory of\n     *    value keys that are currently being \"handled\" by types of a higher priority\n     *    so that whenever an animation is played of a given type, these values are\n     *    protected from being animated.\n     * 2. Determine if an animation type needs animating.\n     * 3. Determine if any values have been removed from a type and figure out\n     *    what to animate those to.\n     */\n    function animateChanges(options, changedActiveType) {\n        var _a;\n        var props = visualElement.getProps();\n        var context = visualElement.getVariantContext(true) || {};\n        /**\n         * A list of animations that we'll build into as we iterate through the animation\n         * types. This will get executed at the end of the function.\n         */\n        var animations = [];\n        /**\n         * Keep track of which values have been removed. Then, as we hit lower priority\n         * animation types, we can check if they contain removed values and animate to that.\n         */\n        var removedKeys = new Set();\n        /**\n         * A dictionary of all encountered keys. This is an object to let us build into and\n         * copy it without iteration. Each time we hit an animation type we set its protected\n         * keys - the keys its not allowed to animate - to the latest version of this object.\n         */\n        var encounteredKeys = {};\n        /**\n         * If a variant has been removed at a given index, and this component is controlling\n         * variant animations, we want to ensure lower-priority variants are forced to animate.\n         */\n        var removedVariantIndex = Infinity;\n        var _loop_1 = function (i) {\n            var type = reversePriorityOrder[i];\n            var typeState = state[type];\n            var prop = (_a = props[type]) !== null && _a !== void 0 ? _a : context[type];\n            var propIsVariant = isVariantLabel(prop);\n            /**\n             * If this type has *just* changed isActive status, set activeDelta\n             * to that status. Otherwise set to null.\n             */\n            var activeDelta = type === changedActiveType ? typeState.isActive : null;\n            if (activeDelta === false)\n                removedVariantIndex = i;\n            /**\n             * If this prop is an inherited variant, rather than been set directly on the\n             * component itself, we want to make sure we allow the parent to trigger animations.\n             *\n             * TODO: Can probably change this to a !isControllingVariants check\n             */\n            var isInherited = prop === context[type] && prop !== props[type] && propIsVariant;\n            /**\n             *\n             */\n            if (isInherited &&\n                isInitialRender &&\n                visualElement.manuallyAnimateOnMount) {\n                isInherited = false;\n            }\n            /**\n             * Set all encountered keys so far as the protected keys for this type. This will\n             * be any key that has been animated or otherwise handled by active, higher-priortiy types.\n             */\n            typeState.protectedKeys = __assign({}, encounteredKeys);\n            // Check if we can skip analysing this prop early\n            if (\n            // If it isn't active and hasn't *just* been set as inactive\n            (!typeState.isActive && activeDelta === null) ||\n                // If we didn't and don't have any defined prop for this animation type\n                (!prop && !typeState.prevProp) ||\n                // Or if the prop doesn't define an animation\n                isAnimationControls(prop) ||\n                typeof prop === \"boolean\") {\n                return \"continue\";\n            }\n            /**\n             * As we go look through the values defined on this type, if we detect\n             * a changed value or a value that was removed in a higher priority, we set\n             * this to true and add this prop to the animation list.\n             */\n            var shouldAnimateType = variantsHaveChanged(typeState.prevProp, prop) ||\n                // If we're making this variant active, we want to always make it active\n                (type === changedActiveType &&\n                    typeState.isActive &&\n                    !isInherited &&\n                    propIsVariant) ||\n                // If we removed a higher-priority variant (i is in reverse order)\n                (i > removedVariantIndex && propIsVariant);\n            /**\n             * As animations can be set as variant lists, variants or target objects, we\n             * coerce everything to an array if it isn't one already\n             */\n            var definitionList = Array.isArray(prop) ? prop : [prop];\n            /**\n             * Build an object of all the resolved values. We'll use this in the subsequent\n             * animateChanges calls to determine whether a value has changed.\n             */\n            var resolvedValues = definitionList.reduce(buildResolvedTypeValues, {});\n            if (activeDelta === false)\n                resolvedValues = {};\n            /**\n             * Now we need to loop through all the keys in the prev prop and this prop,\n             * and decide:\n             * 1. If the value has changed, and needs animating\n             * 2. If it has been removed, and needs adding to the removedKeys set\n             * 3. If it has been removed in a higher priority type and needs animating\n             * 4. If it hasn't been removed in a higher priority but hasn't changed, and\n             *    needs adding to the type's protectedKeys list.\n             */\n            var _b = typeState.prevResolvedValues, prevResolvedValues = _b === void 0 ? {} : _b;\n            var allKeys = __assign(__assign({}, prevResolvedValues), resolvedValues);\n            var markToAnimate = function (key) {\n                shouldAnimateType = true;\n                removedKeys.delete(key);\n                typeState.needsAnimating[key] = true;\n            };\n            for (var key in allKeys) {\n                var next = resolvedValues[key];\n                var prev = prevResolvedValues[key];\n                // If we've already handled this we can just skip ahead\n                if (encounteredKeys.hasOwnProperty(key))\n                    continue;\n                /**\n                 * If the value has changed, we probably want to animate it.\n                 */\n                if (next !== prev) {\n                    /**\n                     * If both values are keyframes, we need to shallow compare them to\n                     * detect whether any value has changed. If it has, we animate it.\n                     */\n                    if (isKeyframesTarget(next) && isKeyframesTarget(prev)) {\n                        if (!shallowCompare(next, prev)) {\n                            markToAnimate(key);\n                        }\n                        else {\n                            /**\n                             * If it hasn't changed, we want to ensure it doesn't animate by\n                             * adding it to the list of protected keys.\n                             */\n                            typeState.protectedKeys[key] = true;\n                        }\n                    }\n                    else if (next !== undefined) {\n                        // If next is defined and doesn't equal prev, it needs animating\n                        markToAnimate(key);\n                    }\n                    else {\n                        // If it's undefined, it's been removed.\n                        removedKeys.add(key);\n                    }\n                }\n                else if (next !== undefined && removedKeys.has(key)) {\n                    /**\n                     * If next hasn't changed and it isn't undefined, we want to check if it's\n                     * been removed by a higher priority\n                     */\n                    markToAnimate(key);\n                }\n                else {\n                    /**\n                     * If it hasn't changed, we add it to the list of protected values\n                     * to ensure it doesn't get animated.\n                     */\n                    typeState.protectedKeys[key] = true;\n                }\n            }\n            /**\n             * Update the typeState so next time animateChanges is called we can compare the\n             * latest prop and resolvedValues to these.\n             */\n            typeState.prevProp = prop;\n            typeState.prevResolvedValues = resolvedValues;\n            /**\n             *\n             */\n            if (typeState.isActive) {\n                encounteredKeys = __assign(__assign({}, encounteredKeys), resolvedValues);\n            }\n            if (isInitialRender && visualElement.blockInitialAnimation) {\n                shouldAnimateType = false;\n            }\n            /**\n             * If this is an inherited prop we want to hard-block animations\n             * TODO: Test as this should probably still handle animations triggered\n             * by removed values?\n             */\n            if (shouldAnimateType && !isInherited) {\n                animations.push.apply(animations, __spreadArray([], __read(definitionList.map(function (animation) { return ({\n                    animation: animation,\n                    options: __assign({ type: type }, options),\n                }); }))));\n            }\n        };\n        /**\n         * Iterate through all animation types in reverse priority order. For each, we want to\n         * detect which values it's handling and whether or not they've changed (and therefore\n         * need to be animated). If any values have been removed, we want to detect those in\n         * lower priority props and flag for animation.\n         */\n        for (var i = 0; i < numAnimationTypes; i++) {\n            _loop_1(i);\n        }\n        allAnimatedKeys = __assign({}, encounteredKeys);\n        /**\n         * If there are some removed value that haven't been dealt with,\n         * we need to create a new animation that falls back either to the value\n         * defined in the style prop, or the last read value.\n         */\n        if (removedKeys.size) {\n            var fallbackAnimation_1 = {};\n            removedKeys.forEach(function (key) {\n                var fallbackTarget = visualElement.getBaseTarget(key);\n                if (fallbackTarget !== undefined) {\n                    fallbackAnimation_1[key] = fallbackTarget;\n                }\n            });\n            animations.push({ animation: fallbackAnimation_1 });\n        }\n        var shouldAnimate = Boolean(animations.length);\n        if (isInitialRender &&\n            props.initial === false &&\n            !visualElement.manuallyAnimateOnMount) {\n            shouldAnimate = false;\n        }\n        isInitialRender = false;\n        return shouldAnimate ? animate(animations) : Promise.resolve();\n    }\n    /**\n     * Change whether a certain animation type is active.\n     */\n    function setActive(type, isActive, options) {\n        var _a;\n        // If the active state hasn't changed, we can safely do nothing here\n        if (state[type].isActive === isActive)\n            return Promise.resolve();\n        // Propagate active change to children\n        (_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.forEach(function (child) { var _a; return (_a = child.animationState) === null || _a === void 0 ? void 0 : _a.setActive(type, isActive); });\n        state[type].isActive = isActive;\n        return animateChanges(options, type);\n    }\n    return {\n        isAnimated: isAnimated,\n        animateChanges: animateChanges,\n        setActive: setActive,\n        setAnimateFunction: setAnimateFunction,\n        getState: function () { return state; },\n    };\n}\nfunction variantsHaveChanged(prev, next) {\n    if (typeof next === \"string\") {\n        return next !== prev;\n    }\n    else if (isVariantLabels(next)) {\n        return !shallowCompare(next, prev);\n    }\n    return false;\n}\nfunction createTypeState(isActive) {\n    if (isActive === void 0) { isActive = false; }\n    return {\n        isActive: isActive,\n        protectedKeys: {},\n        needsAnimating: {},\n        prevResolvedValues: {},\n    };\n}\nfunction createState() {\n    var _a;\n    return _a = {},\n        _a[AnimationType.Animate] = createTypeState(true),\n        _a[AnimationType.Hover] = createTypeState(),\n        _a[AnimationType.Tap] = createTypeState(),\n        _a[AnimationType.Drag] = createTypeState(),\n        _a[AnimationType.Focus] = createTypeState(),\n        _a[AnimationType.Exit] = createTypeState(),\n        _a;\n}\n\nexport { createAnimationState, variantPriorityOrder, variantsHaveChanged };\n","function isDraggable(visualElement) {\n    var _a = visualElement.getProps(), drag = _a.drag, _dragX = _a._dragX;\n    return drag && !_dragX;\n}\n\nexport { isDraggable };\n","import { __spreadArray, __read } from 'tslib';\nimport { color, complex } from 'style-value-types';\nimport { dimensionValueTypes } from './dimensions.js';\nimport { testValueType } from './test.js';\n\n/**\n * A list of all ValueTypes\n */\nvar valueTypes = __spreadArray(__spreadArray([], __read(dimensionValueTypes)), [color, complex]);\n/**\n * Tests a value against the list of ValueTypes\n */\nvar findValueType = function (v) { return valueTypes.find(testValueType(v)); };\n\nexport { findValueType };\n","import { __rest, __assign, __spreadArray, __read } from 'tslib';\nimport { complex } from 'style-value-types';\nimport { isNumericalString } from '../../utils/is-numerical-string.js';\nimport { resolveFinalValueInKeyframes } from '../../utils/resolve-value.js';\nimport { motionValue } from '../../value/index.js';\nimport { getAnimatableNone } from '../dom/value-types/animatable-none.js';\nimport { findValueType } from '../dom/value-types/find.js';\nimport { resolveVariant } from './variants.js';\n\n/**\n * Set VisualElement's MotionValue, creating a new MotionValue for it if\n * it doesn't exist.\n */\nfunction setMotionValue(visualElement, key, value) {\n    if (visualElement.hasValue(key)) {\n        visualElement.getValue(key).set(value);\n    }\n    else {\n        visualElement.addValue(key, motionValue(value));\n    }\n}\nfunction setTarget(visualElement, definition) {\n    var resolved = resolveVariant(visualElement, definition);\n    var _a = resolved\n        ? visualElement.makeTargetAnimatable(resolved, false)\n        : {}, _b = _a.transitionEnd, transitionEnd = _b === void 0 ? {} : _b; _a.transition; var target = __rest(_a, [\"transitionEnd\", \"transition\"]);\n    target = __assign(__assign({}, target), transitionEnd);\n    for (var key in target) {\n        var value = resolveFinalValueInKeyframes(target[key]);\n        setMotionValue(visualElement, key, value);\n    }\n}\nfunction setVariants(visualElement, variantLabels) {\n    var reversedLabels = __spreadArray([], __read(variantLabels)).reverse();\n    reversedLabels.forEach(function (key) {\n        var _a;\n        var variant = visualElement.getVariant(key);\n        variant && setTarget(visualElement, variant);\n        (_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n            setVariants(child, variantLabels);\n        });\n    });\n}\nfunction setValues(visualElement, definition) {\n    if (Array.isArray(definition)) {\n        return setVariants(visualElement, definition);\n    }\n    else if (typeof definition === \"string\") {\n        return setVariants(visualElement, [definition]);\n    }\n    else {\n        setTarget(visualElement, definition);\n    }\n}\nfunction checkTargetForNewValues(visualElement, target, origin) {\n    var _a, _b, _c;\n    var _d;\n    var newValueKeys = Object.keys(target).filter(function (key) { return !visualElement.hasValue(key); });\n    var numNewValues = newValueKeys.length;\n    if (!numNewValues)\n        return;\n    for (var i = 0; i < numNewValues; i++) {\n        var key = newValueKeys[i];\n        var targetValue = target[key];\n        var value = null;\n        /**\n         * If the target is a series of keyframes, we can use the first value\n         * in the array. If this first value is null, we'll still need to read from the DOM.\n         */\n        if (Array.isArray(targetValue)) {\n            value = targetValue[0];\n        }\n        /**\n         * If the target isn't keyframes, or the first keyframe was null, we need to\n         * first check if an origin value was explicitly defined in the transition as \"from\",\n         * if not read the value from the DOM. As an absolute fallback, take the defined target value.\n         */\n        if (value === null) {\n            value = (_b = (_a = origin[key]) !== null && _a !== void 0 ? _a : visualElement.readValue(key)) !== null && _b !== void 0 ? _b : target[key];\n        }\n        /**\n         * If value is still undefined or null, ignore it. Preferably this would throw,\n         * but this was causing issues in Framer.\n         */\n        if (value === undefined || value === null)\n            continue;\n        if (typeof value === \"string\" && isNumericalString(value)) {\n            // If this is a number read as a string, ie \"0\" or \"200\", convert it to a number\n            value = parseFloat(value);\n        }\n        else if (!findValueType(value) && complex.test(targetValue)) {\n            value = getAnimatableNone(key, targetValue);\n        }\n        visualElement.addValue(key, motionValue(value));\n        (_c = (_d = origin)[key]) !== null && _c !== void 0 ? _c : (_d[key] = value);\n        visualElement.setBaseTarget(key, value);\n    }\n}\nfunction getOriginFromTransition(key, transition) {\n    if (!transition)\n        return;\n    var valueTransition = transition[key] || transition[\"default\"] || transition;\n    return valueTransition.from;\n}\nfunction getOrigin(target, transition, visualElement) {\n    var _a, _b;\n    var origin = {};\n    for (var key in target) {\n        origin[key] =\n            (_a = getOriginFromTransition(key, transition)) !== null && _a !== void 0 ? _a : (_b = visualElement.getValue(key)) === null || _b === void 0 ? void 0 : _b.get();\n    }\n    return origin;\n}\n\nexport { checkTargetForNewValues, getOrigin, getOriginFromTransition, setTarget, setValues };\n","/**\n * Check if value is a numerical string, ie a string that is purely a number eg \"100\" or \"-100.1\"\n */\nvar isNumericalString = function (v) { return /^\\-?\\d*\\.?\\d+$/.test(v); };\n\nexport { isNumericalString };\n","var AnimationType;\n(function (AnimationType) {\n    AnimationType[\"Animate\"] = \"animate\";\n    AnimationType[\"Hover\"] = \"whileHover\";\n    AnimationType[\"Tap\"] = \"whileTap\";\n    AnimationType[\"Drag\"] = \"whileDrag\";\n    AnimationType[\"Focus\"] = \"whileFocus\";\n    AnimationType[\"Exit\"] = \"exit\";\n})(AnimationType || (AnimationType = {}));\n\nexport { AnimationType };\n","function addUniqueItem(arr, item) {\n    arr.indexOf(item) === -1 && arr.push(item);\n}\nfunction removeItem(arr, item) {\n    var index = arr.indexOf(item);\n    index > -1 && arr.splice(index, 1);\n}\n\nexport { addUniqueItem, removeItem };\n","// Call a handler once for each axis\nfunction eachAxis(handler) {\n    return [handler(\"x\"), handler(\"y\")];\n}\n\nexport { eachAxis };\n","import { __read } from 'tslib';\nimport { mix } from 'popmotion';\nimport { isDraggable } from '../../render/utils/is-draggable.js';\n\n/**\n * Reset an axis to the provided origin box.\n *\n * This is a mutative operation.\n */\nfunction resetAxis(axis, originAxis) {\n    axis.min = originAxis.min;\n    axis.max = originAxis.max;\n}\n/**\n * Reset a box to the provided origin box.\n *\n * This is a mutative operation.\n */\nfunction resetBox(box, originBox) {\n    resetAxis(box.x, originBox.x);\n    resetAxis(box.y, originBox.y);\n}\n/**\n * Scales a point based on a factor and an originPoint\n */\nfunction scalePoint(point, scale, originPoint) {\n    var distanceFromOrigin = point - originPoint;\n    var scaled = scale * distanceFromOrigin;\n    return originPoint + scaled;\n}\n/**\n * Applies a translate/scale delta to a point\n */\nfunction applyPointDelta(point, translate, scale, originPoint, boxScale) {\n    if (boxScale !== undefined) {\n        point = scalePoint(point, boxScale, originPoint);\n    }\n    return scalePoint(point, scale, originPoint) + translate;\n}\n/**\n * Applies a translate/scale delta to an axis\n */\nfunction applyAxisDelta(axis, translate, scale, originPoint, boxScale) {\n    if (translate === void 0) { translate = 0; }\n    if (scale === void 0) { scale = 1; }\n    axis.min = applyPointDelta(axis.min, translate, scale, originPoint, boxScale);\n    axis.max = applyPointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Applies a translate/scale delta to a box\n */\nfunction applyBoxDelta(box, _a) {\n    var x = _a.x, y = _a.y;\n    applyAxisDelta(box.x, x.translate, x.scale, x.originPoint);\n    applyAxisDelta(box.y, y.translate, y.scale, y.originPoint);\n}\n/**\n * Apply a transform to an axis from the latest resolved motion values.\n * This function basically acts as a bridge between a flat motion value map\n * and applyAxisDelta\n */\nfunction applyAxisTransforms(final, axis, transforms, _a) {\n    var _b = __read(_a, 3), key = _b[0], scaleKey = _b[1], originKey = _b[2];\n    // Copy the current axis to the final axis before mutation\n    final.min = axis.min;\n    final.max = axis.max;\n    var axisOrigin = transforms[originKey] !== undefined ? transforms[originKey] : 0.5;\n    var originPoint = mix(axis.min, axis.max, axisOrigin);\n    // Apply the axis delta to the final axis\n    applyAxisDelta(final, transforms[key], transforms[scaleKey], originPoint, transforms.scale);\n}\n/**\n * The names of the motion values we want to apply as translation, scale and origin.\n */\nvar xKeys = [\"x\", \"scaleX\", \"originX\"];\nvar yKeys = [\"y\", \"scaleY\", \"originY\"];\n/**\n * Apply a transform to a box from the latest resolved motion values.\n */\nfunction applyBoxTransforms(finalBox, box, transforms) {\n    applyAxisTransforms(finalBox.x, box.x, transforms, xKeys);\n    applyAxisTransforms(finalBox.y, box.y, transforms, yKeys);\n}\n/**\n * Remove a delta from a point. This is essentially the steps of applyPointDelta in reverse\n */\nfunction removePointDelta(point, translate, scale, originPoint, boxScale) {\n    point -= translate;\n    point = scalePoint(point, 1 / scale, originPoint);\n    if (boxScale !== undefined) {\n        point = scalePoint(point, 1 / boxScale, originPoint);\n    }\n    return point;\n}\n/**\n * Remove a delta from an axis. This is essentially the steps of applyAxisDelta in reverse\n */\nfunction removeAxisDelta(axis, translate, scale, origin, boxScale) {\n    if (translate === void 0) { translate = 0; }\n    if (scale === void 0) { scale = 1; }\n    if (origin === void 0) { origin = 0.5; }\n    var originPoint = mix(axis.min, axis.max, origin) - translate;\n    axis.min = removePointDelta(axis.min, translate, scale, originPoint, boxScale);\n    axis.max = removePointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Remove a transforms from an axis. This is essentially the steps of applyAxisTransforms in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\nfunction removeAxisTransforms(axis, transforms, _a) {\n    var _b = __read(_a, 3), key = _b[0], scaleKey = _b[1], originKey = _b[2];\n    removeAxisDelta(axis, transforms[key], transforms[scaleKey], transforms[originKey], transforms.scale);\n}\n/**\n * Remove a transforms from an box. This is essentially the steps of applyAxisBox in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\nfunction removeBoxTransforms(box, transforms) {\n    removeAxisTransforms(box.x, transforms, xKeys);\n    removeAxisTransforms(box.y, transforms, yKeys);\n}\n/**\n * Apply a tree of deltas to a box. We do this to calculate the effect of all the transforms\n * in a tree upon our box before then calculating how to project it into our desired viewport-relative box\n *\n * This is the final nested loop within updateLayoutDelta for future refactoring\n */\nfunction applyTreeDeltas(box, treeScale, treePath) {\n    var treeLength = treePath.length;\n    if (!treeLength)\n        return;\n    // Reset the treeScale\n    treeScale.x = treeScale.y = 1;\n    var node;\n    var delta;\n    for (var i = 0; i < treeLength; i++) {\n        node = treePath[i];\n        delta = node.getLayoutState().delta;\n        // Incoporate each ancestor's scale into a culmulative treeScale for this component\n        treeScale.x *= delta.x.scale;\n        treeScale.y *= delta.y.scale;\n        // Apply each ancestor's calculated delta into this component's recorded layout box\n        applyBoxDelta(box, delta);\n        // If this is a draggable ancestor, also incorporate the node's transform to the layout box\n        if (isDraggable(node)) {\n            applyBoxTransforms(box, box, node.getLatestValues());\n        }\n    }\n}\n\nexport { applyAxisDelta, applyAxisTransforms, applyBoxDelta, applyBoxTransforms, applyPointDelta, applyTreeDeltas, removeAxisDelta, removeAxisTransforms, removeBoxTransforms, removePointDelta, resetAxis, resetBox, scalePoint };\n","import { mix, distance, clamp, progress } from 'popmotion';\n\nvar clampProgress = function (v) { return clamp(0, 1, v); };\n/**\n * Returns true if the provided value is within maxDistance of the provided target\n */\nfunction isNear(value, target, maxDistance) {\n    if (target === void 0) { target = 0; }\n    if (maxDistance === void 0) { maxDistance = 0.01; }\n    return distance(value, target) < maxDistance;\n}\nfunction calcLength(axis) {\n    return axis.max - axis.min;\n}\n/**\n * Calculate a transform origin relative to the source axis, between 0-1, that results\n * in an asthetically pleasing scale/transform needed to project from source to target.\n */\nfunction calcOrigin(source, target) {\n    var origin = 0.5;\n    var sourceLength = calcLength(source);\n    var targetLength = calcLength(target);\n    if (targetLength > sourceLength) {\n        origin = progress(target.min, target.max - sourceLength, source.min);\n    }\n    else if (sourceLength > targetLength) {\n        origin = progress(source.min, source.max - targetLength, target.min);\n    }\n    return clampProgress(origin);\n}\n/**\n * Update the AxisDelta with a transform that projects source into target.\n *\n * The transform `origin` is optional. If not provided, it'll be automatically\n * calculated based on the relative positions of the two bounding boxes.\n */\nfunction updateAxisDelta(delta, source, target, origin) {\n    if (origin === void 0) { origin = 0.5; }\n    delta.origin = origin;\n    delta.originPoint = mix(source.min, source.max, delta.origin);\n    delta.scale = calcLength(target) / calcLength(source);\n    if (isNear(delta.scale, 1, 0.0001))\n        delta.scale = 1;\n    delta.translate =\n        mix(target.min, target.max, delta.origin) - delta.originPoint;\n    if (isNear(delta.translate))\n        delta.translate = 0;\n}\n/**\n * Update the BoxDelta with a transform that projects the source into the target.\n *\n * The transform `origin` is optional. If not provided, it'll be automatically\n * calculated based on the relative positions of the two bounding boxes.\n */\nfunction updateBoxDelta(delta, source, target, origin) {\n    updateAxisDelta(delta.x, source.x, target.x, defaultOrigin(origin.originX));\n    updateAxisDelta(delta.y, source.y, target.y, defaultOrigin(origin.originY));\n}\n/**\n * Currently this only accepts numerical origins, measured as 0-1, but could\n * accept pixel values by comparing to the target axis.\n */\nfunction defaultOrigin(origin) {\n    return typeof origin === \"number\" ? origin : 0.5;\n}\nfunction calcRelativeAxis(target, relative, parent) {\n    target.min = parent.min + relative.min;\n    target.max = target.min + calcLength(relative);\n}\nfunction calcRelativeBox(projection, parentProjection) {\n    calcRelativeAxis(projection.target.x, projection.relativeTarget.x, parentProjection.target.x);\n    calcRelativeAxis(projection.target.y, projection.relativeTarget.y, parentProjection.target.y);\n}\n\nexport { calcOrigin, calcRelativeAxis, calcRelativeBox, isNear, updateAxisDelta, updateBoxDelta };\n","import { addUniqueItem, removeItem } from './array.js';\n\nvar SubscriptionManager = /** @class */ (function () {\n    function SubscriptionManager() {\n        this.subscriptions = [];\n    }\n    SubscriptionManager.prototype.add = function (handler) {\n        var _this = this;\n        addUniqueItem(this.subscriptions, handler);\n        return function () { return removeItem(_this.subscriptions, handler); };\n    };\n    SubscriptionManager.prototype.notify = function (a, b, c) {\n        var numSubscriptions = this.subscriptions.length;\n        if (!numSubscriptions)\n            return;\n        if (numSubscriptions === 1) {\n            /**\n             * If there's only a single handler we can just call it without invoking a loop.\n             */\n            this.subscriptions[0](a, b, c);\n        }\n        else {\n            for (var i = 0; i < numSubscriptions; i++) {\n                /**\n                 * Check whether the handler exists before firing as it's possible\n                 * the subscriptions were modified during this loop running.\n                 */\n                var handler = this.subscriptions[i];\n                handler && handler(a, b, c);\n            }\n        }\n    };\n    SubscriptionManager.prototype.getSize = function () {\n        return this.subscriptions.length;\n    };\n    SubscriptionManager.prototype.clear = function () {\n        this.subscriptions.length = 0;\n    };\n    return SubscriptionManager;\n}());\n\nexport { SubscriptionManager };\n","/**\n * Converts seconds to milliseconds\n *\n * @param seconds - Time in seconds.\n * @return milliseconds - Converted time in milliseconds.\n */\nvar secondsToMilliseconds = function (seconds) { return seconds * 1000; };\n\nexport { secondsToMilliseconds };\n","import sync, { getFrameData } from 'framesync';\nimport { velocityPerSecond } from 'popmotion';\nimport { SubscriptionManager } from '../utils/subscription-manager.js';\n\nvar isFloat = function (value) {\n    return !isNaN(parseFloat(value));\n};\n/**\n * `MotionValue` is used to track the state and velocity of motion values.\n *\n * @public\n */\nvar MotionValue = /** @class */ (function () {\n    /**\n     * @param init - The initiating value\n     * @param config - Optional configuration options\n     *\n     * -  `transformer`: A function to transform incoming values with.\n     *\n     * @internal\n     */\n    function MotionValue(init) {\n        var _this = this;\n        /**\n         * Duration, in milliseconds, since last updating frame.\n         *\n         * @internal\n         */\n        this.timeDelta = 0;\n        /**\n         * Timestamp of the last time this `MotionValue` was updated.\n         *\n         * @internal\n         */\n        this.lastUpdated = 0;\n        /**\n         * Functions to notify when the `MotionValue` updates.\n         *\n         * @internal\n         */\n        this.updateSubscribers = new SubscriptionManager();\n        /**\n         * Functions to notify when the velocity updates.\n         *\n         * @internal\n         */\n        this.velocityUpdateSubscribers = new SubscriptionManager();\n        /**\n         * Functions to notify when the `MotionValue` updates and `render` is set to `true`.\n         *\n         * @internal\n         */\n        this.renderSubscribers = new SubscriptionManager();\n        /**\n         * Tracks whether this value can output a velocity. Currently this is only true\n         * if the value is numerical, but we might be able to widen the scope here and support\n         * other value types.\n         *\n         * @internal\n         */\n        this.canTrackVelocity = false;\n        this.updateAndNotify = function (v, render) {\n            if (render === void 0) { render = true; }\n            _this.prev = _this.current;\n            _this.current = v;\n            // Update timestamp\n            var _a = getFrameData(), delta = _a.delta, timestamp = _a.timestamp;\n            if (_this.lastUpdated !== timestamp) {\n                _this.timeDelta = delta;\n                _this.lastUpdated = timestamp;\n                sync.postRender(_this.scheduleVelocityCheck);\n            }\n            // Update update subscribers\n            if (_this.prev !== _this.current) {\n                _this.updateSubscribers.notify(_this.current);\n            }\n            // Update velocity subscribers\n            if (_this.velocityUpdateSubscribers.getSize()) {\n                _this.velocityUpdateSubscribers.notify(_this.getVelocity());\n            }\n            // Update render subscribers\n            if (render) {\n                _this.renderSubscribers.notify(_this.current);\n            }\n        };\n        /**\n         * Schedule a velocity check for the next frame.\n         *\n         * This is an instanced and bound function to prevent generating a new\n         * function once per frame.\n         *\n         * @internal\n         */\n        this.scheduleVelocityCheck = function () { return sync.postRender(_this.velocityCheck); };\n        /**\n         * Updates `prev` with `current` if the value hasn't been updated this frame.\n         * This ensures velocity calculations return `0`.\n         *\n         * This is an instanced and bound function to prevent generating a new\n         * function once per frame.\n         *\n         * @internal\n         */\n        this.velocityCheck = function (_a) {\n            var timestamp = _a.timestamp;\n            if (timestamp !== _this.lastUpdated) {\n                _this.prev = _this.current;\n                _this.velocityUpdateSubscribers.notify(_this.getVelocity());\n            }\n        };\n        this.hasAnimated = false;\n        this.prev = this.current = init;\n        this.canTrackVelocity = isFloat(this.current);\n    }\n    /**\n     * Adds a function that will be notified when the `MotionValue` is updated.\n     *\n     * It returns a function that, when called, will cancel the subscription.\n     *\n     * When calling `onChange` inside a React component, it should be wrapped with the\n     * `useEffect` hook. As it returns an unsubscribe function, this should be returned\n     * from the `useEffect` function to ensure you don't add duplicate subscribers..\n     *\n     * @library\n     *\n     * ```jsx\n     * function MyComponent() {\n     *   const x = useMotionValue(0)\n     *   const y = useMotionValue(0)\n     *   const opacity = useMotionValue(1)\n     *\n     *   useEffect(() => {\n     *     function updateOpacity() {\n     *       const maxXY = Math.max(x.get(), y.get())\n     *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\n     *       opacity.set(newOpacity)\n     *     }\n     *\n     *     const unsubscribeX = x.onChange(updateOpacity)\n     *     const unsubscribeY = y.onChange(updateOpacity)\n     *\n     *     return () => {\n     *       unsubscribeX()\n     *       unsubscribeY()\n     *     }\n     *   }, [])\n     *\n     *   return <Frame x={x} />\n     * }\n     * ```\n     *\n     * @motion\n     *\n     * ```jsx\n     * export const MyComponent = () => {\n     *   const x = useMotionValue(0)\n     *   const y = useMotionValue(0)\n     *   const opacity = useMotionValue(1)\n     *\n     *   useEffect(() => {\n     *     function updateOpacity() {\n     *       const maxXY = Math.max(x.get(), y.get())\n     *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\n     *       opacity.set(newOpacity)\n     *     }\n     *\n     *     const unsubscribeX = x.onChange(updateOpacity)\n     *     const unsubscribeY = y.onChange(updateOpacity)\n     *\n     *     return () => {\n     *       unsubscribeX()\n     *       unsubscribeY()\n     *     }\n     *   }, [])\n     *\n     *   return <motion.div style={{ x }} />\n     * }\n     * ```\n     *\n     * @internalremarks\n     *\n     * We could look into a `useOnChange` hook if the above lifecycle management proves confusing.\n     *\n     * ```jsx\n     * useOnChange(x, () => {})\n     * ```\n     *\n     * @param subscriber - A function that receives the latest value.\n     * @returns A function that, when called, will cancel this subscription.\n     *\n     * @public\n     */\n    MotionValue.prototype.onChange = function (subscription) {\n        return this.updateSubscribers.add(subscription);\n    };\n    MotionValue.prototype.clearListeners = function () {\n        this.updateSubscribers.clear();\n    };\n    /**\n     * Adds a function that will be notified when the `MotionValue` requests a render.\n     *\n     * @param subscriber - A function that's provided the latest value.\n     * @returns A function that, when called, will cancel this subscription.\n     *\n     * @internal\n     */\n    MotionValue.prototype.onRenderRequest = function (subscription) {\n        // Render immediately\n        subscription(this.get());\n        return this.renderSubscribers.add(subscription);\n    };\n    /**\n     * Attaches a passive effect to the `MotionValue`.\n     *\n     * @internal\n     */\n    MotionValue.prototype.attach = function (passiveEffect) {\n        this.passiveEffect = passiveEffect;\n    };\n    /**\n     * Sets the state of the `MotionValue`.\n     *\n     * @remarks\n     *\n     * ```jsx\n     * const x = useMotionValue(0)\n     * x.set(10)\n     * ```\n     *\n     * @param latest - Latest value to set.\n     * @param render - Whether to notify render subscribers. Defaults to `true`\n     *\n     * @public\n     */\n    MotionValue.prototype.set = function (v, render) {\n        if (render === void 0) { render = true; }\n        if (!render || !this.passiveEffect) {\n            this.updateAndNotify(v, render);\n        }\n        else {\n            this.passiveEffect(v, this.updateAndNotify);\n        }\n    };\n    /**\n     * Returns the latest state of `MotionValue`\n     *\n     * @returns - The latest state of `MotionValue`\n     *\n     * @public\n     */\n    MotionValue.prototype.get = function () {\n        return this.current;\n    };\n    /**\n     * @public\n     */\n    MotionValue.prototype.getPrevious = function () {\n        return this.prev;\n    };\n    /**\n     * Returns the latest velocity of `MotionValue`\n     *\n     * @returns - The latest velocity of `MotionValue`. Returns `0` if the state is non-numerical.\n     *\n     * @public\n     */\n    MotionValue.prototype.getVelocity = function () {\n        // This could be isFloat(this.prev) && isFloat(this.current), but that would be wasteful\n        return this.canTrackVelocity\n            ? // These casts could be avoided if parseFloat would be typed better\n                velocityPerSecond(parseFloat(this.current) -\n                    parseFloat(this.prev), this.timeDelta)\n            : 0;\n    };\n    /**\n     * Registers a new animation to control this `MotionValue`. Only one\n     * animation can drive a `MotionValue` at one time.\n     *\n     * ```jsx\n     * value.start()\n     * ```\n     *\n     * @param animation - A function that starts the provided animation\n     *\n     * @internal\n     */\n    MotionValue.prototype.start = function (animation) {\n        var _this = this;\n        this.stop();\n        return new Promise(function (resolve) {\n            _this.hasAnimated = true;\n            _this.stopAnimation = animation(resolve);\n        }).then(function () { return _this.clearAnimation(); });\n    };\n    /**\n     * Stop the currently active animation.\n     *\n     * @public\n     */\n    MotionValue.prototype.stop = function () {\n        if (this.stopAnimation)\n            this.stopAnimation();\n        this.clearAnimation();\n    };\n    /**\n     * Returns `true` if this value is currently animating.\n     *\n     * @public\n     */\n    MotionValue.prototype.isAnimating = function () {\n        return !!this.stopAnimation;\n    };\n    MotionValue.prototype.clearAnimation = function () {\n        this.stopAnimation = null;\n    };\n    /**\n     * Destroy and clean up subscribers to this `MotionValue`.\n     *\n     * The `MotionValue` hooks like `useMotionValue` and `useTransform` automatically\n     * handle the lifecycle of the returned `MotionValue`, so this method is only necessary if you've manually\n     * created a `MotionValue` via the `motionValue` function.\n     *\n     * @public\n     */\n    MotionValue.prototype.destroy = function () {\n        this.updateSubscribers.clear();\n        this.renderSubscribers.clear();\n        this.stop();\n    };\n    return MotionValue;\n}());\n/**\n * @internal\n */\nfunction motionValue(init) {\n    return new MotionValue(init);\n}\n\nexport { MotionValue, motionValue };\n","var warning = function () { };\r\nvar invariant = function () { };\r\nif (process.env.NODE_ENV !== 'production') {\r\n    warning = function (check, message) {\r\n        if (!check && typeof console !== 'undefined') {\r\n            console.warn(message);\r\n        }\r\n    };\r\n    invariant = function (check, message) {\r\n        if (!check) {\r\n            throw new Error(message);\r\n        }\r\n    };\r\n}\n\nexport { invariant, warning };\n","var clamp = function (min, max, v) {\n    return Math.min(Math.max(v, min), max);\n};\n\nexport { clamp };\n","var isPoint = function (point) {\n    return point.hasOwnProperty('x') && point.hasOwnProperty('y');\n};\n\nexport { isPoint };\n","import { isPoint } from './is-point.js';\n\nvar isPoint3D = function (point) {\n    return isPoint(point) && point.hasOwnProperty('z');\n};\n\nexport { isPoint3D };\n","import { isPoint } from './is-point.js';\nimport { isPoint3D } from './is-point-3d.js';\nimport { isNum } from './inc.js';\n\nvar distance1D = function (a, b) { return Math.abs(a - b); };\nfunction distance(a, b) {\n    if (isNum(a) && isNum(b)) {\n        return distance1D(a, b);\n    }\n    else if (isPoint(a) && isPoint(b)) {\n        var xDelta = distance1D(a.x, b.x);\n        var yDelta = distance1D(a.y, b.y);\n        var zDelta = isPoint3D(a) && isPoint3D(b) ? distance1D(a.z, b.z) : 0;\n        return Math.sqrt(Math.pow(xDelta, 2) + Math.pow(yDelta, 2) + Math.pow(zDelta, 2));\n    }\n}\n\nexport { distance };\n","var zeroPoint = {\n    x: 0,\n    y: 0,\n    z: 0\n};\nvar isNum = function (v) { return typeof v === 'number'; };\n\nexport { isNum, zeroPoint };\n","var mix = function (from, to, progress) {\n    return -progress * from + progress * to + from;\n};\n\nexport { mix };\n","var combineFunctions = function (a, b) { return function (v) { return b(a(v)); }; };\nvar pipe = function () {\n    var transformers = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        transformers[_i] = arguments[_i];\n    }\n    return transformers.reduce(combineFunctions);\n};\n\nexport { pipe };\n","var progress = function (from, to, value) {\n    var toFromDifference = to - from;\n    return toFromDifference === 0 ? 1 : (value - from) / toFromDifference;\n};\n\nexport { progress };\n","function velocityPerSecond(velocity, frameDuration) {\n    return frameDuration ? velocity * (1000 / frameDuration) : 0;\n}\n\nexport { velocityPerSecond };\n","import { rgba } from './rgba.js';\nimport { isColorString } from './utils.js';\n\nfunction parseHex(v) {\n    var r = '';\n    var g = '';\n    var b = '';\n    var a = '';\n    if (v.length > 5) {\n        r = v.substr(1, 2);\n        g = v.substr(3, 2);\n        b = v.substr(5, 2);\n        a = v.substr(7, 2);\n    }\n    else {\n        r = v.substr(1, 1);\n        g = v.substr(2, 1);\n        b = v.substr(3, 1);\n        a = v.substr(4, 1);\n        r += r;\n        g += g;\n        b += b;\n        a += a;\n    }\n    return {\n        red: parseInt(r, 16),\n        green: parseInt(g, 16),\n        blue: parseInt(b, 16),\n        alpha: a ? parseInt(a, 16) / 255 : 1,\n    };\n}\nvar hex = {\n    test: isColorString('#'),\n    parse: parseHex,\n    transform: rgba.transform,\n};\n\nexport { hex };\n","import { alpha } from '../numbers/index.js';\nimport { percent } from '../numbers/units.js';\nimport { sanitize } from '../utils.js';\nimport { isColorString, splitColor } from './utils.js';\n\nvar hsla = {\n    test: isColorString('hsl', 'hue'),\n    parse: splitColor('hue', 'saturation', 'lightness'),\n    transform: function (_a) {\n        var hue = _a.hue, saturation = _a.saturation, lightness = _a.lightness, _b = _a.alpha, alpha$1 = _b === void 0 ? 1 : _b;\n        return ('hsla(' +\n            Math.round(hue) +\n            ', ' +\n            percent.transform(sanitize(saturation)) +\n            ', ' +\n            percent.transform(sanitize(lightness)) +\n            ', ' +\n            sanitize(alpha.transform(alpha$1)) +\n            ')');\n    },\n};\n\nexport { hsla };\n","import { isString } from '../utils.js';\nimport { hex } from './hex.js';\nimport { hsla } from './hsla.js';\nimport { rgba } from './rgba.js';\n\nvar color = {\n    test: function (v) { return rgba.test(v) || hex.test(v) || hsla.test(v); },\n    parse: function (v) {\n        if (rgba.test(v)) {\n            return rgba.parse(v);\n        }\n        else if (hsla.test(v)) {\n            return hsla.parse(v);\n        }\n        else {\n            return hex.parse(v);\n        }\n    },\n    transform: function (v) {\n        return isString(v)\n            ? v\n            : v.hasOwnProperty('red')\n                ? rgba.transform(v)\n                : hsla.transform(v);\n    },\n};\n\nexport { color };\n","import { __assign } from 'tslib';\nimport { number, alpha } from '../numbers/index.js';\nimport { sanitize, clamp } from '../utils.js';\nimport { isColorString, splitColor } from './utils.js';\n\nvar clampRgbUnit = clamp(0, 255);\nvar rgbUnit = __assign(__assign({}, number), { transform: function (v) { return Math.round(clampRgbUnit(v)); } });\nvar rgba = {\n    test: isColorString('rgb', 'red'),\n    parse: splitColor('red', 'green', 'blue'),\n    transform: function (_a) {\n        var red = _a.red, green = _a.green, blue = _a.blue, _b = _a.alpha, alpha$1 = _b === void 0 ? 1 : _b;\n        return 'rgba(' +\n            rgbUnit.transform(red) +\n            ', ' +\n            rgbUnit.transform(green) +\n            ', ' +\n            rgbUnit.transform(blue) +\n            ', ' +\n            sanitize(alpha.transform(alpha$1)) +\n            ')';\n    },\n};\n\nexport { rgbUnit, rgba };\n","import { isString, singleColorRegex, floatRegex } from '../utils.js';\n\nvar isColorString = function (type, testProp) { return function (v) {\n    return Boolean((isString(v) && singleColorRegex.test(v) && v.startsWith(type)) ||\n        (testProp && Object.prototype.hasOwnProperty.call(v, testProp)));\n}; };\nvar splitColor = function (aName, bName, cName) { return function (v) {\n    var _a;\n    if (!isString(v))\n        return v;\n    var _b = v.match(floatRegex), a = _b[0], b = _b[1], c = _b[2], alpha = _b[3];\n    return _a = {},\n        _a[aName] = parseFloat(a),\n        _a[bName] = parseFloat(b),\n        _a[cName] = parseFloat(c),\n        _a.alpha = alpha !== undefined ? parseFloat(alpha) : 1,\n        _a;\n}; };\n\nexport { isColorString, splitColor };\n","import { __assign } from 'tslib';\nimport { complex } from './index.js';\nimport { floatRegex } from '../utils.js';\n\nvar maxDefaults = new Set(['brightness', 'contrast', 'saturate', 'opacity']);\nfunction applyDefaultFilter(v) {\n    var _a = v.slice(0, -1).split('('), name = _a[0], value = _a[1];\n    if (name === 'drop-shadow')\n        return v;\n    var number = (value.match(floatRegex) || [])[0];\n    if (!number)\n        return v;\n    var unit = value.replace(number, '');\n    var defaultValue = maxDefaults.has(name) ? 1 : 0;\n    if (number !== value)\n        defaultValue *= 100;\n    return name + '(' + defaultValue + unit + ')';\n}\nvar functionRegex = /([a-z-]*)\\(.*?\\)/g;\nvar filter = __assign(__assign({}, complex), { getAnimatableNone: function (v) {\n        var functions = v.match(functionRegex);\n        return functions ? functions.map(applyDefaultFilter).join(' ') : v;\n    } });\n\nexport { filter };\n","import { color } from '../color/index.js';\nimport { number } from '../numbers/index.js';\nimport { isString, floatRegex, colorRegex, sanitize } from '../utils.js';\n\nvar colorToken = '${c}';\nvar numberToken = '${n}';\nfunction test(v) {\n    var _a, _b, _c, _d;\n    return (isNaN(v) &&\n        isString(v) &&\n        ((_b = (_a = v.match(floatRegex)) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0) + ((_d = (_c = v.match(colorRegex)) === null || _c === void 0 ? void 0 : _c.length) !== null && _d !== void 0 ? _d : 0) > 0);\n}\nfunction analyse(v) {\n    var values = [];\n    var numColors = 0;\n    var colors = v.match(colorRegex);\n    if (colors) {\n        numColors = colors.length;\n        v = v.replace(colorRegex, colorToken);\n        values.push.apply(values, colors.map(color.parse));\n    }\n    var numbers = v.match(floatRegex);\n    if (numbers) {\n        v = v.replace(floatRegex, numberToken);\n        values.push.apply(values, numbers.map(number.parse));\n    }\n    return { values: values, numColors: numColors, tokenised: v };\n}\nfunction parse(v) {\n    return analyse(v).values;\n}\nfunction createTransformer(v) {\n    var _a = analyse(v), values = _a.values, numColors = _a.numColors, tokenised = _a.tokenised;\n    var numValues = values.length;\n    return function (v) {\n        var output = tokenised;\n        for (var i = 0; i < numValues; i++) {\n            output = output.replace(i < numColors ? colorToken : numberToken, i < numColors ? color.transform(v[i]) : sanitize(v[i]));\n        }\n        return output;\n    };\n}\nvar convertNumbersToZero = function (v) {\n    return typeof v === 'number' ? 0 : v;\n};\nfunction getAnimatableNone(v) {\n    var parsed = parse(v);\n    var transformer = createTransformer(v);\n    return transformer(parsed.map(convertNumbersToZero));\n}\nvar complex = { test: test, parse: parse, createTransformer: createTransformer, getAnimatableNone: getAnimatableNone };\n\nexport { complex };\n"],"sourceRoot":""}